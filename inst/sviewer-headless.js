!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=45)}([function(t,e,r){"use strict";r.d(e,"a",(function(){return p})),r.d(e,"b",(function(){return y}));var n={O:-100,N:-200},i=Symbol("anomer"),o=Symbol("identifier"),s=Symbol("parent_linkage"),a=Symbol("parent"),c=Symbol("unknown_count"),l=(t,e,r)=>r.indexOf(t)===e,u=function t(e){return 0==e.children.length?[e]:Array.prototype.concat.apply([],e.children.map(t))},h=function(t,e){for(var r=[e];t.indexOf(r[0])<0;)r.unshift(r[0].parent);return r},d=function(t,e){return t.parent.linkageOf(t)!==e.parent.linkageOf(e)?t.parent.linkageOf(t)-e.parent.linkageOf(e):t.identifier!==e.identifier?t.identifier.toUpperCase()<e.identifier.toUpperCase()?-1:1:0},f=function(t,e){for(var r=[].concat(t),n=[].concat(e);r.length>0&&n.length>0;){var i=r.shift(),o=n.shift(),s=d(i,o);if(s)return s}return-1*(r.length-n.length)},p=function(t){var e=[];for(var r of t)e=e.concat(u(r));return e.map(h.bind(null,t)).sort(f).map(t=>t[0]).filter(l)},m=new WeakMap,g=new WeakMap,v=new WeakMap;class y{static get LINKAGES(){return n}constructor(t){if(!t)throw new Error("Missing identifier");this[o]=t}get depth(){for(var t=this,e=1;t.parent;)e++,t=t.parent;return e}get identifier(){return this[o]}get anomer(){return this[i]}set anomer(t){this[i]=t}get parent_linkage(){return this[s]}set parent_linkage(t){this[s]=t}get parent(){return this[a]}get children(){return Object.freeze([].concat(g.get(this)||[]))}get child_linkages(){var t=new Map;return this.children.forEach(e=>{var r=m.get(e),n=r;r>100&&(n=0);var i=t.get(n);i||(i=[],t.set(n,i)),i.push(e)}),t}get siblings(){var t=this;return this.parent?this.parent.children.filter(e=>e!==t):[]}balance(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(Object.isFrozen(this))throw new TypeError("Cannot balance child ordering of frozen monosaccharide");var e=p(this.children);this[c]=0;var r=0;for(var n of e)m.get(n)>100&&(r+=1,m.set(n,101+r));this[c]=r,g.set(this,e);var i=this;if(t)for(;i&&i.parent;){var o=i.parent.linkageOf(i);i.parent.child_linkages.get(o).length>0&&i.parent.balance(!1),i=i.parent}}addChild(t,e){if(Object.isFrozen(this)||Object.isFrozen(e))throw new TypeError("Cannot add child on frozen monosaccharide");if("number"!=typeof t)throw new Error("Linkage must be number");if(t>100)throw new Error("Cannot set defined linkage greater than ".concat(100));if(0==t){this[c]=this[c]||0;var r=this[c];this[c]=r+1,t=101+r}var n=0;for(var i of this.children){if(!(m.get(i)<=t))break;n+=1}m.set(e,t);var o=g.get(this)||[];o.splice(n,0,e),g.set(this,o),e[a]=this}removeChild(t,e){if(Object.isFrozen(this))throw new TypeError("Cannot remove child on frozen monosaccharide");var r=g.get(this),n=e=>{r.splice(r.indexOf(e),1),m.delete(e),e[a]=null,0==t&&(this[c]-=1)},i=t=>!e||t===e;for(var[o,s]of this.child_linkages)t==o&&s.filter(i).forEach(n)}donateChildrenTo(t){if(Object.isFrozen(this)||Object.isFrozen(t))throw new TypeError("Cannot adopt children on frozen monosaccharide");for(var[,e]of this.child_linkages)for(var r of e)t.graft(r)}replaceChild(t,e,r){if(Object.isFrozen(this)||Object.isFrozen(e)||Object.isFrozen(t))throw new TypeError("Cannot replace child on frozen monosaccharide");var n=this.linkageOf(t),i=t.parent_linkage,o=t.anomer,s=this.removeChild(n,t),a=s||this;e.parent_linkage=i,e.anomer=o,void 0!==r?a.addChild(r,e):a.addChild(n,e)}linkageOf(t){var e,r=this.child_linkages.entries();for(e of r)if(e[1].indexOf(t)>=0)return e[0]}graft(t){if(Object.isFrozen(this)||Object.isFrozen(t))throw new TypeError("Cannot graft child on frozen monosaccharide");var e=t.parent,r=e.linkageOf(t);e.removeChild(r,t),this.addChild(r,t)}childAt(t){var e=this.child_linkages.get(t);return e?e[0]:e}toString(){return this.identifier}valueOf(){return this.identifier}setTag(t,e){v.has(this)||v.set(this,new Map);var r=v.get(this),n="symbol"==typeof t?t:Symbol(t);return r.set(n,void 0===e||e),null===e&&r.delete(n),n}getTags(){return v.has(this)?[...v.get(this).keys()]:[]}getTag(t){if(v.has(this))return v.get(this).get(t)}copyTagsFrom(t){v.has(this)||v.set(this,new Map);var e=v.get(this);for(var r of(v.get(t)||new Map).keys())e.set(r,v.get(t).get(r))}clone(){var t=new this.constructor(this.identifier);return t[i]=this[i],t[s]=this[s],t.copyTagsFrom(this),t}toSugar(t){var e=new t;e.root=this;var r=e.clone();return e.root=null,r}}var b=t=>class extends t{addChild(t,e){return this.childAt(t)&&this.removeChild(t),super.addChild(t,e)}};b(y)},function(t,e,r){"use strict";r.d(e,"a",(function(){return O}));var n=r(0),i=r(5);function o(){this.clear()}o.prototype={toString:function(){return"[object MixedTupleMap]"},_hash:function(t){if(t===this._lastTuple)return this._lastHash;for(var e=t.length,r=[],n=[],i=[],o=0;o<e;o++){var s=t[o],a=typeof s;null===a||"object"!==a&&"function"!==a?(r.push("string"===a?'"'+s+'"':""+s),n.push(o)):i.push(o)}if(0===i.length)throw new Error("Tuple must have at least one non-primitive part");return r.push("["+i.concat(n).join()+"]"),this._lastTuple=t,this._lastHash={nonPrimOrder:i,primHash:r.join("/<[MI_SEP]>/")},this._lastHash},has:function(t){for(var e=this._cache,r=this._hash(t),n=r.nonPrimOrder.length,i=0;i<n;i++){var o=t[r.nonPrimOrder[i]];if(!e.has||!e.has(o))return!1;e=e.get(o)}return!!e.has&&e.has(r.primHash)},set:function(t,e){for(var r=this._cache,n=this._hash(t),i=n.nonPrimOrder.length,o=!1,s=0;s<i;s++){var a=t[n.nonPrimOrder[s]];!o&&r.has(a)?r=r.get(a):(o=!0,r.set(a,r=s<i-1?new WeakMap:new Map))}return r.set(n.primHash,e),this},get:function(t){for(var e=this._cache,r=this._hash(t),n=r.nonPrimOrder.length,i=0;i<n;i++){var o=t[r.nonPrimOrder[i]],s=e.get&&e.get(o);if(void 0===s)return s;e=s}return e.get&&e.get(r.primHash)},clear:function(){this._cache=new WeakMap,delete this._lastTuple,delete this._lastHash}};var s=o,a=Symbol("template_sugar"),c=Symbol("last_residue"),l=Symbol("min_repeats"),u=Symbol("max_repeats"),h=Symbol("identifier"),d=Symbol("active_mode"),f=Symbol("MODE_EXPAND"),p=Symbol("MODE_MINIMAL"),m=Symbol("parent"),g=Symbol("sort_order"),v=Symbol("child_residue"),y=Symbol("repeat"),b=Symbol("counter"),w=new s,x={};class _{constructor(){}static get(t){return x[t]||(x[t]=new _),x[t]}}var T,E=(t,e,r,n,i)=>{var o=[e,_.get(i),r];return w.has(o)||w.set(o,new t(r,n,e,i)),w.get(o)},N=(t,e)=>{Object.defineProperty(t,"parent",{configurable:!0,enumerable:!0,get:()=>{var t=e.mode===f?e.max:e.mode===p?e.min:1;return E(e.constructor.Monosaccharide,e,e[c],null,t)}})};class S extends i.a{constructor(t,e,r,n){return super(t),this[m]=e,this[y]=r,this[b]=n,this}static is_wrapped(t){return t instanceof S}static is_not_wrapped(t){return!S.is_wrapped(t)}clone(){var t=new this.constructor(this.original,this[m],this[y].clone(),this[b]);return t.copyTagsFrom(this),t}get repeat(){return this[y]}get counter(){return this[b]}balance(){var t=this.children.map(t=>({link:this.linkageOf(t),res:t}));t.sort((t,e)=>t.link-e.link);var e=t.map(t=>t.res);(e=Object.freeze(Object(n.a)(e))).forEach((t,e)=>{t[g]=e+1})}addChild(t,e){if(this.repeat.mode===f&&(!this.endsRepeatUnit||this.counter<this.repeat.max))return super.addChild(t,e);this.repeat[v].children.indexOf(e)<0&&(this.repeat[v].addChild(t,e),N(e,this.repeat))}donateChildrenTo(t){if(this.counter===this.repeat.max&&this.endsRepeatUnit)for(var e of this.repeat.children)delete e.parent,t.graft(e);else T(this,t)}replaceChild(t,e,r){return this.repeat.mode===f?super.replaceChild(t,e,r):t instanceof S?(this.repeat[c]===t.original&&(this.repeat[c]=e),this.original.replaceChild(t.original,e,r)):super.replaceChild(t,e,r)}removeChild(t,e){if(this.repeat.mode===f){if(this.endsRepeatUnit&&this.counter===this.repeat.max)return this.repeat[v].removeChild(t,e);if(e instanceof S){for(var r=this;r&&r instanceof S&&!r.endsRepeatUnit;)r=r.parent;var n=new(0,this.original.constructor)("temp_root"),i=T(r,n,e);i.get(this)||i.set(this,this);var o=i.get(this);if(o!==this&&(this.balance=()=>o.balance(),o.renderer=this.renderer),r instanceof S)r.repeat.max=r.counter,r.repeat.children=[...n.children];else{for(var s of r.children.filter(t=>t instanceof S))r.removeChild(r.linkageOf(s),s);for(var a of n.children)r.graft(a)}return o}return super.removeChild(t,e)}if(this.repeat.mode===p){if(e instanceof S)return e.endsRepeatUnit?(e.original.parent.removeChild(e.original.parent.linkageOf(e.original),e.original),void e.repeat.root.parent.replaceChild(e.repeat.root,e.repeat.root.original)):void e.original.parent.removeChild(e.original.parent.linkageOf(e.original),e.original);if(this.repeat.children.indexOf(e)>=0)return this.repeat[v].removeChild(t,e),void delete e.parent;throw new Error("REPEAT_UNREACHABLE")}if(!this.endsRepeatUnit)throw new Error("Removing a child that isnt at the end of a repeat")}get endsRepeatUnit(){return this.original===this.repeat[c]}get parent(){return this[m]?this[m]:super.parent}linkageOf(t){return t instanceof S&&t.repeat===this.repeat?this.endsRepeatUnit&&t.repeat===this.repeat&&t.counter!==this.counter&&t.original===this.repeat.root.original?this.repeat.root.parent.linkageOf(this.repeat.root):this.original.linkageOf(t.original):this.endsRepeatUnit&&this.repeat.children.indexOf(t)>=0?this.repeat[v].linkageOf(t):new n.b(" ").linkageOf.call(this,t)}get child_linkages(){var t=super.child_linkages,e=new Map;for(var r of t.keys()){for(var n of t.get(r).filter(S.is_wrapped)){var i=n.original.parent.linkageOf(n.original);e.set(i,(e.get(i)||[]).concat(n))}for(var o of t.get(r).filter(S.is_not_wrapped))e.set(r,(e.get(r)||[]).concat(o))}return e}get children(){var t=this.repeat.mode===f?this.repeat.max:this.repeat.mode===p?this.repeat.min:1,e=this.original.children,r=super.children,n=[];this.repeat.mode===p&&(r=[]),this.endsRepeatUnit&&this.counter>=t&&(n=this.repeat.children);var i=[];this.endsRepeatUnit&&this.counter<t&&i.push(E(this.constructor,this.repeat,this.repeat.root.original,this,this.counter+1));var o=e.map(t=>E(this.constructor,this.repeat,t,this,this.counter)),s=Object.freeze([r,n,i].reduce((t,e)=>t.concat(e),o));return s.length>0&&s.every(t=>t[g])?Object.freeze(s.slice().sort((t,e)=>t[g]-e[g])):s}}T=(t,e,r)=>{var n=t.children.filter(t=>t!==r),i=new Map;for(var o of(n.forEach(((t,e)=>{var r=e.parent,n=r.linkageOf(e),o=e instanceof S?e.original.clone():e;r instanceof S&&r.repeat[v].children.indexOf(e)>=0&&(r.repeat[v].removeChild(n,e),delete e.parent),i.set(e,o),t.children.indexOf(o)<0&&t.addChild(n,o)}).bind(null,e)),n))i=new Map([...i,...T(o,i.get(o),r)]);return i};class O{constructor(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this[a]=t;var o=t.leaves()[0];if("Root"===t.root.identifier&&(t.root=t.root.children[0]),this[c]=o,e)this[c]="string"!=typeof e||e instanceof n.b?e:t.locate_monosaccharide(e);else if(1!==t.leaves.length)throw new Error("Too many leaves on repeat without defined attachment site");"string"!=typeof e&&(e=t.location_for_monosaccharide(this[c])),this[l]=r,this[u]=i,this[v]=new n.b("Root")}clone(){var t=new this.constructor(this[a],this[c],this.min,this.max);return t.identifier=this.identifier,this.mode&&(t.mode=this.mode),t}get off_main(){return this[c]!==this[a].leaves()[0]}static get Monosaccharide(){return S}static addToSugar(t,e,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;e instanceof n.b||"string"!=typeof e||(e=t.locate_monosaccharide(e)),r instanceof n.b||"string"!=typeof r||(r=t.locate_monosaccharide(r));var a=new n.b("Root");for(var c of r.children)a.graft(c);var l=e.parent,u=l.linkageOf(e);if(l.removeChild(u,e),l instanceof S){var h=e.clone();for(var d of e.children)h.graft(d);e=h}var f=new t.constructor;f.root=new n.b("Root"),f.root.addChild(u,e);var p=new O(f,r,o,s);for(var m of(p.mode=i,a.children))p[v].graft(m),N(m,p);return l.addChild(u,p.root),p}static get MODE_EXPAND(){return f}static get MODE_MINIMAL(){return p}get template(){return this[a]}get root(){var t=E(S,this,this[a].root,null,this.min);if(this[a].root.parent&&!t.parent){var e=this[a].root.parent.linkageOf(this[a].root),r=this[a].root.parent.clone();r.removeChild(e,this[a].root),r.addChild(e,t)}return t}get attachment(){return this.template.location_for_monosaccharide(this[c])}get identifier(){return this[h]||""}set identifier(t){this[h]=t}get mode(){return this[d]}set mode(t){if([p,f].indexOf(t)<0)throw new Error("Invalid mode");this[d]=t}get min(){return this[l]}get max(){return this[u]}set max(t){this[u]=t}get children(){return this[v].children}set children(t){var e=this[v];for(var r of e.children.filter(e=>t.indexOf(e)<0))e.removeChild(e.linkageOf(r),r);for(var n of t.filter(t=>e.children.indexOf(t)<0))n.parent?e.graft(n):e.addChild(0,n),N(n,this)}}},function(t,e,r){"use strict";r.r(e),r.d(e,"Sugar",(function(){return L})),r.d(e,"Monosaccharide",(function(){return i.b})),r.d(e,"Reaction",(function(){return mt})),r.d(e,"SEQUENCE_CACHEKEY",(function(){return ot})),r.d(e,"ReactionSet",(function(){return Q})),r.d(e,"ReactionGroup",(function(){return Z})),r.d(e,"comparator",(function(){return Y})),r.d(e,"Repeat",(function(){return o.a})),r.d(e,"CondensedIupac",(function(){return n})),r.d(e,"CondensedLayout",(function(){return qt})),r.d(e,"SugarAwareLayout",(function(){return Qt})),r.d(e,"LinkageLayout",(function(){return ne})),r.d(e,"FishEyeLayout",(function(){return qe})),r.d(e,"SugarAwareLayoutFishEye",(function(){return Ve})),r.d(e,"LinkageLayoutFishEye",(function(){return ze})),r.d(e,"SVGRenderer",(function(){return de.a})),r.d(e,"CanvasRenderer",(function(){return fe.a})),r.d(e,"SVGCanvas",(function(){return pe.a})),r.d(e,"Fragmentor",(function(){return Ue})),r.d(e,"Mass",(function(){return Ne}));var n={};r.r(n),r.d(n,"Builder",(function(){return Ct})),r.d(n,"Writer",(function(){return At})),r.d(n,"IO",(function(){return Mt}));var i=r(0),o=r(1),s=r(5),a=r(3),c=(Symbol("uuid"),new WeakMap);var l=class{constructor(){this._cache=new Map}has(t){return null!=this._cache.get(t.map(t=>c.get(t)).join("#"))}get(t){return this._cache.get(t.map(t=>c.get(t)).join("#"))}set(t,e){var r=t.map(t=>{var e=c.get(t);return e||(e=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)),c.set(t,e)),e});this._cache.set(r.join("#"),e)}},u=Object(a.a)("glycanjs:searching"),h=t=>[].concat.apply([],t),d=function(t,e,r){return r.indexOf(t)===e},f=function(t,e,r){for(var n=null,i=[].concat(t),o=[].concat(r);n=i.shift();){var s=i.length>0;o=o.filter(e.bind(null,n)),s&&(o=o.map(t=>t.parent)),o=o.filter(t=>null!=t)}return o.map(t=>r.indexOf(t)).map(e=>r.slice(e-t.length+1,e+1))},p=function(t,e,r){var n=t.paths(),i=e.paths(),o=[],s=new WeakMap,a=t=>t.map(t=>t[t.length-1]);return i.forEach(t=>{var e=f.bind(null,t,r),i=n.map(e);o=o.concat(h(i.map(a))).filter(d),h(h(i)).filter(d).forEach(t=>{s.set(t,(s.get(t)||0)+1)})}),o.filter(t=>s.get(t)==e.leaves().length)},m=function(t,e){return e.children.map(r=>{var n=r.toSugar(t.constructor);return n.linkage=e.linkageOf(r),n.parent_link=e.parent?e.parent.linkageOf(e):0,n})},g=function(t,e,r){var n=Symbol("wildcard");u.info("Wildcard matching",t.sequence,e.sequence);var i=e.composition().filter(t=>"*"===t.identifier).map(m.bind(null,e)),o=e.clone();o.composition().filter(t=>"*"===t.identifier).forEach(t=>{t.children.map(e=>t.removeChild(t.linkageOf(e),e)),t.setTag(n,!0)}),u.info("Root sugar for wildcard matching",o.sequence),u.info("We have",i.length,"wildcard subtrees to ensure matches for"),i.forEach(t=>t.forEach(t=>{var e=new(0,t.constructor.Monosaccharide)("*");e.addChild(t.linkage,t.root),t.root=e,u.info("Wildcard subtree sequence:",t.sequence)}));var s=p(t,o,r),a=h(s.map(e=>t.trace(o,e,r)));u.info("RESULTS from matching Root sugar, total of",a.length,"trees matched"),a.forEach(t=>{u.info("RESULT Root sugar match sequence",t.sequence);var e=t.composition_for_tag(n)[0];u.info("The residue acting as wildcard is",e,"with parent",e.parent?e.parent.identifier:"(No root)")});var c=function(t,e){var r=new WeakMap;for(var n of t)for(var i of(u.info("For a Root tree match",n.sequence,"we are finding wildcard leaves"),n.leaves()))i.getTag(e)&&(r.set(i.original,n),u.info("Adding leaf",i.original.identifier," to tree mapping"),i.parent&&(r.set(i.parent.original,n),u.info("Adding leaf parent",i.parent.original.identifier," to tree mapping")));return r}(a,n),l=i.map((function(e){return e.map((function(e){var i=p(t,e,r);u.info("For subtree",e.sequence,"we matched roots",i.map(t=>t.identifier)),u.info("We should be able to match each of these roots with a Root sugar match"),i=i.filter(t=>!t.parent||0==e.parent_link||t.parent.linkageOf(t)==e.parent_link).map(e=>{u.info("The parents of ",e.identifier,e.parent," are being checked for being leaves of any root tree");var r=[...t.residues_to_root(e)];for(var n of r)if(c.get(n))return{root:e,parent_leaf:n}}).filter(t=>t),u.info("Number of subtrees that are a parent of a root match",i.length);var s=i.map(i=>{var s=t.trace(e,i.root,r),a=c.get(i.parent_leaf),l=o.composition_for_tag(n)[0],h=[];for(var d of(u.info("Matched after tracing",s),s)){var f=a.clone(),p=f.composition_for_tag(n)[0];d.root.original=l,p===f.root?f.root=d.root:(d.root.copyTagsFrom(p),p.parent.replaceChild(p,d.root,0)),h.push(f)}return h});return h(s)}))}));return u.info("Found",h(h(l)).length,"matching trees"),h(h(l))};var v=Symbol("cache_symbol"),y={type:"wildcard"},b={type:"fixed"},w={type:"composition"},x={type:"trace"};class _ extends class{static search(t,e,r){return e.composition().filter(t=>"*"===t.identifier).length>0?this.search_wildcard_paths(t,e,r):this.search_fixed_paths(t,e,r)}static search_wildcard_paths(t,e,r){return g(t,e,r)}static search_fixed_paths(t,e,r){return p(t,e,r)}}{static get Cache(){return this[v]||(this[v]=new l),this[v]}static search(t,e,r){if(!Object.isFrozen(t)||!Object.isFrozen(e))return super.search(t,e,r);var n=[t,w],i=[e,w],o=this.Cache.get(i),s=this.Cache.get(n);return s||(s=t.composition().map(t=>t.identifier),this.Cache.set(n,s)),o||(o=e.composition().map(t=>t.identifier),this.Cache.set(i,o)),o.every(t=>"*"===t||null!=s.find(e=>e===t))?super.search(t,e,r):[]}static search_wildcard_paths(t,e,r){if(!Object.isFrozen(t)||!Object.isFrozen(e))return super.search_wildcard_paths(t,e,r);var n=[t,e,r,y];return this.Cache.has(n)||this.Cache.set(n,super.search_wildcard_paths(t,e,r)),this.Cache.get(n)}static search_fixed_paths(t,e,r){if(!Object.isFrozen(t)||!Object.isFrozen(e))return super.search_fixed_paths(t,e,r);var n=[t,e,r,b];return this.Cache.has(n)||this.Cache.set(n,super.search_fixed_paths(t,e,r)),this.Cache.get(n)}}var T=(t,e,r,n)=>{if(!Object.isFrozen(t)||!Object.isFrozen(e))return t.trace(e,r,n);var i=[t,e,r,n,x],o=_.Cache;return o.has(i)||o.set(i,t.trace(e,r,n)),o.get(i).map(t=>t.clone())},E=t=>{for(var e=t;e.parent;){var r=e.parent.children,n=r[r.indexOf(e)+1];if(n)return n;e=e.parent}return null},N=function*(t){for(var e=[...t.depth_first_traversal()],r=0;r<e.length;){var n=e[r],i=E(n);i||(i=n);var o=e.indexOf(i),s=e.slice(r+1,o),a=e.slice(o===r?o+1:o);if(o===r)for(var c of a)yield{root:n,chord:[n,c]};else{for(var l of a)yield{root:t.root,chord:[n,l]};for(var u of s)yield{root:n,chord:[n,u]}}r+=1}},S=function*(t,e){if(e<2)throw new Error("Cannot expand chord set when n < 2");var r=[...N(t)],n=r.filter(e=>e.root===t.root&&e.chord[0]!==t.root),i={};for(var o of n)i[o.chord[0]]=i[o.chord[0]]||[],i[o.chord[0]].push(o.chord[1]);var s=0;for(var a of r)yield a;for(;s<e-2&&r.length>0;){var c=[];for(var l of r)for(var u of i[l.chord[l.chord.length-1]]||[])if(t.composition(l.root).indexOf(u)>=0){var h={root:l.root};h.chord=l.chord.concat(u),yield h,c.push(h)}r=c,s+=1}},O=function*(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;e>=1&&(yield*t.depth_first_traversal(t.root,e=>({root:t.root,chord:[e]})),yield*t.depth_first_traversal(t.root,e=>e===t.root?null:{root:e,chord:[e]})),e>=2&&(yield*S(t,e))},C=Symbol("root"),A=function(t,e){for(var r=null;!(r=Object.getOwnPropertyDescriptor(t,e))&&Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return r},M=function(t,e,r){return r.indexOf(t)===e},k=(t,e)=>e.getTag(t),j=Symbol("frozen_sequence"),P=Symbol("frozen_composition"),I=function t(e,r,n){for(var i of e.children.filter(t=>t instanceof o.a.Monosaccharide)){if(i.counter==r&&i.original==n)return i;if(!(i.counter>r)){var s=t(i,r,n);if(s)return s}}};class L{constructor(){}set root(t){this[C]=t}get root(){return this[C]}static get Monosaccharide(){return i.b}freeze(){var t=this;for(var e of this.breadth_first_traversal())Object.freeze(e);this[j]=this.sequence,this[P]=this.composition(),Object.defineProperty(this,"composition",{value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.root;return e===t.root?t[P]:t.constructor.prototype.composition.call(t,e)}}),Object.defineProperty(this,"sequence",{get:()=>this[j]}),Object.freeze(this)}get repeats(){return this.composition(this.root).filter(t=>t instanceof o.a.Monosaccharide).map(t=>t.repeat).filter((t,e,r)=>r.indexOf(t)===e)}paths(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.leaves(t),r=this;return[].concat(e).map(t=>Array.from(r.residues_to_root(t)))}leaves(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root;return this.composition(t).filter(t=>0===t.children.length)}locate_monosaccharide(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root,[,r,n]=t.match(/[a-zA-Z]+|[0-9]+/g);r=parseInt(r),n=n.charCodeAt(0)-"a".charCodeAt(0);var i=this.paths(e).map(t=>t.reverse()[r-1]).filter(t=>t).filter(M);return 1==i.length&&i[0]===e?e:i[n]}location_for_monosaccharide(t){var e=[...this.breadth_first_traversal()].filter(e=>e.depth===t.depth).indexOf(t);return"y"+t.depth+String.fromCharCode("a".charCodeAt(0)+e)}composition(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root,e=this;return t?[[t]].concat(t.children.map(t=>e.composition(t))).reduce((t,e)=>t.concat(e)):[]}composition_for_tag(t){return this.composition().filter(k.bind(null,t))}clone(t){var e=new WeakMap,r=new WeakMap,n=this.breadth_first_traversal(this.root,t);for(var s of n)if(!(s instanceof o.a.Monosaccharide&&s.repeat.root!==s)){e.has(s)||e.set(s,s.clone());var a=e.get(s);if(a instanceof o.a.Monosaccharide&&(r.set(s.repeat,a.repeat),e.set(s,a.repeat.root),a=e.get(s)),s.parent instanceof o.a.Monosaccharide&&s.parent.repeat.children.indexOf(s)>=0){var c=r.get(s.parent.repeat);new i.b("Root").addChild(s.parent.linkageOf(s),a),c.children=c.children.concat(a)}else if(s.parent&&e.get(s.parent))e.get(s.parent).addChild(s.parent.linkageOf(s),a),e.get(s.parent).balance();else if(s.parent&&s.parent instanceof o.a.Monosaccharide){var l=r.get(s.parent.repeat),u=I(l.root,s.parent.counter,s.parent.original);u.addChild(s.parent.linkageOf(s),a),u.balance()}}var h=new this.constructor;return h.root=e.get(this.root),h}match_sugar_pattern(t,e){var r,n=_.search(this,t,e);return t.composition().map(t=>t.identifier).filter(t=>"*"===t).length>0?n:(r=n.map(r=>T(this,t,r,e)),[].concat.apply([],r))}trace(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(t,e)=>!0;return s.b.trace(this,e,t,r)}*breadth_first_traversal(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>t;if(t){var r=[];for(r.push(t);r.length>0;){var n=r.shift();r=r.concat(n.children),e&&(n=e(n)),n&&(yield n)}}}*depth_first_traversal(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>t;if(t){var r=[];for(r.push(t);r.length>0;){var n=r.shift();r=n.children.concat(r);var i=e?e(n):n;i&&(yield i)}}}*chords(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;yield*O(this,t)}*residues_to_root(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root;for(yield t;t.parent;)t=t.parent,yield t}static CopyIO(t){var e=this,r=A(t,"sequence").set,n=A(t,"sequence").get;return class extends e{get sequence(){return n.call(this)}set sequence(t){r.call(this,t)}}}}var D=Symbol("epimerised_identifier"),F=Symbol("original"),R=new WeakMap;class B extends i.b{constructor(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super(e),this[F]=t,this[D]=e,R.set(this,r)}get identifier(){return this.epimerised?this[D]:this[F].identifier}get epimerised(){return R.get(this)}disable(){R.set(this,!1)}enable(){R.set(this,!0)}get anomer(){return this[F].anomer}get parent_linkage(){return this[F].parent_linkage}set anomer(t){}set parent_linkage(t){}set identifier(t){}clone(){var t=new this.constructor(this[F],this[D],this.epimerised);return t.copyTagsFrom(this),t}}var H=Symbol("reactions"),G=Symbol("reactionset"),U=Object(a.a)("glycanjs:reactionset"),q=Symbol("has_been_epimerised"),V=t=>e=>e.setTag(t,null),z=t=>e=>t.indexOf(e)<0,W=(t,e,r)=>r.indexOf(t)===e,Y=(t,e)=>{if(!t||!e)return!1;if("*"===t.identifier||"*"===e.identifier)return!0;var r=((t,e)=>t.getTag(q)===e.identifier||(e.getTag(q)===t.identifier||t.identifier===e.identifier))(t,e),n=!1;return t.parent&&e.parent&&(n=0===t.parent.linkageOf(t)||0===e.parent.linkageOf(e)||t.parent.linkageOf(t)===e.parent.linkageOf(e)),t.parent||e.parent||(n=!0),r&&n},X=function(t,e){var r=this.delta;return t.map(t=>{var n=T(e,r,t,Y);return n=n.filter((t=>e=>e.root.original===t)(t))}).filter(t=>t.length>0)},$=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[];for(var n of this.positive){var i=Symbol("curr_attachment");n.tagSubstrateResidues(t,i,e);var o=t.composition_for_tag(i);o.forEach(V(i)),r=r.concat(o)}if(r.length<1)return r;for(var s of this.negative){var a=Symbol("curr_attachment");s.tagSubstrateResidues(t,a,e);var c=t.composition_for_tag(a);if(c.forEach(V(a)),(r=r.filter(z(c))).length<1)return r}return r};class Q{constructor(){this[H]=[]}get delta(){return this.positive[0].delta}get positive(){return this[H].filter(t=>!t.negative)}get negative(){return this[H].filter(t=>t.negative)}addReactionRule(t){this[H].push(t)}tagSubstrateResidues(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Symbol("substrate"),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var n of $.call(this,t,r))n.setTag(e);return e}tagAvailableSubstrateResidues(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Symbol("substrate"),r=$.call(this,t),n=X.call(this,r,t);n=(n=[].concat.apply([],n)).map(t=>t.root.original);var i=r.filter(t=>n.indexOf(t)<0);for(var o of i)!o.parent&&o.children.length>0&&o.linkageOf(o.children[0])<0||o.setTag(e);return e}worksOn(t){return $.call(this,t).length>0}execute(){}generate(){}}var K=(t,e,r)=>{if(!(r.length<1)){var n=new Q;for(var i of r){var o=null;e.has(i)?o=e.get(i):((o=new t).sequence=i,e.set(i,o)),n.addReactionRule(o)}return n}};var J=new Map;class Z{constructor(){this[G]=[]}static groupFromJSON(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=new this,i=mt.CopyIO(new e),o=Object.keys(t);for(var s of o=r.filter(t=>o.indexOf(t)>=0).concat(o.filter(t=>r.indexOf(t)<0)))if(t[s].reactions.length>0)for(var a of t[s].reactions.map(K.bind(null,i,J)))a&&n.addReactionSet(a);return n}get reactions(){return this[G]}addReactionSet(t){return this[G].indexOf(t)<0&&this[G].push(t),t}tagSubstrateResidues(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.reactions,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("substrate");for(var n of e)n.tagSubstrateResidues(t,r,null);return r}tagAvailableSubstrateResidues(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.reactions,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("substrate");for(var n of e)n.tagAvailableSubstrateResidues(t,r);return r}supportsLinkageAt(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.reactions;if(!e)return function(t,e){var r=[],n=[],i=[];for(var o of e){var s=t.composition_for_tag(o.tagAvailableSubstrateResidues(t));if(s.length>0)if("continue"===function(){var t=o.delta.root.children[0],e=o.delta.root.linkageOf(t);if(!s.some(t=>void 0===t.childAt(e)))return"continue";var a="Root"!==o.delta.root.identifier?o.delta.sequence:t.toSugar(o.delta.constructor).sequence;r.push(e),i.push(a),n.push(t.anomer)}())continue}return n=n.filter(W),r=r.filter(W),i=i.filter(W),{anomer:n,linkage:r,donor:i,substrate:[]}}(t,i);var o=[],s=[],a=this.reactions.filter(t=>{var r=t.delta.root.children[0];if(!r)return!1;var n=r.toSugar(t.delta.constructor).sequence;t.delta.root.linkageOf(r);return!e||n===e}),c=new WeakMap;a.forEach(e=>{var r=t.composition_for_tag(e.tagAvailableSubstrateResidues(t));if(r.length>0){var n=e.delta.root.children[0],i=e.delta.root.linkageOf(n),a=r.filter(t=>void 0===t.childAt(i));c.set(e,a),a.length>0&&(o.push(i),s.push(n.anomer))}});var l=a.filter(t=>(c.get(t)||[]).length>0),u=l;if(s=s.filter(W),o=o.filter(W),U.info("Remaining reactions after filtering by donor ".concat(a.length)),U.info("Remaining reactions after filtering by used_linakge ".concat(l.length)),l.length<1||void 0===r&&void 0===n){var h=l.map(t=>c.get(t)).flat().filter(W);return l.length>0?{anomer:s,linkage:o,substrate:h}:{anomer:[],linkage:[],substrate:[]}}if(void 0!==r){var d=u.filter(t=>{var e=t.delta.root.children[0],n=t.delta.root.linkageOf(e);return 0===n||n===r});if(u=d,U.info("Remaining reactions after filtering by linkage ".concat(d.length)),d.length<1)return d.length>0?{anomer:s,linkage:[r],substrate:[]}:{anomer:[],linkage:[],substrate:[]}}n&&(o=[],s=[]);var f=[];for(var p of u){if(c.get(p).indexOf(n)>=0){var m=p.delta.root.children[0],g=p.delta.root.linkageOf(m);o.push(g),s.push(m.anomer),f.push(m.anomer+g)}}return s=s.filter(W),(o=o.filter(W)).length>0&&s.length>0&&n?{anomer:s,linkage:o,anomerlinks:f,substrate:[n]}:{anomer:s,linkage:o,substrate:[]}}supportLinkages(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.reactions,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("with_support"),n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=new WeakMap;for(var o of e){i.has(o)||i.set(o,{substrate:Symbol("substrate"),residue:Symbol("residue")});var s=!1;if(o instanceof Q)for(var a of o.positive){var c=a.composition().filter(t=>t instanceof B);c.length>0&&(s=!0,a.delta.root.setTag(q,c[0].identifier)),c.forEach(t=>{t.enable()})}if(o.tagSubstrateResidues(t,i.get(o).substrate,n),o instanceof Q)for(var l of o.positive){l.composition().filter(t=>t instanceof B).forEach(t=>t.disable())}var u=t.composition_for_tag(i.get(o).substrate),h=X.call(o,u,t),d=h.map(t=>{var e=t[0];return e.composition(e.root.children[0]).map(t=>t.original)});if(s)for(var f of h.flat())for(var p of f.composition_for_tag(q))p.original.setTag(q,p.getTag(q));for(var m of[].concat.apply([],d))m.getTag(q)&&s||(m.setTag(i.get(o).residue),m.setTag(r))}return this.map=i,r}}var tt=Symbol("comment_string"),et=Symbol("is_negative"),rt=Symbol("reaction_sugar"),nt=Symbol("reaction_position"),it=Symbol("reaction_position_string"),ot=Symbol("Sequence Cache"),st=t=>class extends t{get sequence(){return super.sequence.replace(/Root/,"")}set sequence(t){super.sequence=t}},at=(Symbol("search_cache"),new Map),ct=function(t,e){var r,n,i=e===ot;e&&(at.has(e)?r=at.get(e):(r=i?new Map:new WeakMap,at.set(e,r)),(n=r.get(i?t.sequence:t))||(n=new Map,r.set(i?t.sequence:t,n)));var o=this.composition().some(t=>t instanceof B),s=this.sequence+this[it],a=(!!n&&n.has(s),n&&n.has(s)?n.get(s):null);a||(a=(t.match_sugar_pattern(this,Y)||[]).map(t=>{var e=t.composition_for_tag(this.attachment_tag)[0];if(e)return e.original}).filter(t=>t),!n||o&&0!=a.length||(i?n.set(s,a.map(e=>t.location_for_monosaccharide(e))):n.set(s,a)));return i&&a[0]&&"string"==typeof a[0]&&(a=a.map(e=>t.locate_monosaccharide(e))),a},lt=function(t,e){var r;r=e?[t.location_for_monosaccharide(e)]:[...ct.call(this,t)].map(e=>t.location_for_monosaccharide(e));var n=new Set;for(var i of r){var s=t.locate_monosaccharide(i),a=this[rt].clone();if("Root"!==a.root.identifier){var c=new B(s,a.root.identifier,!0);if(s instanceof o.a.Monosaccharide&&s.repeat.mode==o.a.MODE_MINIMAL&&!(s.parent instanceof o.a.Monosaccharide)){var l=s.parent,u=s.repeat;for(var h of(s.original.donateChildrenTo(c),u.template.root.parent.replaceChild(s.original,c),u.template.root=c,l.replaceChild(s,u.root),s=c,n.add(c),a.root.children))s.graft(h),[...a.composition(h)].forEach(n.add,n);var d=u.clone();d.children=u.children,u.root.parent.replaceChild(u.root,d.root)}else{for(var f of a.root.children)s.graft(f),[...a.composition(f)].forEach(n.add,n);s.donateChildrenTo(c),c.copyTagsFrom(s),(s=t.locate_monosaccharide(i))!==t.root?s.parent.replaceChild(s,c):(t.root=c,s=c),n.add(c)}}else for(var p of(s instanceof o.a.Monosaccharide&&s.repeat.mode==o.a.MODE_MINIMAL&&(s=s.original),a.root.children))s.graft(p),[...a.composition(p)].forEach(n.add,n)}return[...n]},ut=function(t){var e=[],r=Symbol("attach");for(var n of ct.call(this,t)){var i=this[rt].clone();n.setTag(r,!0);var o=t.clone(),s=o.composition_for_tag(r)[0];for(var a of i.root.children)s.graft(a);n.setTag(r,null),s.setTag(r,null),e.push(o)}return e},ht=function(t,e){var r=this.delta;return t.filter(t=>0==e.trace(r,t,Y).length)};class dt extends L{set comment(t){this[tt]=t,(t=>{var e=t[tt],r=!1;0===e.indexOf("!")&&(e=e.substring(1),r=!0);var[n,i]=e.split("@");n=n.replace(/[{}]/g,"");var o=new(st(L.CopyIO(t)));if(t[et]=r,o.sequence=n,t[rt]=o,t[nt]=((t,e)=>t.locate_monosaccharide(e))(t,i),!t[nt])throw new Error("Cannot locate attachment point");if("Root"!==o.root.identifier){var s=t[nt],a=new B(s,o.root.identifier,!1);s.donateChildrenTo(a),a.copyTagsFrom(s),s.parent?s.parent.replaceChild(s,a):t.root=a,t[nt]=a}t[it]=i,t.attachment_tag=Symbol("attachment"),t[nt].setTag(t.attachment_tag)})(this),this.freeze(),this.delta.freeze()}get comment(){if(!this.delta)return this[tt]}get delta(){return this[rt]}get negative(){return this[et]}tagSubstrateResidues(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Symbol("substrate"),r=ct.call(this,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);if(this.negative){var n=ht.call(this,r,t);r=r.filter(t=>n.indexOf(t)<0)}return r.forEach(t=>t.setTag(e)),e}tagAvailableSubstrateResidues(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Symbol("substrate"),r=ct.call(this,t),n=ht.call(this,r,t);return(r=r.filter(t=>n.indexOf(t)<0)).forEach(t=>t.setTag(e)),e}worksOn(t){var e=ct.call(this,t);return e.length<1?this.negative||!1:!this.negative||ht.call(this,e,t).length>0}execute(t,e){return lt.call(this,t,e)}generate(t){return ut.call(this,t)}}dt.Comparator=Y;var ft,pt,mt=dt,gt=t=>{if(t<0){if(t===i.b.LINKAGES.O)return"O";if(t===i.b.LINKAGES.N)return"N"}return t<=0?"?":""+t},vt=t=>i.b.LINKAGES[t]?i.b.LINKAGES[t]:"?"==t?0:parseInt(t),yt=(t,e)=>new(0,t.constructor.Monosaccharide)(e);ft=(t,e)=>{var r=e.shift();if(!r)throw new Error("Empty branch");var[n,i]=r.split("("),o=yt(t,n);return pt(t,o,e),[o,i]},pt=(t,e,r)=>{for(var n=[],i=(t,e)=>t.addChild(e[0],e[1]);r.length>0;){var o=r.shift();if("]"==o){var[s,a]=ft(t,r),[c,l,,u]=(a||"").split("");s.anomer=c,s.parent_linkage=vt(l),n.push([vt(u),s])}else{if("["==o)return n.reverse().forEach(i.bind(null,e)),void(n.length=0);var[h,d]=o.split("("),[f,p,,m]=(d||"").split(""),g=yt(t,h);g.anomer=f,g.parent_linkage=vt(p),e.addChild(vt(m),g),n.reverse().forEach(i.bind(null,e)),n.length=0,e=g}}};var bt=function(t){return t.split("").reverse().join("")},wt=t=>e=>e.identifier==="Repeat".concat(t),xt=function(t){var e="";[,t,e]=t.match(/([^+]+)(?:\+(".+"))*/),e=(e||"").replace(/^"/,"").replace(/"$/,"");for(var r,n=/{([^}@]+)(?:@([a-z]\d+[a-z]))?}([a-z]|\d+)/g,i=0,s={},a=t;null!==(r=n.exec(t));)a=a.replace(r[0],"Repeat".concat(++i,"(u?-?)")),s[i]={seq:r[1],attachment:r[2],variable:r[3]};(t=a).match(/[\])]$/)&&(t="".concat(t,"Root"));var c=(t+=")").split(/([[\]])/);c=c.map(t=>t.split(/\)(?=[A-Za-z*])/).reverse().join(")")).map(t=>t.match(/\d$/)?t+")":t),c=[].concat.apply([],c.map(t=>bt(t).split(")").filter(t=>t.length).map(bt))).reverse();var l=yt(this,c.shift());return pt(this,l,c),this.root=l,((t,e)=>{var r=t.composition();for(var n of Object.keys(e)){var i=r.filter(wt(n)).shift();if(i){var s=e[n].seq,a=1,c="";e[n].variable.match(/^\d+$/)&&(c=""+(a=parseInt(e[n].variable))),e[n].variable.match(/[a-z]/)&&(c=e[n].variable);var l=new(0,t.constructor);l.sequence=s;var u=e[n].attachment;if(!u){for(var h=l.root;h.children&&h.children.length>0;)h=h.children[0];u=l.location_for_monosaccharide(h)}var d=new o.a(l,u,1,a);d.mode=o.a.MODE_MINIMAL,c&&(d.identifier=c);var f=i.parent;f.removeChild(f.linkageOf(i),i),f.graft(d.root),i.children.length>0&&(d.children=i.children)}}r=t.composition()})(this,s),e&&(this.comment=e),l},_t=t=>{var e=t.toString();if(t instanceof o.a.Monosaccharide){if(t.repeat.mode===o.a.MODE_MINIMAL)return"{".concat(t.repeat.template.sequence.replace(/\([a-z]\d+-$/,""));if(t.repeat.mode===o.a.MODE_EXPAND)return"".concat(e)}return e},Tt=t=>t.parent?"("+t.anomer+gt(t.parent_linkage)+"-":"",Et=function(t){var e=t[0];return t[1].map(t=>[e,t])},Nt=t=>t instanceof o.a.Monosaccharide&&t.repeat.root===t&&t.repeat.mode===o.a.MODE_MINIMAL?(t.repeat.off_main?"@".concat(t.repeat.attachment):"")+"}".concat(t.repeat.identifier):"",St=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root;if(e){var r=[];if(e instanceof o.a.Monosaccharide&&e.repeat.mode===o.a.MODE_MINIMAL&&e.repeat.root===e){var n=e.repeat.children;r=n.length>0?[].concat.apply([],[...n[0].parent.child_linkages].map(t=>{var[r,n]=t;return[r,n.filter(t=>!(t instanceof o.a.Monosaccharide&&t.repeat===e.repeat))]}).sort((t,e)=>t[0]-e[0]).map(Et)):[]}else r=[].concat.apply([],[...e.child_linkages].sort((t,e)=>t[0]-e[0]).map(Et));var i=""+r.map(e=>t.call(this,e[1])+gt(e[0])+")"+Nt(e[1])).reduce((t,e)=>t?t+"["+e+"]":e,""),s=i+_t(e)+Tt(e);return e===this.root&&this.comment?"".concat(s,'+"').concat(this.comment,'"'):s}},Ot=function(t,e){for(var r=null;!(r=Object.getOwnPropertyDescriptor(t,e))&&Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return r},Ct=function(t){var e=(Ot(t.prototype,"sequence")||{get:null}).get,r=function(t){xt.call(this,t)},n={};return e&&(n.get=e),r&&(n.set=r),Object.defineProperty(t.prototype,"sequence",n),class extends t{}},At=function(t){var e=(Ot(t.prototype,"sequence")||{set:null}).set,r=function(){return St.call(this,this.root)},n={};return r&&(n.get=r),e&&(n.set=e),Object.defineProperty(t.prototype,"sequence",n),class extends t{}},Mt=t=>Ct(At((t=>class extends t{})(t)));function kt(t,e,r,n){this._bounds=t,this.children=[],this.nodes=[],n&&(this._maxChildren=n),r&&(this._maxDepth=r),e&&(this._depth=e)}function jt(t,e,r,n){kt.call(this,t,e,r,n),this._stuckChildren=[]}function Pt(t,e,r,n){var i;i=e?new kt(t,0,r,n):new jt(t,0,r,n),this.root=i}kt.prototype.nodes=null,kt.prototype._classConstructor=kt,kt.prototype.children=null,kt.prototype._bounds=null,kt.prototype._depth=0,kt.prototype._maxChildren=4,kt.prototype._maxDepth=4,kt.TOP_LEFT=0,kt.TOP_RIGHT=1,kt.BOTTOM_LEFT=2,kt.BOTTOM_RIGHT=3,kt.prototype.insert=function(t){if(this.nodes.length){var e=this._findIndex(t);this.nodes[e].insert(t)}else{this.children.push(t);var r=this.children.length;if(this._depth<this._maxDepth&&r>this._maxChildren){var n;for(this.subdivide(),n=0;n<r;n++)this.insert(this.children[n]);this.children.length=0}}},kt.prototype.retrieve=function(t){if(this.nodes.length){var e=this._findIndex(t);return this.nodes[e].retrieve(t)}return this.children},kt.prototype._findIndex=function(t){var e=this._bounds,r=!(t.x>e.x+e.width/2),n=!(t.y>e.y+e.height/2),i=kt.TOP_LEFT;return r?n||(i=kt.BOTTOM_LEFT):i=n?kt.TOP_RIGHT:kt.BOTTOM_RIGHT,i},kt.prototype.subdivide=function(){var t=this._depth+1,e=this._bounds.x,r=this._bounds.y,n=this._bounds.width/2,i=this._bounds.height/2,o=e+n,s=r+i;this.nodes[kt.TOP_LEFT]=new this._classConstructor({x:e,y:r,width:n,height:i},t,this._maxDepth,this._maxChildren),this.nodes[kt.TOP_RIGHT]=new this._classConstructor({x:o,y:r,width:n,height:i},t,this._maxDepth,this._maxChildren),this.nodes[kt.BOTTOM_LEFT]=new this._classConstructor({x:e,y:s,width:n,height:i},t,this._maxDepth,this._maxChildren),this.nodes[kt.BOTTOM_RIGHT]=new this._classConstructor({x:o,y:s,width:n,height:i},t,this._maxDepth,this._maxChildren)},kt.prototype.clear=function(){this.children.length=0;var t,e=this.nodes.length;for(t=0;t<e;t++)this.nodes[t].clear();this.nodes.length=0},jt.prototype=new kt,jt.prototype._classConstructor=jt,jt.prototype._stuckChildren=null,jt.prototype._out=[],jt.prototype.insert=function(t){if(this.nodes.length){var e=this._findIndex(t),r=this.nodes[e];t.x>=r._bounds.x&&t.x+t.width<=r._bounds.x+r._bounds.width&&t.y>=r._bounds.y&&t.y+t.height<=r._bounds.y+r._bounds.height?this.nodes[e].insert(t):this._stuckChildren.push(t)}else{this.children.push(t);var n=this.children.length;if(this._depth<this._maxDepth&&n>this._maxChildren){var i;for(this.subdivide(),i=0;i<n;i++)this.insert(this.children[i]);this.children.length=0}}},jt.prototype.getChildren=function(){return this.children.concat(this._stuckChildren)},jt.prototype.retrieve=function(t){var e=this._out;if(e.length=0,this.nodes.length){var r=this._findIndex(t),n=this.nodes[r];t.x>=n._bounds.x&&t.x+t.width<=n._bounds.x+n._bounds.width&&t.y>=n._bounds.y&&t.y+t.height<=n._bounds.y+n._bounds.height?e.push.apply(e,this.nodes[r].retrieve(t)):(t.x<=this.nodes[kt.TOP_RIGHT]._bounds.x&&(t.y<=this.nodes[kt.BOTTOM_LEFT]._bounds.y&&e.push.apply(e,this.nodes[kt.TOP_LEFT].getAllContent()),t.y+t.height>this.nodes[kt.BOTTOM_LEFT]._bounds.y&&e.push.apply(e,this.nodes[kt.BOTTOM_LEFT].getAllContent())),t.x+t.width>this.nodes[kt.TOP_RIGHT]._bounds.x&&(t.y<=this.nodes[kt.BOTTOM_RIGHT]._bounds.y&&e.push.apply(e,this.nodes[kt.TOP_RIGHT].getAllContent()),t.y+t.height>this.nodes[kt.BOTTOM_RIGHT]._bounds.y&&e.push.apply(e,this.nodes[kt.BOTTOM_RIGHT].getAllContent())))}return e.push.apply(e,this._stuckChildren),e.push.apply(e,this.children),e},jt.prototype.getAllContent=function(){var t,e=this._out;if(this.nodes.length)for(t=0;t<this.nodes.length;t++)this.nodes[t].getAllContent();return e.push.apply(e,this._stuckChildren),e.push.apply(e,this.children),e},jt.prototype.clear=function(){this._stuckChildren.length=0,this.children.length=0;var t=this.nodes.length;if(t){var e;for(e=0;e<t;e++)this.nodes[e].clear();this.nodes.length=0}},Pt.prototype.root=null,Pt.prototype.insert=function(t){if(t instanceof Array){var e,r=t.length;for(e=0;e<r;e++)this.root.insert(t[e])}else this.root.insert(t)},Pt.prototype.clear=function(){this.root.clear()},Pt.prototype.retrieve=function(t){return this.root.retrieve(t).slice(0)};var It=Pt,Lt=Object(a.a)("glycanjs:condensedlayout"),Dt=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{dx:0,dy:0,r:.5},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.DELTA_Y,o=this.DELTA_X;if(r.collision=[],e.children.length>1&&!r.spread_count&&(r.spread_count=e.children.length,r.spread=1),!e.parent)return r;if(r.dy=-1*i,r.dx=0,!r.item_index&&n.spread_count){var s=e.parent.children;r.item_index=s.indexOf(e)+1}return n.spread&&(r.dy=-1*n.spread*i,r.dx=n.spread*o*(r.item_index-1-Math.floor(n.spread_count/2)+.5*(1-n.spread_count%2))),(!n.spread||n.spread<2)&&(r.dy+=-1*r.r),n.grid_spread&&(r.dx=o*r.item_index),r},Ft=t=>{var e=t.map(t=>t.position.x),r=Math.min(...e),n=Math.max(...e)-r,i=Math.min(...e),o=Math.max(...e)-i,s=new It({x:r,y:i,width:n,height:o});for(var a of t.map((t,e)=>Object.assign({idx:e},t.position)))a.ignore_overlap||s.insert(a);for(var c=0;c<t.length;c++)if(!t[c].position.ignore_overlap){var l=t[c].position,u=s.retrieve(l);for(var h of u)if(h.idx!==c){var d=t[h.idx].position;if(!(d.collision.indexOf(l)>=0&&l.collision.indexOf(d)>=0)){var f=l.x-d.x,p=l.y-d.y,m=l.r+d.r;f*f+p*p<m*m&&(d.collision.push(l),l.collision.push(d))}}}},Rt=(t,e)=>{return!e.parent&&1==e.children.length&&e.linkageOf(e.children[0])<0?(r=t.get(e),e.identifier,r.x=-1*r.r,r.y=1,r.width=2*r.r,r.height=2*r.r,{position:t.get(e),item:e}):(((t,e)=>{t.x=-1*t.r,t.y=-1*t.r,t.width=2*t.r,t.height=2*t.r,e&&(t.x+=e.x+e.width/2+t.dx,t.y+=e.y+e.height/2+t.dy)})(t.get(e),e.parent?t.get(e.parent):null),Lt.info("Position for",e.identifier,t.get(e).x,t.get(e).y),{position:t.get(e),item:e});var r},Bt=(t,e)=>!t[e],Ht=(t,e)=>t.get(e),Gt=(t,e)=>[...t.residues_to_root(e)],Ut=class{static get DELTA_X(){return this.LINKS,1}static get DELTA_Y(){return this.LINKS?1:.5}static LayoutMonosaccharide(t,e,r,n){return Dt.call(this,t,e,r,n)}static CalculateIdentifier(t){return t.identifier.toLowerCase()}static PerformLayout(t){for(var e=new WeakMap,r=[...t.breadth_first_traversal()],n=20;n>=0;){for(var i of(Lt.info("Looping to resolve overlaps on loop",n--),r)){var o=e.has(i)?e.get(i):void 0,s=i.parent&&e.has(i.parent)?e.get(i.parent):void 0;e.set(i,this.LayoutMonosaccharide(t,i,o,s,e))}var a=r.map(Rt.bind(null,e));Ft(a);var c=a.filter(t=>t.position.collision.length>0).map(t=>t.item),l=new WeakMap;for(var u of c)l.set(e.get(u),u);if(c.length<1){Lt.info("No overlaps to resolve - breaking");break}var h=new WeakMap;for(var d of c){var f=[].concat.apply([],e.get(d).collision.map(Ht.bind(null,l)).map(Gt.bind(null,t)));for(var p of(Lt.info(d.identifier,"collides with",f[0].identifier,"at",e.get(d).x,e.get(d).y,e.get(d).collision.map(t=>[t.x,t.y]),"which is a child of",f.map(t=>t.identifier)),t.residues_to_root(d)))if(p!==d&&(h.has(p)||h.set(p,[]),f.indexOf(p)>=0)){Lt.info("Overlap root of",p.identifier,"for",d.identifier),h.get(p).push(d);break}}var m={};for(var g of[].concat(r).reverse())if(h.has(g)){var v=h.get(g).filter(Bt.bind(null,m));for(var y of v)m[y]=!0;v.length>0&&(e.get(g).spread=(e.get(g).spread||0)+1,Lt.info("Increasing spread for",g.identifier,"to",e.get(g).spread))}}if(Lt.enabled)for(var b of(Lt.info("Done layout for",t.sequence),r))Lt.info("Laid out",b.identifier,e.get(b));return e}};Ut.LINKS=!0;var qt=Ut,Vt=t=>"HSO3"!==t.identifier,zt=["GlcA","IdoA","Xyl","HSO3","Rbo","P","GlcN"];class Wt extends(Mt(L)){}var Yt=new Wt;Yt.sequence="Man(a1-3)[Man(a1-6)]Man(b1-4)GlcNAc(b1-4)GlcNAc";var Xt=(t,e)=>!(!t||!e)&&t.identifier===e.identifier,$t=new WeakMap;var Qt=class extends qt{static CalculateIdentifier(t){var e=t.identifier.toLowerCase(),r=t.parent?t.parent.linkageOf(t):null;r===i.b.LINKAGES.N&&(r="N"),r===i.b.LINKAGES.O&&(r="O");var n=t.parent&&"hso3"===e&&r?"."+r:"";return"".concat(e).concat(n)}static get DELTA_X(){return 1.25*super.DELTA_X}static get DELTA_Y(){return 1.25*super.DELTA_Y}static LayoutMonosaccharide(t,e,r,n,s){var a=this.DELTA_Y,c=this.DELTA_X;if(r=qt.LayoutMonosaccharide.call(this,t,e,r,n),zt.indexOf(e.identifier)>=0&&(r.keep_horizontal=!0),!$t.get(r)&&!this.LINKS&&!r.ignore_overlap){var l=t.match_sugar_pattern(Yt,Xt);$t.set(r,!0),l.length>0&&l[0].composition().map(t=>t.original).indexOf(e)>=0&&(this.LINKS||(r.ignore_overlap=!0))}var u=e.siblings;if(1==u.filter(Vt).length&&("Fuc"==e.identifier||"NeuAc"==e.identifier)||e.parent&&e.parent.endsRepeatUnit&&e.parent.repeat.mode==o.a.MODE_MINIMAL&&"Fuc"==e.identifier)return"NeuAc"==e.identifier&&"Fuc"==u.filter(Vt)[0].identifier?(r.dx=0,r.dy=-1*a,r.dy-=r.r,r):(r.dy=0,r.dx=[2,3].indexOf(e.parent.linkageOf(e))>=0?-1*c:c,"Fuc"==e.identifier?(r.rotate=r.dx<0?90:-90,r.ignore_overlap=!0,r):(this.LINKS&&(r.dx+=(r.dx<0?-1:1)*c/4),r));if("PI"===e.identifier&&(r.r=.75),"GlcN"===e.identifier&&"PI"===e.parent.identifier)return r.dx=.5*c,r;if("EtNP"===e.identifier){var h=e.parent.linkageOf(e);2===h&&(r.dy=0,r.dx=-.66*c,r.rotate=-90),6===h&&1===e.parent.children.length&&(r.dy=-1.25*a,r.dx=0),6===h&&e.parent.children.length>1&&(r.dx=.66*c,r.dy=0,r.rotate=90),r.ignore_overlap=!0}if("HSO3"===e.identifier){var d=5/4*c,f=this.LINKS?a/2:a;r.r=1/4*c;var p=e.parent.linkageOf(e);return 2!==p&&6!==p&&p!==i.b.LINKAGES.N||(r.dy=.5*f,r.dx=.5*d,2!==p&&p!==i.b.LINKAGES.N||(r.dx*=-1)),3!==p&&4!==p||(r.dy=-.5*f,r.dx=.5*d,3===p&&(r.dx*=-1)),r.ignore_overlap=!0,r}if(1==u.length&&"P"===e.identifier)return r.dy=0,r.dx=e.parent.linkageOf(e)>=0?c:-1*c,this.LINKS&&(r.dx+=(r.dx<0?-1:1)*c/4),r;if(1==u.length&&"GlcNAc"===e.identifier&&"GlcNAc"==u[0].identifier)return 3===e.parent.linkageOf(e)&&(r.dx=0),r;if(0==u.filter(Vt).filter(t=>["Fuc","NeuAc"].indexOf(t.identifier)<0).length&&u.filter(Vt).filter(t=>["Fuc","NeuAc"].indexOf(t.identifier)>=0).length<=1&&(r.dx=0),1===u.length&&["P","HSO3","EtNP"].indexOf(u[0].identifier)>=0&&(r.dx=0),2===u.length&&[e].concat(u).map(t=>t.identifier).indexOf("Fuc")>=0&&[e].concat(u).map(t=>t.identifier).indexOf("HSO3")>=0&&["Fuc"].indexOf(e.identifier)>=0)return r.dy=0,r.dx=e.parent.linkageOf(e)>=4?c:-1*c,"Fuc"==e.identifier&&(r.rotate=r.dx<0?90:-90,r.ignore_overlap=!0),this.LINKS&&(r.dx+=(r.dx<0?-1:1)*c/4),r;if("Man"===e.identifier&&e.siblings.length>0){var m=e.siblings.map(t=>s.get(t)).filter(t=>t).map(t=>t.spread).filter(t=>t);r.spread&&m.push(r.spread);var g=Math.max(...m);if(isFinite(g)){for(var v of e.siblings)v.children.length>0&&s.get(v)&&(s.get(v).spread=g);r.spread=g}}return r}};class Kt extends(Mt(L)){}var Jt=(t,e)=>!(!t||!e)&&t.identifier===e.identifier,Zt=new Kt;Zt.sequence="Man(a1-3)[Man(a1-6)]Man(b1-4)GlcNAc(b1-4)GlcNAc";var te=new Kt;te.sequence="Gal(b1-3)GalNAc";var ee,re,ne=class extends Qt{static LayoutMonosaccharide(t,e,r,n,o){var s=2*this.DELTA_Y,a=this.DELTA_X;if(r=Qt.LayoutMonosaccharide.call(this,t,e,r,n,o),!e.parent)return r;if("HSO3"===e.identifier){var c=5/4*a,l=.5*(this.LINKS?s/2:s);r.r=1/4*a;var u=e.parent.linkageOf(e);return 2!==u&&6!==u&&u!==i.b.LINKAGES.N||(r.dy=.5*l,r.dx=.5*c,2!==u&&u!==i.b.LINKAGES.N||(r.dx*=-1)),3!==u&&4!==u||(r.dy=-.5*l,r.dx=.5*c,3===u&&(r.dx*=-1)),r.ignore_overlap=!0,r}var h=t.match_sugar_pattern(Zt,Jt);if(h.length>0&&h[0].composition().map(t=>t.original).indexOf(e)>=0)return this.LINKS||(r.ignore_overlap=!0,"Man"==e.identifier&&"Man"==e.parent.identifier&&(r.dx=.25*r.dx,r.dy=.225*r.dy)),r;if((h=t.match_sugar_pattern(te,Jt)).length>0){0;var d=h[0].composition().map(t=>t.original);if(d[0]&&d[0].parent&&["Ser","Thr","Tyr"].indexOf(d[0].parent.identifier)<0);else{if(d.indexOf(e)>=0)return r;if(e.siblings.filter(t=>d.indexOf(t)>=0).length>0)return r}}var f=e.parent.linkageOf(e),p="Fuc"===e.identifier;switch(f){case 0:r.dx=0,r.dy=-1*s;break;case 2:r.dx=-1*a*(n.spread||1),r.dy=0,p&&(r.rotate=90);break;case 3:r.dx=-1*a,r.dy=-1*s,p&&(r.rotate=0);break;case 4:r.dx=0,r.dy=-1*s,p&&(r.rotate=180);break;case 6:r.dx=1*a,r.dy=-1*s,p&&(r.rotate=this.LINKS?206:225);break;case 8:r.dx=1*a,r.dy=0}return r}},ie=Object(a.a)("glycanjs:fisheyelayout"),oe=3,se=[-100,-3],ae=!0;function ce(){ee=(ee=Math.exp(oe))/(ee-1)*2,re=oe/2}function le(t){var e=t.x-se[0],r=t.y-se[1],n=Math.sqrt(e*e+r*r);if(!n||n>=2)return{x:t.x,y:t.y,z:n>=2?1:10};var i=ee*(1-Math.exp(-n*re))/n*.75+.25;return{x:se[0]+e*i,y:se[1]+r*i,z:Math.min(i,10)}}ce();var ue=t=>class extends t{static get focus(){return[].concat(se)}static set focus(t){se[0]=t[0],se[1]=t[1],ce()}static get zoom(){return oe}static set zoom(t){oe=t,ce()}static get lock_residues(){return ae}static set lock_residues(t){ae=t}static PerformLayout(e){ie("Performing FishEyeLayout");var r=t.PerformLayout.call(this,e);for(var n of e.composition()){var i=r.get(n),[o,s,a,c]=[i.x,i.y,i.width,i.height],l=le({x:o+a/2,y:s+c/2}),u=le({x:o+a/2,y:s+c}),h=le({x:o+a,y:s+c/2}),d=Math.max(2*(u.y-l.y),2*(h.x-l.x));ae?(i.x=i.x-(d-a)/2,i.y=i.y-(d-c)/2):(i.x=l.x-d/2,i.y=l.y-d/2),i.z=l.z,i.width=d,i.height=d}return r}},he=ue(Qt),de=r(14),fe=r(16),pe=r(8),me=Symbol("C"),ge=Symbol("H"),ve=Symbol("O"),ye=Symbol("N"),be=Symbol("P"),we=Symbol("S"),xe=new Map;xe.set(me,12),xe.set(ge,1.007825035),xe.set(ve,15.99491463),xe.set(ye,14.003074);var _e=t=>{var e=[];for(var r of t.split(";")){var[n,i]=r.split(":");switch(i=parseInt(i),n){case"C":n=me;break;case"H":n=ge;break;case"O":n=ve;break;case"N":n=ye;break;case"P":n=be;break;case"S":n=we}e=e.concat(Array(i).fill(n))}return e},Te=(()=>{var t={};for(var e of"\nterminii:r1:x;2:x;3:x;4:x\nname:P\ntype:ion\ncomposition:P:1;H:2;O:3\n\nterminii:r1:x;2:x;3:x;4:x\nname:S\ntype:ion\ncomposition:S:1;H:1;O:3\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4ax:OH;5eq:-;6eq:OH\nname:Gal\ntype:Hex\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4eq:OH;5eq:-;6eq:OH\nname:Hex\ncomposition:C:6;H:10;O:5\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4eq:OH;5eq:-;6eq:OH\nname:Glc\ntype:Hex\n\nterminii:r1:HOH;2eq:NAc;3eq:OH;4ax:OH;5eq:-;6eq:OH\nname:GalNAc\ntype:HexNAc\n\nterminii:r1:HOH;2eq:NAc;3eq:OH;4eq:OH;5eq:-;6eq:OH\nname:HexNAc\ncomposition:C:8;H:13;N:1;O:5\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4ax:OH;5eq:-;6eq:OH\nname:HexA\ncomposition:C:6;H:8;O:6\n\nterminii:r1:HOH;2eq:NAc;3eq:OH;4eq:OH;5eq:-;6eq:OH\nname:GlcNAc\ntype:HexNAc\n\nterminii:r2:HOH;1ax:COOH;3ax:H;4eq:OH;5eq:NHAc;6eq:-;7:OH;8:OH;9:OH\nname:NeuAc\ntype:NeuAc\ncomposition:C:11;H:17;N:1;O:8\n\nterminii:r2:HOH;1ax:COOH;3ax:H;4eq:OH;5eq:NHGc;6eq:-;7:OH;8:OH;9:OH\nname:NeuGc\ntype:NeuGc\ncomposition:C:11;H:17;N:1;O:9\n\nterminii:r1:HOH;2eq:OH;3ax:OH;4eq:OH;5eq:-;6eq:OH\nname:Man\ntype:Hex\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4ax:OH;5eq:-;6eq:OH\nname:Galf\ntype:Hex\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4ax:OH;5eq:-;6eq:OH\nname:GlcA\ntype:HexA\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4ax:OH;5eq:-;6eq:OH\nname:IdoA\ntype:HexA\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4ax:OH;5eq:-;6eq:OH\nname:Fuc\ntype:dHex\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4ax:OH;5eq:-;6eq:OH\nname:Rha\ntype:dHex\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4ax:OH;5eq:-;6eq:OH\nname:dHex\ncomposition:C:6;H:10;O:4\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4ax:-;5eq:OH\nname:Pent\ncomposition:C:5;H:8;O:4\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4ax:-;5eq:OH\nname:Xyl\ntype:Pent\n\nterminii:r1:HOH;2eq:OH;3eq:OH;4ax:-;5eq:OH\nname:Ara\ntype:Pent\n\nterminii:r1:H\nname:Me\ntype:alkyl\ncomposition:C:1;H:3\n".replace(/^\n/,"").split("\n\n")){var r={};for(var n of e.split("\n")){var[i,o]=n.split(/^([^:]+):/).slice(1);switch(i){case"name":r.name=o;break;case"terminii":break;case"type":r.type=o;break;case"composition":r.composition=_e(o)}}t[r.name]=r}return t})(),Ee=t=>{var e=Te[t];return e&&e.type&&(e=Te[e.type]),e?e.composition.map(t=>xe.get(t)).reduce((t,e)=>t+e,0):0},Ne=t=>{class e extends t.Monosaccharide{get mass(){return Ee(this.identifier)}get proto(){return(Te[this.identifier]||{}).type}}return class extends t{static get Monosaccharide(){return e}get mass(){return 2*xe.get(ge)+xe.get(ve)+this.composition().map(t=>t.mass).reduce((t,e)=>t+e,0)}}},Se=xe.get(me),Oe=xe.get(ge),Ce=xe.get(ve),Ae=(t,e,r)=>t<=r&&0===e||(t<=e||t>r)&&0!==e,Me={MONOISOTOPICMASS:0,AVERAGEMASS:1},ke={Hex:{"0,2":[120.0422584,120.10512,162.0892084,162.18576],"1,3":[60.0211292,60.05256,88.0524292,88.10632],"2,4":[60.0211292,60.05256,88.0524292,88.10632],"1,5":[134.0579084,134.132,190.1205084,190.23952],"3,5":[74.0367792,74.07944,102.0680792,102.1332],"0,4":[60.0211292,60.05256,74.0367792,74.07944],"3,4":[30.0105646,30.02628,44.0262146,44.05316]},HexNAc:{"0,2":[120.0422584,120.10512,162.0892084,162.18576],"1,3":[101.0476782,101.10512,129.0789782,129.15888],"2,4":[60.0211292,60.05256,88.0524292,88.10632],"1,5":[175.0844574,175.18456,231.1470574,231.29208],"3,5":[74.0367792,74.07944,102.0680792,102.1332],"0,4":[60.0211292,60.05256,74.0367792,74.07944],"3,4":[30.0105646,30.02628,44.0262146,44.05316]},Pent:{"0,2":[90.0316938,90.07884,118.0629938,118.1326],"1,3":[60.0211292,60.05256,88.0524292,88.10632],"2,4":[60.0211292,60.05256,88.0524292,88.10632],"1,5":[104.0473438,104.10572,146.0942938,146.18636],"3,5":[44.0262146,44.05316,58.0418646,58.08004],"0,4":[30.0105646,30.02628,30.0105646,30.02628],"3,4":[30.0105646,30.02628,44.0262146,44.05316]},dHex:{"0,2":[104.0473438,104.10572,132.0786438,132.15948],"1,3":[60.0211292,60.05256,88.0524292,88.10632],"2,4":[60.0211292,60.05256,88.0524292,88.10632],"1,5":[118.0629938,118.1326,160.1099438,160.21324],"3,5":[58.0418646,58.08004,72.0575146,72.10692],"0,4":[44.0262146,44.05316,44.0262146,44.05316],"3,4":[30.0105646,30.02628,44.0262146,44.05316]},HexA:{"0,2":[134.021523,134.08864,176.068473,176.16928],"1,3":[60.0211292,60.05256,88.0524292,88.10632],"2,4":[60.0211292,60.05256,88.0524292,88.10632],"1,5":[148.037173,148.11552,204.099773,204.22304],"3,5":[88.0160438,88.06296,116.0473438,116.11672],"0,4":[74.0003938,74.03608,88.0160438,88.06296],"3,4":[30.0105646,30.02628,44.0262146,44.05316]},NeuAc:{"0,2":[221.0899366,221.21024,305.1838366,305.37152],"1,3":[44.0262146,44.05316,58.0418646,58.08004],"2,4":[101.0476782,101.10512,143.0946282,143.18576],"1,5":[219.110672,219.23772,303.204572,303.399],"3,5":[163.0844574,163.17356,233.1627074,233.30796],"0,4":[120.0422584,120.10512,162.0892084,162.18576],"3,4":[59.0371136,59.06784,87.0684136,87.1216]},NeuGc:{"0,2":[237.0848512,237.20964,307.1631012,307.34404],"1,3":[44.0262146,44.05316,58.0418646,58.08004],"2,4":[117.0425928,117.10452,145.0738928,145.15828],"1,5":[235.1055866,235.23712,305.1838366,305.37152],"3,5":[179.079372,179.17296,235.141972,235.28048],"0,4":[120.0422584,120.10512,162.0892084,162.18576],"3,4":[75.0320282,75.06724,89.0476782,89.09412]}},je=t=>{var e=t.substring(5),r=t.substring(0,5),n=r;switch(r){case"1,1-e":n="1,5-a";break;case"2,2-e":n="0,2-a";break;case"3,3-e":n="3,5-a";break;case"4,4-e":case"5,5-e":n="0,4-a";break;case"1,3-e":n="1,3-a";break;case"2,4-e":n="2,4-a";break;case"3,5-e":n="3,4-a";break;case"1,1-w":n="1,5-x";break;case"2,2-w":n="0,2-x";break;case"3,3-w":n="3,5-x";break;case"4,4-w":case"5,5-w":n="0,4-x"}return"".concat(n).concat(e)};class Pe extends s.a{get children(){var t=super.children;return((t,e)=>{var r=e;if(t){t.match(/^[bc]/);var n=t.match(/(\d),(\d)-([ax])/);if(n){var i=parseInt(n[1]),o=parseInt(n[2]),s="x"===n[3];r=r.filter(t=>{var e=t.parent.linkageOf(t),r=Ae(e>5?5:e,i,o);return s?r:!r})}}return r=r.filter(t=>!(t.type||"").match(/^[yz]/))})(this.type,t)}get parent(){if(!(this.type||"").match(/(^[bc]|-a)/))return super.parent}get mass(){var t,e=0;if(this.type&&(t=this.type.match(/(\d,\d)-([ax])/))){var r=t[1],n=t[2],i=this.original.proto;if(i&&(e=ke[i][r][Me.MONOISOTOPICMASS]),"a"===n)return e}return this.original.mass-e}}var Ie=t=>class extends t{constructor(){super(),this.base_composition=[]}static get Monosaccharide(){return Pe}get chord(){return this.chordResidues}set chord(t){this.base_root||(this.base_root=this.root,this.base_composition=this.composition()),this.root=this.base_root;var e=this.base_composition.filter(e=>t.chord.indexOf(e.original)>=0);this.chordResidues=t.chord.map(t=>e.filter(e=>e.original===t)[0]),this.root=t.root===this.root.original?this.root:e.filter(e=>e.original===t.root)[0]}set type(t){for(var e of this.base_composition)e.type=null;if(t){for(var r=t.split("/"),n=0;n<r.length;n++)r[n].match(/-[ew]/)&&(r[n]=je(r[n])),this.chordResidues[n].type=r[n];this.typestring=t}}get type(){return this.typestring}get mass(){var t,e=this.composition().map(t=>t.mass).reduce((t,e)=>t+e),r=Oe,n=e;for(var i of this.type.split("/"))i.match(/^y/)&&(n+=Oe),i.match(/^b/)&&(n+=r-Oe),i.match(/^z/)&&(n+=0-Ce-Oe),i.match(/^c/)&&(n+=Ce+Oe+r),i.match(/^\d,\d-[xw]/)&&(n+=r);switch(t=(t=this.type.match(/(\d,\d-[ew])/))?t[1]:null){case"1,1-e":case"3,3-e":n+=0+Ce;break;case"5,5-e":n+=0-Ce-2*Oe-Se;break;case"3,5-e":n+=0+2*Oe+Se;break;case"1,1-w":n+=0-2*Oe-Ce;break;case"2,2-w":n+=0-2*Oe;break;case"3,3-w":n+=0-2*Oe-Ce;break;case"4,4-w":n+=0-2*Oe;break;case"5,5-w":n+=0+Ce+Se+Oe}return(this.type.match(/^[yz]/)||this.type.match(/^\d,\d-[xw]/))&&(n+=Ce+r),n+=-1*(this.type.split("/").length-1)*r}},Le=(t,e,r,n)=>{var[i,o]=t[n].split("");return i=parseInt(i),r.match(/(^[bc]|-a|-e)/)&&(i=1+e-i),r.match(/(^[yz]|-x|-w)/)&&(i-=1),r+i+o},De=(t,e)=>e.root===t.root&&e.chord[0]!==t.root,Fe=(t,e)=>[].concat(...t.map(t=>e.map(e=>[].concat(t,e)))),Re=function t(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return r?t(Fe(e,r),...i):e},Be=["y","z","3,5-x","1,3-x","1,5-x","2,4-x","0,2-x","0,4-x"],He=["b","c","3,5-a","1,3-a","1,5-a","2,4-a","0,2-a","0,4-a"],Ge=(t,e)=>e.type.match(/^[yz]/)?t.indexOf(e.parent)<0||!((t,e)=>{if(!e)return!0;if(e.match(/^[bc]/))return!0;var r=e.match(/(\d),(\d)-([ax])/);if(r){var n=parseInt(r[1]),i=parseInt(r[2]),o="x"===r[3],s=Ae(t>5?5:t,n,i);return o?s:!s}})(e.parent.linkageOf(e),e.parent.type):t.indexOf(e)<0;var Ue=class{static*fragment(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!t.mass)throw new Error("Sugar object class does not derive from Mass class");var r=t.constructor,n=Ie(r),i=Object(s.c)(t,n),o=Math.max(...t.leaves().map(t=>t.depth)),a=(t,e)=>t.location_for_monosaccharide(e).substring(1);for(var c of t.chords(e)){var l=[];De(t,c)?l.push(Be):l.push(He);var u=l.concat(new Array(c.chord.length-1).fill(Be));c.chord.indexOf(t.root)>=0&&(De(t,c)?u[c.chord.indexOf(t.root)]=u[c.chord.indexOf(t.root)].concat(["1,1-w","2,2-w","3,3-w","4,4-w","5,5-w"]):u[c.chord.indexOf(t.root)]=u[c.chord.indexOf(t.root)].concat(["1,1-e","2,2-e","3,3-e","4,4-e","5,5-e","3,5-e","1,3-e","2,4-e"]));var h=Re.apply(null,u),d=c.chord.map(a.bind(null,t)),f=Le.bind(null,d,o);for(var p of h)if(Array.isArray(p)||(p=[p]),!p[0].match(/^[bc]/)||c.root!==t.root){var m=i.clone();m.type=null,m.chord=c,m.type=p.map(f).join("/");var g=m.composition();m.chordResidues.some(Ge.bind(null,g))||(yield m)}}for(var v of["3,5-x","1,3-x","1,5-x","2,4-x","0,2-x","0,4-x","1,1-w","2,2-w","3,3-w","4,4-w","5,5-w"]){var y=i.clone();y.type=null,y.chord={root:t.root,chord:[t.root]},y.type=v+"0a",yield y}}},qe=he,Ve=ue(Qt),ze=ue(ne)},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n=r(10)},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var c,l=[],u=!1,h=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!u){var t=a(d);u=!0;for(var e=l.length;e;){for(c=l,l=[];++h<e;)c&&c[h].run();h=-1,e=l.length}c=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new p(t,e)),1!==l.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return l})),r.d(e,"a",(function(){return s}));var n=r(3),i=r(0),o=Object(n.a)("glycanjs:tracing");class s extends i.b{constructor(t){return super(t.identifier),this.original=t,this}get anomer(){return this.original.anomer}get parent_linkage(){return this.original.parent_linkage}get identifier(){return this.original.identifier}set anomer(t){}set parent_linkage(t){}set identifier(t){}linkageOf(t){return this.original.linkageOf(t.original)}clone(){var t=new this.constructor(this.original);return t.original=this.original,t.copyTagsFrom(this),t}}var a=(t,e,r,n,i)=>{var o=function(t,e,r){var n=t.clone();e=n.composition().filter(t=>t.original===e.original)[0];var i=new t.constructor.Monosaccharide(r);return e.addChild(e.original.linkageOf(r),i),{sugar:n,child:i}}(t,e,i);return o.child.copyTagsFrom(n),r.push(i),o.sugar},c=(t,e)=>t.composition().filter(t=>e.indexOf(t.original)>=0),l=function(t,e){var r=new Map,n=new e;for(var i of(n.root=new e.Monosaccharide(t.root),r.set(t.root,n.root),t.breadth_first_traversal()))if(i!==t.root){var o=new e.Monosaccharide(i);o=Object.assign(o,i),r.set(i,o),r.get(i.parent).addChild(i.parent.linkageOf(i),o)}return n};class u{static trace(t,e,r,n){var i=t.constructor;return function(t,e,r,n,i){var s=new WeakMap,l=[],u=new WeakMap;o.info("Tracing",n.sequence,"onto",e.sequence,"moving cursor over template");var h=[...n.breadth_first_traversal(n.root,e=>{if(o.info("Template cursor is positioned at",e.identifier),u=new WeakMap,!e.parent)return o.info("The cursor is at the root - the search sugar is at",r.identifier),l.push((n=new t,h=r,d=n.constructor.Monosaccharide,n.root=new d(h),n)),s.set(e,[l[0].composition()[0].original]),l[0].composition()[0].copyTagsFrom(e),o.info("Done with this cursor",e.identifier),l.length>0;var n,h,d;s.set(e,[]),o.info("Residues in the search tree that correspond to the cursor parent are",s.get(e.parent).map(t=>t.identifier));var f=e.parent.linkageOf(e);l=l.filter(t=>c(t,s.get(e.parent)).length>0),o.info("Current sets of sugars are",l);var p=l.map(t=>{var r=c(t,s.get(e.parent));if(r.length>1)throw new Error("Tracing mapped a template residue to more than one residue in the search sugar");return u.set(r[0],t),r[0]});for(var m of(l=[],o.info("We need to find children of the attachment points linked via a",f,"linkage"),p)){var g=m.original;o.info("Attachment point is a wrapped residue with identifier",g.identifier);var v=0==f?g.children:g.child_linkages.get(f);o.info("We want to find a match for the cursor from within",(v||[]).length,"possible child residues");var y=[].concat(v).filter(i.bind(null,e)).filter(t=>t);if(y.length>=1){var b=a.bind(null,u.get(m),m,s.get(e),e);o.info("Valid children in search sugar are",y.map(t=>t.identifier));var w=y.map(b);l=l.concat(w)}}return l.length>0})];return o.info("We mapped",h.length,"out of",n.composition().length,"residues"),o.info(l.map(t=>t.sequence)),l}(class extends i{static get Monosaccharide(){return s}},t,e,r,n)}}},function(t,e,r){(function(t,r){!function(e){"use strict";function n(t){var e=d.indexOf(t);-1<e&&d.splice(e,1),d.push(t),v=0,p&&!f&&(a=g(x),f=!0)}function i(t){for(var e=0;e<d.length;e++)if(t===d[e])return d[e];return null}function o(){return f}function s(){return b}var a,c="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:this||(void 0!==e?e:{}),l=c.requestAnimationFrame||function(t){return c.setTimeout(t,50/3)},u=c.cancelAnimationFrame||function(t){return c.clearTimeout(t)},h=function(){if(void 0===r||void 0===r.hrtime||r.versions&&void 0!==r.versions.electron){if(void 0!==c.performance&&void 0!==c.performance.now)return c.performance.now.bind(c.performance);var t=c.performance&&c.performance.timing&&c.performance.timing.navigationStart?c.performance.timing.navigationStart:Date.now();return function(){return Date.now()-t}}return function(){var t=r.hrtime();return 1e3*t[0]+t[1]/1e6}}(),d=[],f=!1,p=!1,m=[],g=l,v=0,y=120,b=!0,w=function(t){var e=d.indexOf(t);-1!==e&&d.splice(e,1),0===d.length&&(u(a),f=!1)},x=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:h(),r=1<arguments.length?arguments[1]:void 0;if(y<=v&&b)return f=!1,v=0,u(a),!1;p&&f?a=g(t):function(){for(var t=0;t<m.length;t++)m[t]()}(),d.length||v++;for(var n=0,i=d.length;n<i;)d[n++].update(e,r),i>d.length&&n--,i=d.length;return!0},_={},T={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return Math.pow(t,2)},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*Math.pow(t,2):-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return Math.pow(t,3)},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*Math.pow(t,3):.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return Math.pow(t,4)},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*Math.pow(t,4):-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return Math.pow(t,5)},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*Math.pow(t,5):.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((1+e)*t-e)*.5:.5*((t-=2)*t*((1+e)*t+e)+2)}},Bounce:{In:function(t){return 1-T.Bounce.Out(1-t)},Out:function(t){var e=2.75,r=7.5625;return t<1/e?r*t*t:t<2/e?r*(t-=1.5/e)*t+.75:t<2.5/e?r*(t-=2.25/e)*t+.9375:r*(t-=2.625/e)*t+.984375},InOut:function(t){return t<.5?.5*T.Bounce.In(2*t):.5*T.Bounce.Out(2*t-1)+.5}},Stepped:{steps:function(t){return function(e){return(e*t|0)/t}}}};function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function O(t,e,r){return e&&S(t.prototype,e),r&&S(t,r),t}function C(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?C(Object(r),!0).forEach((function(e){var n,i,o;n=t,o=r[i=e],i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function P(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?j(t):e}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return r}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var L=50/3,D="_chainedTweens",F="Callback",R="update",B="complete",H="start",G="repeat",U="reverse",q="restart",V="STRING_PROP",z=/\s+|([A-Za-z?().,{}:""[\]#%]+)|([-+]=+)?([-+]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]=?\d+)?/g;function W(t){if(t&&t.nodeType||void 0===t||"object"!==E(t))return t;if(Array.isArray(t))return[].concat(t);if("object"!==E(t))return t;var e={};for(var r in t)e[r]=W(t[r]);return e}var Y=/^#([0-9a-f]{6}|[0-9a-f]{3})$/gi,X=function(t,e){var r,n,i;3===e.length&&(e=(r=e[0])+r+(n=e[1])+n+(i=e[2])+i);var o=parseInt(e,16);return"rgb("+(r=o>>16&255)+", "+(n=o>>8&255)+", "+(i=255&o)+")"};function $(t){if(t&&t.splice&&t.isString)return t;if("string"!=typeof t)return t;if("="===t.charAt(1))return t;var e=t.replace(Y,X).match(z).map((function(t){return function(t){return isNaN(+t)||("+"===t[0]||"-"===t[0])&&"="===t[1]||""===t||" "===t}(t)?t:+t}));return e.isString=!0,e}function Q(t,e,r,n){var i=r[t],o=n[t];if(i===o)return!0;if(Array.isArray(i)&&Array.isArray(o)&&i.length===o.length)for(var s=0,a=o.length;s<a;s++){var c=i[s],l=o[s];c===l||"number"==typeof c&&"number"==typeof l||Q(s,e[t],i,o)}if(!("number"==typeof i&&"number"==typeof o||i&&i.splice&&i.isString&&o&&o.splice&&o.isString)){if("string"==typeof i&&Array.isArray(o)){var u=$(i),h=o.map($);return r[t]=u,n[t]=h,!0}if("string"==typeof i||"string"==typeof o){var d=Array.isArray(i)&&i[0]===V?i:$(i),f=Array.isArray(o)&&o[0]===V?o:$(o);if(void 0===d)return;for(var p=1;p<d.length;)d[p]===f[p]&&"string"==typeof d[p-1]?(d.splice(p-1,2,d[p-1]+d[p]),f.splice(p-1,2,f[p-1]+f[p])):p++;return d[p=0]===V&&d.shift(),f[0]===V&&f.shift(),r[t]=d,n[t]=f,!0}if("object"===E(i)&&"object"===E(o)){if(Array.isArray(i)&&!i.isString)return i.map((function(r,n){return Q(n,e[t],i,o)}));for(var m in o)Q(m,e[t],i,o);return!0}}return!1}var K="rgba(",J=function(t,e,r){var n=2<arguments.length&&void 0!==r?r:"rgb(";return"number"==typeof t[e]&&(t[e-1]===n||t[e-3]===n||t[e-5]===n)};function Z(t,e,r,n,i,o,s){var a=s?r:r[t],c=s?n:n[t];if(void 0===c)return a;if(void 0===a||"string"==typeof a||a===c)return c;if("object"===E(a)&&"object"===E(c)){if(!a||!c)return e[t];if("object"===E(a)&&a&&a.isString&&c&&c.splice&&c.isString){for(var l="",u=0,h=a.length;u<h;u++)if(a[u]!==c[u]||"number"!=typeof a[u]||"number"==typeof c[u]){var d="number"==typeof a[u]&&"string"==typeof c[u]&&"="===c[u][1],f="number"!=typeof a[u]?a[u]:d?a[u]+parseFloat(c[u][0]+c[u].substr(2))*i:a[u]+(c[u]-a[u])*i;(J(a,u)||J(a,u,K))&&(f|=0),l+=f,d&&1===o&&(a[u]=a[u]+parseFloat(c[u][0]+c[u].substr(2)))}else l+=a[u];return s||(e[t]=l),l}if(Array.isArray(a)&&a[0]!==V)for(var p=0,m=a.length;p<m;p++)a[p]!==c[p]&&"string"!=typeof e[t]&&Z(p,e[t],a,c,i,o);else if("object"===E(a)&&a&&!a.isString)for(var g in a)a[g]!==c[g]&&Z(g,e[t],a,c,i,o)}else if("number"==typeof a){var v="string"==typeof c;e[t]=v?a+parseFloat(c[0]+c.substr(2))*i:a+(c-a)*i,v&&1===o&&(r[t]=e[t])}else"function"==typeof c&&(e[t]=c(i));return e[t]}function tt(t,e){var r=t[e],n=e.replace(it,"").split(nt),i=n.length-1,o=Array.isArray(t),s="object"===E(t)&&!o;return s?(t[e]=null,delete t[e]):o&&t.splice(e,1),n.reduce((function(t,e,a){o&&"."!==e&&"["!==e&&(e*=1);var c="["===n[a+1];if("."===e||"["===e)return"."===e?o=!(s=!0):"["===e&&(o=!(s=!1)),t;if(void 0===t[e]){if(o||s)return t[e]=a===i?r:o||c?[]:s?{}:null,s=o=!1,t[e]}else if(void 0!==t[e])return a===i&&(t[e]=r),t[e];return t}),t)}function et(t){if("object"===E(t)&&t)for(var e in t)if(-1!==e.indexOf(".")||-1!==e.indexOf("["))tt(t,e);else if("object"===E(t[e])&&t[e]){var r=t[e];for(var n in r)if(-1!==n.indexOf(".")||-1!==n.indexOf("["))tt(r,n);else if("object"===E(r[n])&&r[n]){var i=r[n];for(var o in i)-1===o.indexOf(".")&&-1===o.indexOf("[")||tt(i,o)}}return t}var rt,nt=/([.[])/g,it=/\]/g,ot=Object.freeze({__proto__:null,FRAME_MS:L,TOO_LONG_FRAME_MS:250,CHAINED_TWEENS:D,EVENT_CALLBACK:F,EVENT_UPDATE:R,EVENT_COMPLETE:B,EVENT_START:H,EVENT_REPEAT:G,EVENT_REVERSE:U,EVENT_PAUSE:"pause",EVENT_PLAY:"play",EVENT_RESTART:q,EVENT_STOP:"stop",EVENT_SEEK:"seek",STRING_PROP:V,NUM_REGEX:z,deepCopy:W,decomposeString:$,decompose:Q,RGB:"rgb(",RGBA:K,isRGBColor:J,recompose:Z,SET_NESTED:et}),st={Linear:function(t,e,r){var n=t.length-1,i=n*e,o=Math.floor(i),s=st.Utils.Linear;return e<0?s(t[0],t[1],i,r):1<e?s(t[n],t[n-1],n-i,r):s(t[o],t[n<o+1?n:o+1],i-o,r)},Bezier:function(t,e,r){for(var n=st.Utils.Reset(r),i=t.length-1,o=Math.pow,s=st.Utils.Bernstein,a=Array.isArray(n),c=0;c<=i;c++)if("number"==typeof n)n+=o(1-e,i-c)*o(e,c)*t[c]*s(i,c);else if(a)for(var l=0,u=n.length;l<u;l++)"number"==typeof n[l]?n[l]+=o(1-e,i-c)*o(e,c)*t[c][l]*s(i,c):n[l]=t[c][l];else if("object"===E(n))for(var h in n)"number"==typeof n[h]?n[h]+=o(1-e,i-c)*o(e,c)*t[c][h]*s(i,c):n[h]=t[c][h];else if("string"==typeof n){for(var d="",f=t[Math.round(i*e)],p=1,m=f.length;p<m;p++)d+=f[p];return d}return n},CatmullRom:function(t,e,r){var n=t.length-1,i=n*e,o=Math.floor(i),s=st.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(o=Math.floor(i=n*(1+e))),s(t[(o-1+n)%n],t[o],t[(o+1)%n],t[(o+2)%n],i-o,r)):e<0?s(t[1],t[1],t[0],t[0],-e,r):1<e?s(t[n-1],t[n-1],t[n],t[n],(0|e)-e,r):s(t[o?o-1:0],t[o],t[n<o+1?n:o+1],t[n<o+2?n:o+2],i-o,r)},Utils:{Linear:function(t,e,r,n){if(t===e||"string"==typeof t){if(e.length&&e.splice&&e.isString){e="";for(var i=0,o=t.length;i<o;i++)e+=t[i]}return e}if("number"==typeof t)return"function"==typeof t?t(r):t+(e-t)*r;if("object"===E(t)){if(void 0!==t.length){var s="string"==typeof t[0]||t.isString;if(s||t[0]===V){for(var a="",c=s?0:1,l=t.length;c<l;c++){var u=0===r?t[c]:1!==r&&"number"==typeof t[c]?t[c]+(e[c]-t[c])*r:e[c];(0<r&&r<1&&J(t,c)||J(t,c,K))&&(u|=0),a+=u}return a}if(n&&n.length&&n.splice)for(var h=0,d=n.length;h<d;h++)n[h]=st.Utils.Linear(t[h],e[h],r,n[h])}else for(var f in n)n[f]=st.Utils.Linear(t[f],e[f],r,n[f]);return n}},Reset:function(t){if(Array.isArray(t)){for(var e=0,r=t.length;e<r;e++)t[e]=st.Utils.Reset(t[e]);return t}if("object"!==E(t))return"number"==typeof t?0:t;for(var n in t)t[n]=st.Utils.Reset(t[n]);return t},Bernstein:function(t,e){var r=st.Utils.Factorial;return r(t)/r(e)/r(t-e)},Factorial:(rt=[1],function(t){var e=1;if(rt[t])return rt[t];for(var r=t;1<r;r--)e*=r;return rt[t]=e}),CatmullRom:function(t,e,r,n,i,o){if("string"==typeof t)return e;if("number"==typeof t){var s=.5*(r-t),a=.5*(n-e),c=i*i;return(2*e-2*r+s+a)*(i*c)+(-3*e+3*r-2*s-a)*c+s*i+e}if("object"===E(t)){if(void 0!==t.length){if(t[0]===V){for(var l="",u=1,h=t.length;u<h;u++){var d="number"==typeof t[u]?st.Utils.CatmullRom(t[u],e[u],r[u],n[u],i):n[u];(J(t,u)||J(t,u,K))&&(d|=0),l+=d}return l}for(var f=0,p=o.length;f<p;f++)o[f]=st.Utils.CatmullRom(t[f],e[f],r[f],n[f],i,o[f])}else for(var m in o)o[m]=st.Utils.CatmullRom(t[m],e[m],r[m],n[m],i,o[m]);return o}}}},at={};function ct(t,e,r){if(!t||!t.nodeType)return e;var n=t.queueID||"q_"+Date.now();t.queueID||(t.queueID=n);var i=at[n];if(i){if(i.object===e&&t===i.tween.node&&r._startTime===i.tween._startTime)w(i.tween);else if("object"===E(e)&&e&&i.object){for(var o in e)o in i.object&&(r._startTime===i.tween._startTime?delete i.object[o]:i.propNormaliseRequired=!0);Object.assign(i.object,e)}return i.object}return"object"===E(e)&&e?(at[n]={tween:r,object:e,propNormaliseRequired:!1},at[n].object):e}function lt(t,e,r){return e?t?"undefined"!=typeof window&&t===window||"undefined"!=typeof document&&t===document?[t]:"string"==typeof t?!!document.querySelectorAll&&document.querySelectorAll(t):Array.isArray(t)?t:t.nodeType?[t]:r?t:[]:null:t?"undefined"!=typeof window&&t===window||"undefined"!=typeof document&&t===document?t:"string"==typeof t?!!document.querySelector&&document.querySelector(t):Array.isArray(t)?t[0]:t.nodeType||r?t:null:null}var ut=0,ht=T.Linear.None,dt=function(){function t(e,r){return N(this,t),this.id=ut++,!e||"object"!==E(e)||r||e.nodeType?e&&(e.nodeType||e.length||"string"==typeof e)&&(e=this.node=lt(e),r=this.object=ct(e,r,this)):(r=this.object=e,e=null),this._valuesEnd=null,this._valuesStart=Array.isArray(r)?[]:{},this._duration=1e3,this._easingFunction=ht,this._easingReverse=ht,this._interpolationFunction=st.Linear,this._startTime=0,this._initTime=0,this._delayTime=0,this._repeat=0,this._r=0,this._isPlaying=!1,this._yoyo=!1,this._reversed=!1,this._onStartCallbackFired=!1,this._pausedTime=null,this._isFinite=!0,this._maxListener=15,this._chainedTweensCount=0,this._prevTime=null,this}return O(t,null,[{key:"fromTo",value:function(e,r,n,i){var o=3<arguments.length&&void 0!==i?i:{};o.quickRender=o.quickRender?o.quickRender:!n;var s=new t(e,r).to(n,o);return o.quickRender&&(s.render().update(s._startTime),s._rendered=!1,s._onStartCallbackFired=!1),s}},{key:"to",value:function(e,r,n){return t.fromTo(e,null,r,n)}},{key:"from",value:function(e,r,n){return t.fromTo(e,r,null,n)}}]),O(t,[{key:"setMaxListener",value:function(t){var e=0<arguments.length&&void 0!==t?t:15;return this._maxListener=e,this}},{key:"on",value:function(t,e){for(var r=this._maxListener,n=t+F,i=0;i<r;i++){var o=n+i;if(!this[o]){this[o]=e;break}}return this}},{key:"once",value:function(t,e){for(var r=this,n=this._maxListener,i=t+F,o=function(t){var n=i+t;if(!r[n])return r[n]=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];e.apply(r,i),r[n]=null},"break"},s=0;s<n&&"break"!==o(s);s++);return this}},{key:"off",value:function(t,e){for(var r=this._maxListener,n=t+F,i=0;i<r;i++){var o=n+i;this[o]===e&&(this[o]=null)}return this}},{key:"emit",value:function(t,e,r,n){var i=this._maxListener,o=t+F;if(!this[o+0])return this;for(var s=0;s<i;s++){var a=o+s;this[a]&&this[a](e,r,n)}return this}},{key:"isPlaying",value:function(){return this._isPlaying}},{key:"isStarted",value:function(){return this._onStartCallbackFired}},{key:"reverse",value:function(t){var e=this._reversed;return this._reversed=void 0!==t?t:!e,this}},{key:"reversed",value:function(){return this._reversed}},{key:"pause",value:function(){return this._isPlaying?(this._isPlaying=!1,w(this),this._pausedTime=h(),this.emit("pause",this.object)):this}},{key:"play",value:function(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=h()-this._pausedTime,this._initTime=this._startTime,n(this),this._pausedTime=h(),this.emit("play",this.object))}},{key:"restart",value:function(){return this._repeat=this._r,this.reassignValues(),n(this),this.emit(q,this.object)}},{key:"seek",value:function(t,e){var r=this._duration,n=this._initTime,i=this._startTime,o=this._reversed,s=n+t;return this._isPlaying=!0,s<i&&n<=i&&(this._startTime-=r,this._reversed=!o),this.update(t,!1),this.emit("seek",t,this.object),e?this:this.pause()}},{key:"duration",value:function(t){return this._duration="function"==typeof t?t(this._duration):t,this}},{key:"to",value:function(t,e){var r=1<arguments.length&&void 0!==e?e:1e3;if(this._valuesEnd=t,"number"==typeof r||"function"==typeof r)this._duration="function"==typeof r?r(this._duration):r;else if("object"===E(r))for(var n in r)if("function"==typeof this[n]){var i=I(Array.isArray(r[n])?r[n]:[r[n]],4),o=i[0],s=void 0===o?null:o,a=i[1],c=void 0===a?null:a,l=i[2],u=void 0===l?null:l,h=i[3],d=void 0===h?null:h;this[n](s,c,u,d)}return this}},{key:"render",value:function(){if(this._rendered)return this;var e=this._valuesStart,r=this._valuesEnd,n=this.object,i=this.node,o=this.InitialValues;if(et(n),et(r),i&&i.queueID&&at[i.queueID]){var s=at[i.queueID];if(s.propNormaliseRequired&&s.tween!==this){for(var a in r)s.tween._valuesEnd[a];s.normalisedProp=!0,s.propNormaliseRequired=!1}}if(i&&o&&(n&&0!==Object.keys(n).length?r&&0!==Object.keys(r).length||(r=this._valuesEnd=o(i,n)):n=this.object=ct(i,o(i,r),this)),!e.processed){for(var c in r){var l=n&&n[c]&&W(n[c]),u=r[c];if(!(_[c]&&_[c].init&&(_[c].init.call(this,l,u,c,n),void 0===l&&e[c]&&(l=e[c]),_[c].skipProcess)||"number"==typeof l&&isNaN(l)||null===l||null===u||!1===l||!1===u||void 0===l||void 0===u||l===u)){if(e[c]=l,Array.isArray(u))if(Array.isArray(l))u.isString&&n[c].isString&&!l.isString?l.isString=!0:Q(c,n,e,r);else{u.unshift(l);for(var h=0,d=u.length;h<d;h++)"string"==typeof u[h]&&(u[h]=$(u[h]))}else Q(c,n,e,r);"number"!=typeof l||"string"!=typeof u||u[1]}}e.processed=!0}return t.Renderer&&this.node&&t.Renderer.init&&(t.Renderer.init.call(this,n,e,r),this.__render=!0),this._rendered=!0,this}},{key:"start",value:function(t){return this._startTime=void 0!==t?"string"==typeof t?h()+parseFloat(t):t:h(),this._startTime+=this._delayTime,this._initTime=this._prevTime=this._startTime,this._onStartCallbackFired=!1,this._rendered=!1,this._isPlaying=!0,n(this),this}},{key:"stop",value:function(){var t=this._isPlaying,e=this._isFinite,r=this.object,n=this._startTime,i=this._duration,o=this._r,s=this._yoyo,a=this._reversed;if(!t)return this;var c=e?(o+1)%2==1:!a;return this._reversed=!1,s&&c?this.update(n):this.update(n+i),w(this),this.emit("stop",r)}},{key:"delay",value:function(t){return this._delayTime="function"==typeof t?t(this._delayTime):t,this}},{key:"chainedTweens",value:function(){if(this._chainedTweensCount=arguments.length,!this._chainedTweensCount)return this;for(var t=0,e=this._chainedTweensCount;t<e;t++)this[D+t]=arguments[t];return this}},{key:"repeat",value:function(t){return this._repeat=this._duration?"function"==typeof t?t(this._repeat):t:0,this._r=this._repeat,this._isFinite=isFinite(t),this}},{key:"reverseDelay",value:function(t){return this._reverseDelayTime="function"==typeof t?t(this._reverseDelayTime):t,this}},{key:"yoyo",value:function(t,e){return this._yoyo="function"==typeof t?t(this._yoyo):null===t?this._yoyo:t,t||(this._reversed=!1),this._easingReverse=e||null,this}},{key:"easing",value:function(t){return this._easingFunction=t,this}},{key:"interpolation",value:function(t){return"function"==typeof t&&(this._interpolationFunction=t),this}},{key:"reassignValues",value:function(t){var e=this._valuesStart,r=this.object,i=this._delayTime;for(var o in this._isPlaying=!0,this._startTime=void 0!==t?t:h(),this._startTime+=i,this._reversed=!1,n(this),e){var s=e[o];r[o]=s}return this}},{key:"update",value:function(e,r,n){var i,a,c,l=this._onStartCallbackFired,u=this._easingFunction,d=this._interpolationFunction,f=this._easingReverse,p=this._repeat,m=this._delayTime,g=this._reverseDelayTime,v=this._yoyo,y=this._reversed,b=this._startTime,x=this._prevTime,T=this._duration,E=this._valuesStart,N=this._valuesEnd,S=this.object,O=this._isFinite,C=this._isPlaying,A=this.__render,M=this._chainedTweensCount,k=0;if(T){var j=(e=void 0!==e?e:h())-x;if(this._prevTime=e,250<j&&o()&&s()&&(e-=j-L),!C||e<b&&!n)return!0;i=1<(i=(e-b)/T)?1:i,i=y?1-i:i}else i=1,p=0;if(l||(this._rendered||(this.render(),this._rendered=!0),this.emit(H,S),this._onStartCallbackFired=!0),a=y&&f||u,!S)return!0;for(c in N){var P=E[c];if(null!=P||_[c]&&_[c].update){var I=N[c],F=a[c]?a[c](i):("function"==typeof a?a:ht)(i),q=d[c]?d[c]:"function"==typeof d?d:st.Linear;"number"==typeof I?S[c]=P+(I-P)*F:!Array.isArray(I)||I.isString||Array.isArray(P)?I&&I.update?I.update(F):"function"==typeof I?S[c]=I(F):"string"==typeof I&&"number"==typeof P?S[c]=P+parseFloat(I[0]+I.substr(2))*F:Z(c,S,E,N,F,i):S[c]=q(I,F,S[c]),_[c]&&_[c].update&&_[c].update.call(this,S[c],P,I,F,i,c),k++}}if(!k)return w(this),!1;if(A&&t.Renderer&&t.Renderer.update&&t.Renderer.update.call(this,S,i),this.emit(R,S,i,e),1===i||y&&0===i){if(0<p&&0<T){if(O&&this._repeat--,v)this._reversed=!y;else for(c in N){var V=N[c];"string"==typeof V&&"number"==typeof E[c]&&(E[c]+=parseFloat(V[0]+V.substr(2)))}return this.emit(v&&!y?U:G,S),this._startTime=y&&g?e-g:e+m,!0}if(r||(this._isPlaying=!1,w(this),ut--),this.emit(B,S),this._repeat=this._r,M)for(var z=0;z<M;z++)this[D+z].start(e+T);return!1}return!0}}]),t}(),ft=function(){function t(){N(this,t),this.totalTime=0,this.labels=[],this.offsets=[]}return O(t,[{key:"parseLabel",value:function(t,e){var r=this.offsets,n=this.labels,i=n.indexOf(t);if("string"==typeof t&&-1!==t.indexOf("=")&&!e&&-1===i){var o=t.substr(t.indexOf("=")-1,2),s=t.split(o);e=2===s.length?o+s[1]:null,t=s[0],i=n.indexOf(t)}if(-1!==i&&t){var a=r[i]||0;if("number"==typeof e)a=e;else if("string"==typeof e&&-1!==e.indexOf("=")){var c=e.charAt(0);e=Number(e.substr(2)),"+"===c||"-"===c?a+=parseFloat(c+e):"*"===c?a*=e:"/"===c?a/=e:"%"===c&&(a*=e/100)}return a}return"number"==typeof e?e:0}},{key:"addLabel",value:function(t,e){return this.labels.push(t),this.offsets.push(this.parseLabel(t,e)),this}},{key:"setLabel",value:function(t,e){var r=this.labels.indexOf(t);return-1!==r&&this.offsets.splice(r,1,this.parseLabel(t,e)),this}},{key:"eraseLabel",value:function(t){var e=this.labels.indexOf(t);return-1!==e&&(this.labels.splice(e,1),this.offsets.splice(e,1)),this}}]),t}(),pt=0,mt=function(){function t(e){var r;return N(this,t),(r=P(this,M(t).call(this)))._duration=0,r._startTime=e&&void 0!==e.startTime?e.startTime:h(),r._tweens=[],r.elapsed=0,r._id=pt++,r._defaultParams=e,r.position=new ft,r.position.addLabel("afterLast",r._duration),r.position.addLabel("afterInit",r._startTime),r._onStartCallbackFired=!1,P(r,j(r))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(t,dt),O(t,[{key:"mapTotal",value:function(t){return t.call(this,this._tweens),this}},{key:"timingOrder",value:function(t){var e=t(this._tweens.map((function(t){return t._startTime})));return this._tweens.map((function(t,r){t._startTime=e[r]})),this}},{key:"getTiming",value:function(t,e,r,n){var i=3<arguments.length&&void 0!==n?n:0;if("reverse"===t){var o=r.stagger,s=(o||0)*(e.length-1);return e.map((function(t,e){return s-(o||0)*e+i}))}if("async"===t)return e.map((function(t){return i}));if("sequence"===t||"delayed"===t){var a=r.stagger;return a=a||(r.duration||1e3)/(e.length-1),e.map((function(t,e){return a*e+i}))}if("oneByOne"===t)return e.map((function(t){return r.duration}));if("shuffle"===t){var c=r.stagger;return function(t){var e,r,n;for(n=t.length;n;--n)e=Math.floor(Math.random()*n),r=t[n-1],t[n-1]=t[e],t[e]=r;return t}(e.map((function(t,e){return(c||0)*e+i})))}var l=r.stagger;return e.map((function(t,e){return(l||0)*e+i}))}},{key:"fromTo",value:function(t,e,r,n){if((t=lt(t,!0,!0))&&t.length){this._defaultParams&&(n=n?A({},this._defaultParams,{},n):this._defaultParams);for(var i,o=n.label,s="number"==typeof o?o:this.position.parseLabel(void 0!==o?o:"afterLast",null),a=this.getTiming(n.mode,t,n,s),c=0,l=t.length;c<l;c++)i=t[c],this.add(dt.fromTo(i,"function"==typeof e?e(c,t.length):"object"===E(e)&&e?A({},e):null,"function"==typeof r?r(c,t.length):r,"function"==typeof n?n(c,t.length):n),a[c])}return this.start()}},{key:"from",value:function(t,e,r){return this.fromTo(t,e,null,r)}},{key:"to",value:function(t,e,r){return this.fromTo(t,null,e,r)}},{key:"addLabel",value:function(t,e){return this.position.addLabel(t,e),this}},{key:"map",value:function(t){for(var e=0,r=this._tweens.length;e<r;e++){var n=this._tweens[e];t(n,e),this._duration=Math.max(this._duration,n._duration+n._startTime)}return this}},{key:"add",value:function(t,e){var r=this;if(Array.isArray(t))return t.map((function(t){r.add(t,e)})),this;"object"!==E(t)||t instanceof dt||(t=new dt(t.from).to(t.to,t));var n=this._defaultParams,i=this._duration;if(n)for(var o in n)"function"==typeof t[o]&&t[o](n[o]);var s="number"==typeof e?e:this.position.parseLabel(void 0!==e?e:"afterLast",null);return t._startTime=Math.max(this._startTime,t._delayTime,s),t._delayTime=s,t._isPlaying=!0,this._duration=Math.max(i,Math.max(t._startTime+t._delayTime,t._duration)),this._tweens.push(t),this.position.setLabel("afterLast",this._duration),this}},{key:"restart",value:function(){return this._startTime+=h(),n(this),this.emit(q)}},{key:"easing",value:function(t){return this.map((function(e){return e.easing(t)}))}},{key:"interpolation",value:function(t){return this.map((function(e){return e.interpolation(t)}))}},{key:"update",value:function(t){var e,r=this._tweens,n=this._duration,i=this._reverseDelayTime,a=this._startTime,c=this._reversed,l=this._yoyo,u=this._repeat,d=this._isFinite,f=this._isPlaying,p=this._prevTime,m=this._onStartCallbackFired,g=(t=void 0!==t?t:h())-p;if(this._prevTime=t,250<g&&o()&&s()&&(t-=g-L),!f||t<a)return!0;e=1<(e=(t-a)/n)?1:e,e=c?1-e:e,this.elapsed=e,m||(this.emit(H),this._onStartCallbackFired=!0);for(var v=t-a,y=c?n-v:v,b=0;b<r.length;)r[b].update(y),b++;if(this.emit(R,e,v),1===e||c&&0===e){if(u){for(d&&this._repeat--,this.emit(c?U:G),l&&(this._reversed=!c,this.timingOrder((function(t){return t.reverse()}))),this._startTime=c&&i?t+i:t,b=0;b<r.length;)r[b].reassignValues(t),b++;return!0}return this.emit(B),this._repeat=this._r,w(this),this._isPlaying=!1}return!0}},{key:"progress",value:function(t){return void 0!==t?this.update(t*this._duration):this.elapsed}}]),t}();e.Easing=T,e.FrameThrottle=function(t){y=1.05*(0<arguments.length&&void 0!==t?t:120)},e.Interpolation=st,e.Interpolator=function(t,e){var r=Array.isArray(t)&&!t.isString,n="string"==typeof t?t:r?t.slice():A({},t);if(r)for(var i=0,o=t.length;i<o;i++)t[i]===e[i]&&"number"==typeof t[i]&&"number"!=typeof e[i]||Q(i,n,t,e);else if("object"===E(t))for(var s in t)t[s]===e[s]&&"number"==typeof t[s]&&"number"!=typeof e[s]||Q(s,n,t,e);else if("string"==typeof t){t=$(t),e=$(e);for(var a=1;a<t.length;)t[a]===e[a]&&"string"==typeof t[a-1]?(t.splice(a-1,2,t[a-1]+t[a]),e.splice(a-1,2,e[a-1]+e[a])):a++}return function(i){if(r)for(var o=0,s=t.length;o<s;o++)Z(o,n,t,e,i);else if("object"===E(n))for(var a in t)Z(a,n,t,e,i);else"string"==typeof n&&(n=Z(0,0,t,e,i,i,!0));return n}},e.Plugins=_,e.Selector=lt,e.Timeline=mt,e.ToggleLagSmoothing=function(t){b=!(0<arguments.length&&void 0!==t)||t},e.Tween=dt,e.add=n,e.autoPlay=function(t){p=t},e.get=i,e.getAll=function(){return d},e.has=function(t){return null!==i(t)},e.isRunning=o,e.now=h,e.onRequestTick=function(t){m.push(t)},e.onTick=function(t){return d.push({update:t})},e.remove=w,e.removeAll=function(){d.length=0,u(a),f=!1},e.update=x,e.utils=ot,Object.defineProperty(e,"__esModule",{value:!0})}(e)}).call(this,r(7),r(4))},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=r(3),i=Object(n.a)("glycanjs:svgcanvas"),o="http://www.w3.org/2000/svg",s=t=>t.toFixed(1);e.a=class{constructor(t){i.info("Creating canvas element");var e="DEFS"===t.nodeName;this.canvas=this.createElement(e?"symbol":"svg",t.ownerDocument),this.canvas.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),t.appendChild(this.canvas)}createElement(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.canvas.ownerDocument).createElementNS(o,t)}appendChild(t){this.canvas.appendChild(t)}group(t){return t||(t=this.canvas.ownerDocument.createElementNS(o,"g"),this.appendChild(t)),Object.create(this,{appendChild:{value:e=>t.appendChild(e)},setAttribute:{value:(e,r)=>t.setAttribute(e,r)},setAttributeNS:{value:(e,r,n)=>t.setAttributeNS(e,r,n)},element:{value:t}})}use(t,e,r,n,i){var a=this.canvas.ownerDocument.createElementNS(o,"use");return a.setAttribute("x",s(e)),a.setAttribute("y",s(r)),a.setAttribute("width",s(n)),a.setAttribute("height",s(i)),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t),this.appendChild(a),a}rect(t,e,r,n){var i=this.canvas.ownerDocument.createElementNS(o,"rect");return i.setAttribute("x",s(t)),i.setAttribute("y",s(e)),i.setAttribute("width",s(r)),i.setAttribute("height",s(n)),this.appendChild(i),i}line(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=this.canvas.ownerDocument.createElementNS(o,"line");for(var c of(a.setAttribute("x1",s(t)),a.setAttribute("y1",s(e)),a.setAttribute("x2",s(r)),a.setAttribute("y2",s(n)),Object.keys(i)))a.setAttribute(c,i[c]);var[l,u,h]=[i.fill?"fill: var(--fill-color,".concat(i.fill,");"):"",i.stroke?"stroke: var(--stroke-color,".concat(i.stroke,");"):"",i["stroke-width"]?"stroke-width: var(--stroke-width,".concat(i["stroke-width"],")"):""];return a.setAttribute("style","".concat(l).concat(u).concat(h)),a.setAttribute("stroke-linecap","round"),this.appendChild(a),a}text(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.canvas.ownerDocument.createElementNS(o,"text"),a=this.canvas.ownerDocument.createElementNS(o,"tspan");for(var c of("string"!=typeof r?i.appendChild(r):(i.appendChild(a),a.textContent=r,a.setAttribute("dy","0")),i.style.fontFamily="Helvetica, Verdana, Arial, Sans-serif",i.setAttribute("x",s(t)),i.setAttribute("y",s(e)),["font-size","text-anchor"]))n[c]&&i.setAttribute(c,n[c]);for(var l of["dy","dx"])n[l]&&a.setAttribute(l,n[l]);return this.appendChild(i),i}sendToBack(t){t.element&&(t=t.element);var e=t.parentNode;return e.insertBefore(t,e.firstChild),t}sendToFront(t){return t.element&&(t=t.element),t.parentNode.insertBefore(t,null),t}}},function(t,e,r){"use strict";var n=r(3),i=r(0),o=r(1),s=Object(n.a)("glycanjs:renderer"),a=Symbol("canvas"),c=Symbol("cached_layout"),l=Symbol("layout"),u=Symbol("rendered_sugars"),h=Symbol("rendered_elements"),d=Symbol("group_tag"),f=Symbol("rotate"),p=t=>t.toFixed(1),m=t=>t.height,g=t=>t.width,v=function(t,e,r,n,i){var o=this.rotate,s=this.leftToRight,a=o?g:m,c=o?m:g,l="?";"b"===t&&(l="β"),"a"===t&&(l="α"),(e=e||"?")<0&&(e="");var[u,h,d,f]=[r.x+r.width/2,r.y+r.height/2,n.x+n.width/2,n.y+n.height/2],p=o?u-d:h-f,v=o?h-f:u-d,y=a(r)+a(n),b=o?f:d,w=o?r.x:r.y,x=o?r.y-n.y:r.x-n.x,_=o?r.x-n.x:r.y-n.y,T=v/p;isFinite(T)||(T=-1,x>0&&(T=1));var E=p,N=1*E;Math.abs(E)>=y/2?N=1*(E-=y/2)+a(n)/2:0==E&&(N=.425*Math.abs(v));var S=T*N;0===S&&(S+=c(r)/10);var O=100*(b+S),C=100*(w+(s?0:1)*a(r));0===_&&(C=100*(w+a(r)/8))>25&&(C=25);var A=this.renderLinkageLabel(i,o?C:O,o?O:C,l+e,o,S,Math.abs(T)<1&&s);return i.sendToBack(A),A},y=(t,e,r,n,i)=>[(1-i)*t+i*r,(1-i)*e+i*n],b=(t,e,r,n,i)=>{var o=e-n,s=r-t,a=i/Math.hypot(o,s);return[t+(o*=a),e+(s*=a),t-o,e-s]},w=(t,e,r,n,i)=>{var o=e-n,s=r-t,a=i/Math.hypot(o,s);return[t-(o*=a),e-(s*=a),t,e]},x=function(t,e,r,n,i,s){var a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(e){var c=[100*(t.x+t.width/2),100*(t.y+t.height/2),100*(e.x+e.width/2),100*(e.y+e.height/2)],l=this.renderLinkageGroup(s,i,r);s.sendToBack(l),l.line(...c,{"stroke-width":p(1),stroke:"#333"}),a&&v.call(this,r.anomer,n.linkageOf(r),t,e,l);var u=r instanceof o.a.Monosaccharide&&r.repeat.mode!==o.a.MODE_EXPAND,h=n instanceof o.a.Monosaccharide&&n.repeat.mode!==o.a.MODE_EXPAND,d=u&&h&&r.repeat!==n.repeat;if(u&&r.endsRepeatUnit&&0===r.children.filter(t=>["Fuc","HSO3"].indexOf(t.identifier)<0).length){var f=[100*(t.x+t.width/2),100*(t.y+t.height/2),100*(e.x+e.width/2),100*(e.y+e.height/2)],m=-1,g=.25;t.x-e.x!=0&&t.y-e.y!=0&&(g=1/4);var x=y(...f,-.5),_=b(x[0],x[1],f[2],f[3],100*t.width*g),T=w(..._,100*m*t.width/8),E=w(_[2],_[3],_[0],_[1],-1*m*100*t.width/8);l.line(..._,{"stroke-width":p(5),stroke:"#999"}),l.line(...T,{"stroke-width":p(5),stroke:"#999"}),l.line(...E,{"stroke-width":p(5),stroke:"#999"})}if(u?!h||d:h){var N=[100*(t.x+t.width/2),100*(t.y+t.height/2),100*(e.x+e.width/2),100*(e.y+e.height/2)],S=u?1:-1,O=.25;t.x-e.x!=0&&t.y-e.y!=0&&(O=1/4);var C=y(...N,S>0?.55:.5),A=b(C[0],C[1],N[2],N[3],100*t.width*O),M=w(...A,100*S*t.width/8),k=w(A[2],A[3],A[0],A[1],-1*S*100*t.width/8);l.line(...A,{"stroke-width":p(5),stroke:"#999"}),l.line(...M,{"stroke-width":p(5),stroke:"#999"}),l.line(...k,{"stroke-width":p(5),stroke:"#999"}),u&&l.text(M[2],M[3],r.repeat.identifier,{"font-size":p(Math.floor(100/3)),"text-anchor":this.rotate?"middle":"end",dy:this.rotate?"1em":"0.25em",dx:(this.rotate,"-0.25em")})}return l}},_=function(t){var e=new Set(t);for(var r of this.rendered.keys())if(r instanceof i.b&&!e.has(r)){var n=this.rendered.get(r);this.removeRendered(n),this.rendered.delete(r)}},T=function(t,e){if(e){s.info("Laying out",t.sequence);var r=e.PerformLayout(t);return r.calculateIdentifier=e.CalculateIdentifier,r}s.info("No layout engine specified, skipping layout")},E=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.composition(),n=[],i=[],o=this.rendered.get(t),s=this.rotate,a=this.leftToRight;if(o=this.setupContainer(o,t),!(r.length<1)){var c=[];for(var u of e?r:[]){var h=e.get(u),d=h.x,f=h.y;s&&(h.x=a?-1*(f+h.height):f,h.y=a?d:-1*(d+h.width)),n.push(h.x),n.push(h.x+h.width),i.push(h.y),i.push(h.y+h.height);var p=null,m=this.rendered.get(u);m?p=m.residue:(m={residue:p=this.renderIcon(o,e.calculateIdentifier(u),u,t),linkage:null},this.rendered.set(u,m)),1!==h.z&&c.push({z:h.z,icon:p});var g=1==this[l].LINKS;m.linkage&&this.removeRendered({linkage:m.linkage}),m.linkage=this.renderLinkage(h,u.parent?e.get(u.parent):void 0,u,u.parent,t,o,g&&"HSO3"!==u.identifier);var v=0;h.rotate&&(v=h.rotate),s&&!h.keep_horizontal&&(v-=a?-90:90),this.setIconPosition(p,100*h.x,100*h.y,100*h.width,100*h.height,v)}var y=c.map(t=>t.icon.element).map(t=>[...t.parentNode.children].indexOf(t)).map((t,e,r)=>t-(r[e-1]||0)).map(t=>t>=0).reduce((t,e)=>t&&e,!0);if(!y)for(var b of c.sort((t,e)=>t.z-e.z))o.sendToFront(b.icon);if(this.groupTag&&o.tagGroup){var w=[];for(var x of t.composition_for_tag(this.groupTag)){var _=this.rendered.get(x);_&&(_.linkage&&o.tagGroup.appendChild(_.linkage),w.push(_.residue))}for(var T of w)o.tagGroup.appendChild(T.element)}return o}};e.a=class{constructor(t,e){t&&e&&(this[l]=e,this[c]=new WeakMap),this[u]=[],this[h]=new Map}get LayoutEngine(){return this[l]}set LayoutEngine(t){this[l]=t}static get GLOBAL_SCALE(){return 100}get element(){return this[a]}set element(t){this[a]=t}get rendered(){return this[h]}set groupTag(t){t!==this[d]&&this.resetTags(),this[d]=t}get groupTag(){return this[d]}addSugar(t){this[u].push(t)}get sugars(){return Object.freeze([].concat(this[u]))}layoutFor(t){if(this.global_layout.has(t)){var{x:e,y:r,width:n,height:i}=this.global_layout.get(t);return{x:e,y:r,width:n,height:i}}}refresh(){for(var t of(_.bind(this)(Array.prototype.concat(...this[u].map(t=>t.composition()))),this.global_layout=new WeakMap,this[u])){var e=T(t,this[l]);if(e)for(var r of[t,...t.composition()])this.global_layout.set(r,e.get(r));var n=t.composition();E.bind(this)(t,e,n)}return Promise.resolve()}setupContainer(){}resetTags(){}removeRendered(){}renderIcon(){}renderLinkageLabel(){}renderLinkage(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return x.call(this,...e)}get horizontal(){return this[f]}set horizontal(t){this[f]=!!t}}},function(t,e,r){var n=r(25),i={};function o(t,e,r,o){var s=Reflect.get(t,e,r)||Reflect.get(n,e,r);return s&&s!==n?s:(o&&(e="".concat(o,":").concat(e)),i[e]||(i[e]=a(e)))}var s=(t,e,r)=>Reflect.set(n,e,r),a=new Proxy((function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return new Proxy(n(t,...r),{get:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return o(...r,t)},set:s})}),{get:o,set:s});t.exports=a},function(t,e,r){"use strict";var n=r(23),i=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=h;var o=Object.create(r(18));o.inherits=r(13);var s=r(36),a=r(29);o.inherits(h,s);for(var c=i(a.prototype),l=0;l<c.length;l++){var u=c[l];h.prototype[u]||(h.prototype[u]=a.prototype[u])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),n.nextTick(e,t)}},function(t,e,r){"use strict";var n=Symbol("torender");var i=function(t){var e=t.getContext("2d");e.font="".concat(this.options["font-size"]||25,"px Helvetica"),e.textAlign="left",this.options["text-anchor"]&&(e.textAlign=this.options["text-anchor"]),e.textBaseline="top",this.options.dy&&(e.textBaseline="middle"),e.fillStyle="#111",e.fillText(this.text,this.x,this.y)},o=function(t){var e=t.getContext("2d");this.options["stroke-width"]&&(e.lineWidth=this.options["stroke-width"]),this.options.stroke&&(e.strokeStyle=this.options.stroke),e.beginPath(),e.moveTo(this.x,this.y),e.lineTo(this.x2,this.y2),e.stroke()},s=new Map,a=function(t){var e=t.getContext("2d"),r=s.get(this.src);r||((r=new Image).src=this.src,r.loaded=new Promise(t=>{r.addEventListener("load",t)})),s.set(this.src,r),r.loaded.then(()=>{e.drawImage(r,this.x,this.y,this.width,this.height)})};class c extends class{constructor(){this[n]=[]}get torender(){return this[n]}appendChild(t){t.parent&&t.parent.torender.splice(t.parent.torender.indexOf(t),1),t.parent=this,this.torender.push(t)}sendToBack(t){return t.parent.torender.unshift(t.parent.torender.splice(t.parent.torender.indexOf(t),1)[0]),t}sendToFront(t){return t.parent.torender.push(t.parent.torender.splice(t.parent.torender.indexOf(t),1)[0]),t}remove(t){this.torender.splice(this.torender.indexOf(t),1)}}{constructor(t){super(),t&&(this.canvas=t)}createElement(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.canvas.ownerDocument).createElement(t)}group(t){return t||(t=new c,this.appendChild(t)),t}use(t,e,r,n,i){var o={icon:t,x:e,y:r,width:n,height:i,render:a};return this.appendChild(o),o}rect(){}line(t,e,r,n){var i={x:t,y:e,x2:r,y2:n,options:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},render:o};return this.appendChild(i),i}text(t,e,r){var n={x:t,y:e,text:r,options:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},render:i};return this.appendChild(n),n}}e.a=c},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},function(t,e,r){"use strict";(function(t){var n,i=r(3),o=r(8),s=r(9),a=Object(i.a)("glycanjs:svgrenderer"),c=Symbol("document_container"),l="https://glycocode.com/glycanjs",u={side:1,top:1},h="object"!=typeof t||"object"!=typeof t.versions||void 0===t.versions.node?r(15).default:"",d=t=>t.toFixed(1),f=function(t,e){for(var r of"mousemove mousedown mouseup click touchstart touchend touchmove drop dragover".split(" "))t.addEventListener(r,e,{passive:!0,capture:!0})},p=function(t,e){var r=this.rotate;if(e.clientX){var n=t.createSVGPoint();n.x=e.clientX,n.y=e.clientY;var i=n.matrixTransform(t.getScreenCTM().inverse()),o=i.x/100,s=i.y/100;e.sugarX=r?-1*s+1:o,e.sugarY=r?o:s}};class m extends s.a{constructor(t,e){a("SVGRenderer"),super(t,e),t&&e&&(this[c]=t,this.element=new o.a(t),this.element.canvas.setAttribute("xmlns:glycanjs",l),f(this.element.canvas,p.bind(this,this.element.canvas)))}static get SYMBOLS(){return h}static get GLOBAL_SCALE(){return 100}appendSymbols(){this.constructor.AppendSymbols(this)}static AppendSymbols(t){t instanceof m&&(t=t.element.canvas);var e=Promise.resolve(this.SYMBOLS).then(t=>(new DOMParser).parseFromString(t,"image/svg+xml")).then(t=>t.querySelectorAll("svg defs"));if(!(t instanceof SVGDefsElement)){var r=t.ownerDocument.createElementNS("http://www.w3.org/2000/svg","defs");t.appendChild(r),t=r}return e.then(e=>{for(var r of(console.log(e),e))t.appendChild(r.cloneNode(!0))})}static fromSVGElement(t,e){var r=new n;r[c]=t.parentNode,r.element=new o.a(t),r.element.canvas=t,((t,e)=>{var r=t.ownerDocument.createElement("div");r.innerHTML=e.replace(/<\?.*\?>/,"");var n=[...r.querySelectorAll("defs symbol")].map(t=>t.getAttribute("id"));for(var i of t.querySelectorAll("symbol"))n.indexOf(i.getAttribute("id"))>=0&&i.parentNode.removeChild(i);for(var o of r.querySelectorAll("defs"))t.appendChild(o)})(t,m.SYMBOLS),(t=>{for(var e of t.querySelectorAll("symbol *[fill]")){var r=e.getAttribute("fill"),n=e.getAttribute("stroke-width"),i=e.getAttribute("stroke");r&&(e.style.fill="var(--fill-color,".concat(r,")")),n&&(e.style.strokeWidth="var(--stroke-width,".concat(n,")")),i&&(e.style.stroke="var(--stroke-color,".concat(i,")"))}for(var o of t.querySelectorAll("g[*|location] line")){var s=o.getAttribute("stroke-width"),a=o.getAttribute("stroke");s&&(o.style.strokeWidth="var(--stroke-width,".concat(s,")")),a&&(o.style.stroke="var(--stroke-color,".concat(a,")"))}})(t),f(t,p.bind(r,t));var i=t.querySelectorAll("g");for(var s of i)if(s.hasAttribute("glycanjs:sequence")){var a=new e;for(var l of(a.sequence=s.getAttribute("glycanjs:sequence"),r.addSugar(a),r.rendered.set(a,r.element.group(s)),s.querySelectorAll("use")))if(l.hasAttribute("glycanjs:location")){var u={residue:{element:l}};l.parentNode!==s&&s.appendChild(l),r.rendered.set(a.locate_monosaccharide(l.getAttribute("glycanjs:location")),u)}for(var h of s.querySelectorAll("g"))if(h.hasAttribute("glycanjs:location")){h.parentNode!==s&&(s.appendChild(h),r.element.sendToBack(h));var d=r.rendered.get(a.locate_monosaccharide(h.getAttribute("glycanjs:location")));d?d.linkage=h:console.log("ERROR loading linkage for ",a.sequence,"missing residue at",h.getAttribute("glycanjs:location"))}}return r}resetTags(){for(var t of this.sugars){var e=this.rendered.get(t);if(e.tagGroup)for(var r of[...e.tagGroup.element.childNodes])e.appendChild(r)}}setupContainer(t,e){var r=this.element;if(t||((t=r.group()).setAttributeNS(null,"pointer-events","none"),this.rendered.set(e,t)),t.setAttributeNS(l,"glycanjs:sequence",e.sequence),this.groupTag&&!t.tagGroup&&(t.tagGroup=t.group(),t.tagGroup.element.setAttribute("class","tagged")),t.tagGroup){for(var n of t.tagGroup.element.childNodes)t.appendChild(n);var i=t.tagGroup.element.ownerDocument.defaultView.getComputedStyle(t.tagGroup.element);if(i){var o=i.getPropertyValue("--zindex").trim()||0;o=parseInt(o);var s=t.tagGroup.element.parentElement;o<0&&s.insertBefore(t.tagGroup.element,s.firstChild),o>0&&s.insertBefore(t.tagGroup.element,null)}}return t}renderLinkageGroup(t,e,r){var n=t.group();return n.element.setAttributeNS(l,"glycanjs:location",e.location_for_monosaccharide(r)),n}renderLinkageLabel(t,e,r,n,i,o,s){var a=t.text(e,r,n);return a.setAttribute("font-size",d(Math.floor(100/3))),a.firstChild.setAttribute("dy","0.75em"),!i&&o<0&&a.setAttribute("text-anchor","end"),i&&s&&a.setAttribute("text-anchor","end"),i&&o<0&&a.firstChild.setAttribute("dy","0em"),a}removeRendered(t){t.residue&&t.residue.element.parentNode.removeChild(t.residue.element),t.linkage&&(t.linkage.element?t.linkage.element.parentNode.removeChild(t.linkage.element):t.linkage.parentNode.removeChild(t.linkage))}renderIcon(t,e,r,n){var i=this.icon_prefix?"".concat(this.icon_prefix,"_"):"",o=t.use("#".concat(i).concat(e),0,0,1,1);return o.setAttributeNS(l,"glycanjs:identifier",r.identifier),o.setAttributeNS(l,"glycanjs:location",n.location_for_monosaccharide(r)),o.setAttributeNS(l,"glycanjs:parent",r.parent?n.location_for_monosaccharide(r.parent):""),{element:o}}setIconPosition(t,e,r,n,i,o){var s="";0!==o&&(s="rotate(".concat(d(o),",").concat(d(e+n/2),",").concat(d(r+i/2),")"));var a="".concat(s," translate(").concat(d(e),",").concat(d(r),") scale(").concat(d(n),",").concat(d(i),")");t.element.setAttribute("transform",a)}screenCoordinatesFromLayout(t){var e=this.element.canvas,r=e.createSVGPoint(),n=t.x+t.width,i=t.y+t.height;r.x=100*t.x,r.y=100*t.y;var o=r.matrixTransform(e.getScreenCTM());return t.x=o.x,t.y=o.y,r.x=100*n,r.y=100*i,o=r.matrixTransform(e.getScreenCTM()),t.width=o.x-t.x,t.height=o.y-t.y,t}scaleToFit(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=this.element.canvas,r=e.getBBox(),n=[r.x-100*t.side,r.y-100*t.top,r.width+200*t.side,r.height+200*t.top];e.setAttribute("viewBox",n.join(" ")),e.setAttribute("preserveAspectRatio","xMidYMid meet")}}n=class extends m{layoutFor(t){var{x:e,y:r,width:n,height:i}=this.rendered.get(t).residue.element.getBoundingClientRect();return{x:e,y:r,width:n,height:i}}screenCoordinatesFromLayout(t){return t}},m.DEFAULT_PADDING=u,e.a=m}).call(this,r(4))},function(t,e,r){"use strict";r.r(e),e.default='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="50 50 500 1300">\n\x3c!--\nRGB settings for SNFG\nWhite  #fff\nBlue  #0090bc\nGreen  #00a651\nYellow  #ffd400\nLight blue  #8fcce9\nPink  #f69ea1\nPurple  #a54399\nBrown  #a17a4d\nOrange  #f47920\nRed  #ed1c24\n--\x3e\n  <defs>\n    <symbol id="hexnac_base" viewBox="0 0 100 100">\n      <rect x="10" y="10" width="80" height="80" style="fill: var(--fill-color); stroke: var(--stroke-color); stroke-width: var(--stroke-width);" />\n    </symbol>\n    <symbol id="hex_base" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" r="40" style="fill: var(--fill-color); stroke: var(--stroke-color); stroke-width: var(--stroke-width);"/>\n    </symbol>\n    <symbol id="sia_base" viewBox="0 0 100 100">\n      <path d="M50,5 95,50 50,95 5,50 z" style="fill: var(--fill-color); stroke: var(--stroke-color); stroke-width: var(--stroke-width);"/>\n    </symbol>\n    <symbol id="hexnac" viewBox="0 0 100 100">\n      <rect x="10" y="10" width="80" height="80" fill="#fff" stroke-width="3" stroke="#000"/>\n    </symbol>\n    <symbol id="galnac" viewBox="0 0 100 100">\n      <rect x="10" y="10" width="80" height="80" fill="#ffd400" stroke-width="1" stroke="#000"/>\n    </symbol>\n    <symbol id="glcnac" viewBox="0 0 100 100">\n      <rect x="10" y="10" width="80" height="80" fill="#0090bc" stroke-width="1" stroke="#000"/>\n    </symbol>\n    <symbol id="man" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#00a651" r="40" stroke-width="1" stroke="#000"/>\n    </symbol>\n    <symbol id="man6p" viewBox="0 0 100 100">\n      <circle cx="50" cy="75" fill="#00a651" r="20" stroke-width="1" stroke="#000"/>\n      <text x="50" y="25" text-anchor="middle" stroke="#000" stroke-width="2" dy=".35em" dx="0.05em" font-size="25">P</text>\n    </symbol>\n    <symbol id="glc" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#0090bc" r="40" stroke-width="1" stroke="#000"/>\n    </symbol>\n    <symbol id="gal" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#ffd400" r="40" stroke-width="1" stroke="#000"/>\n    </symbol>\n    <symbol id="hex" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#fff" r="40" stroke-width="3" stroke="#000"/>\n    </symbol>\n    <symbol id="neu" viewBox="0 0 100 100">\n      <path d="M50,5 95,50 50,95 5,50 z" fill="#ed1c24" stroke="#000" stroke-width="1"/>\n    </symbol>\n    <symbol id="neuac" viewBox="0 0 100 100">\n      <path d="M50,5 95,50 50,95 5,50 z" fill="#a54399" stroke="#000" stroke-width="1"/>\n    </symbol>\n    <symbol id="neugc" viewBox="0 0 100 100">\n      <path d="M50,5 95,50 50,95 5,50 z" fill="#8fcce9" stroke="#000" stroke-width="1"/>\n    </symbol>\n    <symbol id="fuc" viewBox="0 0 100 100">\n      <path d="M50,15 90,90 10,90 z" fill="#ed1c24" stroke="#000" stroke-width="1"/>\n    </symbol>\n    <symbol id="fucnac" viewBox="0 0 100 100">\n      <path d="M50,15 90,90 50,90 z" fill="#ed1c24" stroke="#000" stroke-width="1"/>\n      <path d="M50,15 50,90 10,90 z" fill="#fff" stroke="#000" stroke-width="1"/>\n    </symbol>\n    <symbol id="rha" viewBox="0 0 100 100">\n      <path d="M50,15 90,90 10,90 z" fill="#00a651" stroke="#000" stroke-width="1"/>\n    </symbol>\n    <symbol id="ara" viewBox="0 0 100 100">\n<polyline fill="#00a651" stroke="#000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="\n  67.802,60.462 78.803,94.32 50.001,69.823 21.196,94.322 32.199,60.462 3.386,39.531 38.999,39.534 50,5.678 61.002,39.536 96.615,39.539 67.804,60.462 "/>\n    </symbol>\n    <symbol id="araf" viewBox="0 0 100 100">\n<polyline fill="#00a651" stroke="#000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="\n  67.802,60.462 78.803,94.32 50.001,69.823 21.196,94.322 32.199,60.462 3.386,39.531 38.999,39.534 50,5.678 61.002,39.536 96.615,39.539 67.804,60.462 "/>\n    <path stroke="#fff" fill="#fff" stroke-width="0" d="M51.2,39.9L50.3,44h-3.6L46,47.5h3.6L44.8,70h4.3l4.8-22.6h4.4l0.7-3.5h-4.3c0.6-2.8,1.1-4.6,1.5-5.3\n      c0.4-0.7,1.3-1,2.6-1c0.2,0,0.4,0,0.6,0c0.2,0,0.5,0,1,0.1l0.9-4c-0.4,0-0.7-0.1-1-0.1c-0.3,0-0.6,0-0.9,0c-2.9,0-5.1,0.7-6.4,2.2\n      C52.3,36.8,51.7,38.1,51.2,39.9z"/>\n    </symbol>\n    <symbol id="xyl" viewBox="0 0 100 100">\n<polyline fill="#f47920" stroke="#000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="\n  67.802,60.462 78.803,94.32 50.001,69.823 21.196,94.322 32.199,60.462 3.386,39.531 38.999,39.534 50,5.678 61.002,39.536 96.615,39.539 67.804,60.462 "/>\n    </symbol>\n    <symbol id="rib" viewBox="0 0 100 100">\n<polyline fill="#f69ea1" stroke="#000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="\n  67.802,60.462 78.803,94.32 50.001,69.823 21.196,94.322 32.199,60.462 3.386,39.531 38.999,39.534 50,5.678 61.002,39.536 96.615,39.539 67.804,60.462 "/>\n    </symbol>\n    <symbol id="rbo" viewBox="0 0 100 100">\n<polyline fill="#f69ea1" stroke="#000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="\n  67.802,60.462 78.803,94.32 50.001,69.823 21.196,94.322 32.199,60.462 3.386,39.531 38.999,39.534 50,5.678 61.002,39.536 96.615,39.539 67.804,60.462 "/>\n    <path stroke="#fff" fill="#fff" d="M52.7,48.3c-0.9-1.1-2.2-1.7-3.9-1.7c-1.9,0-3.5,0.7-4.9,2c-1.4,1.3-2.3,3.1-2.8,5.2\n      c-0.4,2.1-0.2,3.7,0.5,4.9c0.8,1.2,2.1,1.8,3.9,1.8c2.2,0,3.9-0.7,5.2-2.1c1.3-1.4,2.2-3.1,2.6-5.2C53.8,51.1,53.6,49.4,52.7,48.3\n      z M49.4,57c-0.8,1.1-1.9,1.7-3.4,1.7c-1.3,0-2.2-0.5-2.6-1.4c-0.4-0.9-0.5-2.1-0.2-3.5c0.3-1.4,0.9-2.7,1.7-3.7\n      c0.8-1,1.9-1.5,3.3-1.5c1.5,0,2.5,0.6,2.8,1.8c0.2,0.8,0.2,1.8,0,3C50.7,54.7,50.2,55.9,49.4,57z"/>\n    <path stroke="#fff" fill="#fff" d="M54.6,60.1h2.2l3.8-17.9h-2.2L54.6,60.1z"/>\n    </symbol>\n    <symbol id="hexa" viewBox="0 0 100 100">\n      <polyline fill="#fff" stroke="#000" stroke-width="1" points="50,5 95,50 5,50 50,5"/>\n      <polyline fill="#fff" stroke="#000" stroke-width="1" points="50,95 95,50 5,50 50,95"/>\n    </symbol>\n    <symbol id="glca" viewBox="0 0 100 100">\n      <polyline fill="#0090bc" stroke="#000" stroke-width="1" points="50,5 95,50 5,50 50,5"/>\n      <polyline fill="#fff" stroke="#000" stroke-width="1" points="50,95 95,50 5,50 50,95"/>\n    </symbol>\n    <symbol id="glcn" viewBox="0 0 100 100">\n      <polyline fill="#0090bc" stroke="#000" stroke-width="1" points="10,10 90,10 90,90 10,10"/>\n      <polyline fill="#fff" stroke="#000" stroke-width="1" points="10,10 90,90 10,90 10,10"/>\n    </symbol>\n    <symbol id="idoa" viewBox="0 0 100 100">\n      <polyline fill="#fff" stroke="#000" stroke-width="1" points="50,5 95,50 5,50 50,5"/>\n      <polyline fill="#a17a4d" stroke="#000" stroke-width="1" points="50,95 95,50 5,50 50,95"/>\n    </symbol>\n    <symbol id="cer" viewBox="0 0 100 100">\n      <path fill="#fff" stroke="#000" stroke-width="4" stroke-linecap="round" d="M35.8,15 64.2,15 75.5,27.2 64.2,38.3 75.5,50 64.2,61.1 75.5,72 64.2,83 75.5,94 L75.5,110 L35.8,110"/>\n      <path fill="#fff" stroke="#999" stroke-width="4" stroke-linecap="round"  d="M35.8,15 24.5,27.2 35.8,38.3 24.5,50 35.8,61.1 24.5,72 35.8,83 24.5,94"/>\n    </symbol>\n    \x3c!--\n    <symbol id="man(a1-2)man" viewBox="0 0 100 100">\n      <svg viewBox="0 0 100 100" x="0" y="0" width="100" height="50">\n        <circle cx="50" cy="50" fill="#00a651" r="40" stroke-width="1" stroke="#000"/>\n      </svg>\n      <svg viewBox="0 0 100 100" x="0" y="50" width="100" height="50">\n        <circle cx="50" cy="50" fill="#00a651" r="40" stroke-width="1" stroke="#000"/>\n      </svg>\n    </symbol>\n    <symbol id="neuac(a2-3)gal(b1-3)galnac" viewBox="0 0 100 100">\n      <svg viewBox="0 0 100 100" x="0" y="0" width="100" height="33">\n        <rect x="17" y="17" transform="rotate(45,50,50)" fill="#a54399" stroke="#000" stroke-width="1" width="66" height="66"/>\n      </svg>\n      <svg viewBox="0 0 100 100" x="0" y="33" width="100" height="33">\n        <circle cx="50" cy="50" fill="#ffd400" r="40" stroke-width="1" stroke="#000"/>\n      </svg>\n      <svg viewBox="0 0 100 100" x="0" y="66" width="100" height="33">\n        <rect x="10" y="10" width="80" height="80" fill="#ffd400" stroke-width="1" stroke="#000"/>\n      </svg>\n    </symbol>\n    <symbol id="gal(b1-3)galnac" viewBox="0 0 100 100">\n      <svg viewBox="0 0 100 100" x="0" y="0" width="100" height="50">\n        <circle cx="50" cy="50" fill="#ffd400" r="40" stroke-width="1" stroke="#000"/>\n      </svg>\n      <svg viewBox="0 0 100 100" x="0" y="50" width="100" height="50">\n        <rect x="10" y="10" width="80" height="80" fill="#ffd400" stroke-width="1" stroke="#000"/>\n      </svg>\n    </symbol>\n    <symbol id="glcnac(b1-4)glcnac" viewBox="0 0 100 100">\n      <svg viewBox="0 0 100 100" x="0" y="0" width="100" height="50">\n        <rect x="10" y="10" width="80" height="80" fill="#0090bc" stroke-width="1" stroke="#000"/>\n      </svg>\n      <svg viewBox="0 0 100 100" x="0" y="50" width="100" height="50">\n        <rect x="10" y="10" width="80" height="80" fill="#0090bc" stroke-width="1" stroke="#000"/>\n      </svg>\n    </symbol>\n    <symbol id="man(a1-3)[man(a1-6)]man(b1-4)glcnac(b1-4)glcnac" viewBox="0 0 100 100">\n      <svg viewBox="0 0 100 100" x="50" y="0" width="25" height="25">\n        <circle cx="50" cy="50" fill="#00a651" r="40" stroke-width="1" stroke="#000"/>\n      </svg>\n      <svg viewBox="0 0 100 100" x="25" y="0" width="25" height="25">\n        <circle cx="50" cy="50" fill="#00a651" r="40" stroke-width="1" stroke="#000"/>\n      </svg>\n      <svg viewBox="0 0 100 100" x="37.5" y="25" width="25" height="25">\n        <circle cx="50" cy="50" fill="#00a651" r="40" stroke-width="1" stroke="#000"/>\n      </svg>\n      <svg viewBox="0 0 100 100" x="37.5" y="50" width="25" height="25">\n        <rect x="10" y="10" width="80" height="80" fill="#0090bc" stroke-width="1" stroke="#000"/>\n      </svg>\n      <svg viewBox="0 0 100 100" x="37.5" y="75" width="25" height="25">\n        <rect x="10" y="10" width="80" height="80" fill="#0090bc" stroke-width="1" stroke="#000"/>\n      </svg>\n    </symbol>\n    <symbol id="glcnac(b1-4)glcnac.potential" viewBox="0 0 100 100">\n      <svg viewBox="0 0 100 100" x="0" y="0" width="100" height="50">\n        <rect x="10" y="10" width="80" height="80" fill="#67a2fc" stroke-width="0" stroke="#000"/>\n      </svg>\n      <svg viewBox="0 0 100 100" x="0" y="50" width="100" height="50">\n        <rect x="10" y="10" width="80" height="80" fill="#67a2fc" stroke-width="0" stroke="#000"/>\n      </svg>\n    </symbol>\n    --\x3e\n    <symbol id="phospho" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#fff" r="48" stroke-width="3" stroke="#000"/>\n      <text x="50" y="50" text-anchor="middle" stroke="#000" stroke-width="2" dy=".35em" dx="0.05em" font-size="50">P</text>\n    </symbol>\n    <symbol id="hso3" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#fdbbbb" r="35" stroke-width="4" stroke="#aa3030"/>\n      <path fill="#aa3030" stroke="none" stroke-width="2" d="M38.8,62.4c1.2,1.9,3,3.3,5.2,4.3c2.2,0.9,4.9,1.4,8.1,1.4c2.6,0,4.9-0.5,6.9-1.4c2-0.9,3.6-2.2,4.7-3.9\n        c1.1-1.7,1.6-3.5,1.6-5.4c0-1.9-0.5-3.6-1.5-5.1c-1-1.5-2.5-2.7-4.6-3.6c-1.4-0.7-4.1-1.4-7.9-2.3c-3.8-0.9-6.2-1.7-7.1-2.6\n        c-0.9-0.8-1.4-1.9-1.4-3.2c0-1.5,0.7-2.7,2-3.8c1.3-1,3.4-1.6,6.3-1.6c2.8,0,4.8,0.6,6.2,1.7c1.4,1.2,2.2,2.9,2.5,5.1l4.5-0.3\n        c-0.1-2.1-0.7-4-1.8-5.6c-1.1-1.7-2.6-2.9-4.7-3.8s-4.4-1.3-7-1.3c-2.4,0-4.6,0.4-6.6,1.2c-2,0.8-3.5,2-4.5,3.6\n        c-1,1.6-1.5,3.3-1.5,5.1c0,1.6,0.4,3.1,1.3,4.5c0.8,1.3,2.1,2.4,3.8,3.3c1.3,0.7,3.6,1.4,6.9,2.2c3.3,0.8,5.4,1.4,6.4,1.7\n        c1.5,0.6,2.6,1.3,3.2,2.1c0.7,0.8,1,1.8,1,2.9c0,1.1-0.3,2.1-1,3.1c-0.7,0.9-1.7,1.7-3.1,2.2c-1.4,0.5-3,0.8-4.8,0.8\n        c-2,0-3.9-0.4-5.5-1.1c-1.6-0.7-2.8-1.6-3.6-2.8c-0.8-1.1-1.3-2.6-1.5-4.4L36.8,56C36.9,58.4,37.5,60.5,38.8,62.4z"/>\n    </symbol>\n    <symbol id="hso3.2" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#fdbbbb" r="35" stroke-width="4" stroke="#aa3030"/>\n      <path fill="#aa3030" stroke="none" stroke-width="2" d="M36.9,58.1c0.3-0.5,0.7-1,1.1-1.4s1.5-1.4,3-2.7c1.9-1.6,3.2-2.9,4.1-3.8s1.4-1.8,1.8-2.6s0.5-1.7,0.5-2.5\n        c0-1.7-0.6-3.1-1.8-4.2S42.8,39,40.7,39c-2,0-3.7,0.5-4.9,1.6s-1.9,2.6-2.1,4.6l2.7,0.3c0-1.3,0.4-2.4,1.2-3.2s1.8-1.1,3-1.1\n        c1.2,0,2.2,0.4,2.9,1.1s1.1,1.6,1.1,2.6c0,1-0.4,2.1-1.2,3.2s-2.4,2.6-4.7,4.5c-1.5,1.2-2.7,2.3-3.5,3.3s-1.4,1.9-1.7,2.9\n        c-0.2,0.6-0.3,1.2-0.3,1.8h14.2v-2.5H36.9z"/>\n      <path fill="#aa3030" stroke="none" stroke-width="2" d="M51.5,57.6c0.7,1.1,1.8,2,3.1,2.6s2.9,0.8,4.9,0.8c1.5,0,2.9-0.3,4.1-0.8s2.2-1.3,2.8-2.4s1-2.1,1-3.2\n        c0-1.2-0.3-2.2-0.9-3.1s-1.5-1.6-2.8-2.2c-0.9-0.4-2.4-0.8-4.8-1.4s-3.7-1-4.3-1.5c-0.6-0.5-0.8-1.1-0.8-1.9\n        c0-0.9,0.4-1.6,1.2-2.3s2-0.9,3.8-0.9c1.7,0,2.9,0.3,3.7,1s1.3,1.7,1.5,3.1l2.7-0.2c0-1.3-0.4-2.4-1.1-3.4S64.2,40,63,39.5\n        s-2.6-0.8-4.2-0.8c-1.4,0-2.8,0.2-3.9,0.7s-2.1,1.2-2.7,2.1s-0.9,2-0.9,3c0,1,0.3,1.9,0.8,2.7s1.3,1.5,2.3,2\n        c0.8,0.4,2.2,0.9,4.1,1.3s3.2,0.8,3.8,1c0.9,0.3,1.5,0.8,1.9,1.3s0.6,1.1,0.6,1.8c0,0.7-0.2,1.3-0.6,1.8s-1,1-1.9,1.3\n        s-1.8,0.5-2.9,0.5c-1.2,0-2.3-0.2-3.3-0.6s-1.7-1-2.2-1.7s-0.8-1.6-0.9-2.6l-2.7,0.2C50.4,55.1,50.8,56.4,51.5,57.6z"/>\n    </symbol>\n    <symbol id="hso3.3" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#fdbbbb" r="35" stroke-width="4" stroke="#aa3030"/>\n      <path fill="#aa3030" stroke="none" stroke-width="2" d="M35.7,59.3c1.2,1.1,2.8,1.7,4.7,1.7c2.1,0,3.8-0.7,5.2-2s2.1-2.9,2.1-4.8c0-1.4-0.4-2.5-1.1-3.5\n        s-1.7-1.5-3-1.8c1-0.4,1.7-1.1,2.2-1.8s0.7-1.6,0.7-2.5c0-1-0.3-1.9-0.8-2.8s-1.3-1.6-2.3-2.1S41.5,39,40.3,39\n        c-1.7,0-3.1,0.5-4.3,1.5s-1.9,2.3-2.2,4.1l2.6,0.5c0.2-1.3,0.6-2.3,1.3-2.9s1.5-1,2.6-1c1,0,1.9,0.3,2.5,1s1,1.4,1,2.4\n        c0,1.2-0.4,2.1-1.3,2.7s-1.9,0.9-3,0.9c-0.1,0-0.2,0-0.4,0l-0.3,2.3c0.7-0.2,1.4-0.3,1.9-0.3c1.2,0,2.2,0.4,3,1.2s1.2,1.8,1.2,3\n        c0,1.3-0.4,2.3-1.3,3.2s-1.9,1.3-3.1,1.3c-1,0-1.9-0.3-2.7-1s-1.2-1.7-1.5-3.2l-2.6,0.4C33.8,56.7,34.5,58.2,35.7,59.3z"/>\n      <path fill="#aa3030" stroke="none" stroke-width="2" d="M51.5,57.6c0.7,1.1,1.8,2,3.1,2.6s2.9,0.8,4.9,0.8c1.5,0,2.9-0.3,4.1-0.8s2.2-1.3,2.8-2.4s1-2.1,1-3.2\n        c0-1.2-0.3-2.2-0.9-3.1s-1.5-1.6-2.8-2.2c-0.9-0.4-2.4-0.8-4.8-1.4s-3.7-1-4.3-1.5c-0.6-0.5-0.8-1.1-0.8-1.9\n        c0-0.9,0.4-1.6,1.2-2.3s2-0.9,3.8-0.9c1.7,0,2.9,0.3,3.7,1s1.3,1.7,1.5,3.1l2.7-0.2c0-1.3-0.4-2.4-1.1-3.4S64.2,40,63,39.5\n        s-2.6-0.8-4.2-0.8c-1.4,0-2.8,0.2-3.9,0.7s-2.1,1.2-2.7,2.1s-0.9,2-0.9,3c0,1,0.3,1.9,0.8,2.7s1.3,1.5,2.3,2\n        c0.8,0.4,2.2,0.9,4.1,1.3s3.2,0.8,3.8,1c0.9,0.3,1.5,0.8,1.9,1.3s0.6,1.1,0.6,1.8c0,0.7-0.2,1.3-0.6,1.8s-1,1-1.9,1.3\n        s-1.8,0.5-2.9,0.5c-1.2,0-2.3-0.2-3.3-0.6s-1.7-1-2.2-1.7s-0.8-1.6-0.9-2.6l-2.7,0.2C50.4,55.1,50.8,56.4,51.5,57.6z"/>\n    </symbol>\n    <symbol id="hso3.4" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#fdbbbb" r="35" stroke-width="4" stroke="#aa3030"/>\n      <path fill="#aa3030" stroke="none" stroke-width="2" d="M44.6,60.6v-5.1h2.9V53h-2.9V39.1h-2.2L32.7,53v2.4H42v5.1H44.6z M35.3,53l6.7-9.7V53H35.3z"/>\n      <path fill="#aa3030" stroke="none" stroke-width="2" d="M51.5,57.5c0.7,1.1,1.8,2,3.1,2.6s2.9,0.8,4.9,0.8c1.5,0,2.9-0.3,4.1-0.8c1.2-0.6,2.2-1.3,2.8-2.4\n        s1-2.1,1-3.2c0-1.2-0.3-2.2-0.9-3.1s-1.5-1.6-2.8-2.2c-0.9-0.4-2.4-0.8-4.8-1.4c-2.3-0.5-3.7-1-4.3-1.5c-0.6-0.5-0.8-1.1-0.8-1.9\n        c0-0.9,0.4-1.6,1.2-2.3s2-0.9,3.8-0.9c1.7,0,2.9,0.3,3.7,1s1.3,1.7,1.5,3.1l2.7-0.2c0-1.3-0.4-2.4-1.1-3.4s-1.6-1.8-2.8-2.3\n        s-2.6-0.8-4.2-0.8c-1.4,0-2.8,0.2-3.9,0.7s-2.1,1.2-2.7,2.1s-0.9,2-0.9,3c0,1,0.3,1.9,0.8,2.7s1.3,1.5,2.3,2\n        c0.8,0.4,2.2,0.9,4.1,1.3s3.2,0.8,3.8,1c0.9,0.3,1.5,0.8,1.9,1.3s0.6,1.1,0.6,1.8c0,0.7-0.2,1.3-0.6,1.8s-1,1-1.9,1.3\n        s-1.8,0.5-2.9,0.5c-1.2,0-2.3-0.2-3.3-0.6s-1.7-1-2.2-1.7s-0.8-1.6-0.9-2.6l-2.7,0.2C50.4,55.1,50.8,56.4,51.5,57.5z"/>\n    </symbol>\n    <symbol id="hso3.6" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#fdbbbb" r="35" stroke-width="4" stroke="#aa3030"/>\n      <path fill="#aa3030" stroke="none" stroke-width="2" d="M45.4,40.4c-1.1-0.9-2.5-1.4-4.2-1.4c-2.3,0-4.1,0.8-5.4,2.5c-1.5,1.9-2.3,4.9-2.3,9.1c0,3.7,0.7,6.4,2.1,8\n        s3.2,2.4,5.4,2.4c1.3,0,2.4-0.3,3.5-0.9s1.8-1.5,2.4-2.7s0.9-2.4,0.9-3.8c0-2.1-0.6-3.7-1.9-5s-2.7-1.9-4.5-1.9\n        c-1,0-2,0.2-2.9,0.7s-1.7,1.2-2.3,2.2c0-2.1,0.3-3.8,0.7-5s1.1-2,2-2.7c0.6-0.5,1.4-0.7,2.2-0.7c1,0,1.9,0.4,2.6,1.1\n        c0.4,0.5,0.8,1.2,1,2.3l2.6-0.2C47.1,42.7,46.5,41.4,45.4,40.4z M37.8,50.2c0.8-0.9,1.8-1.3,3-1.3c1.2,0,2.2,0.4,3,1.3\n        s1.2,2,1.2,3.5c0,1.5-0.4,2.8-1.2,3.7s-1.8,1.3-2.9,1.3c-0.8,0-1.5-0.2-2.2-0.7s-1.2-1.1-1.6-1.9s-0.6-1.7-0.6-2.6\n        C36.5,52.2,37,51.1,37.8,50.2z"/>\n      <path fill="#aa3030" stroke="none" stroke-width="2" d="M51.6,57.5c0.7,1.1,1.8,2,3.1,2.6s2.9,0.8,4.9,0.8c1.5,0,2.9-0.3,4.1-0.8c1.2-0.6,2.2-1.3,2.8-2.4\n        s1-2.1,1-3.2c0-1.2-0.3-2.2-0.9-3.1s-1.5-1.6-2.8-2.2c-0.9-0.4-2.4-0.8-4.8-1.4s-3.7-1-4.3-1.5c-0.6-0.5-0.8-1.1-0.8-1.9\n        c0-0.9,0.4-1.6,1.2-2.3s2-0.9,3.8-0.9c1.7,0,2.9,0.3,3.7,1s1.3,1.7,1.5,3.1l2.7-0.2c0-1.3-0.4-2.4-1.1-3.4S64.2,40,63,39.5\n        c-1.2-0.5-2.6-0.8-4.2-0.8c-1.4,0-2.8,0.2-3.9,0.7s-2.1,1.2-2.7,2.1s-0.9,2-0.9,3c0,1,0.3,1.9,0.8,2.7s1.3,1.5,2.3,2\n        c0.8,0.4,2.2,0.9,4.1,1.3s3.2,0.8,3.8,1c0.9,0.3,1.5,0.8,1.9,1.3c0.4,0.5,0.6,1.1,0.6,1.8c0,0.7-0.2,1.3-0.6,1.8\n        c-0.4,0.6-1,1-1.9,1.3s-1.8,0.5-2.9,0.5c-1.2,0-2.3-0.2-3.3-0.6s-1.7-1-2.2-1.7s-0.8-1.6-0.9-2.6l-2.7,0.2\n        C50.5,55.1,50.9,56.4,51.6,57.5z"/>\n    </symbol>\n    <symbol id="hso3.N" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#fdbbbb" r="35" stroke-width="4" stroke="#aa3030"/>\n      <path fill="#aa3030" stroke="none" stroke-width="2" d="M34.9,60.6V43.7l11.3,16.9H49V39.1h-2.7v16.9L35,39.1h-2.9v21.5H34.9z"/>\n      <path fill="#aa3030" stroke="none" stroke-width="2" d="M54,57.5c0.7,1.1,1.8,2,3.1,2.6s2.9,0.8,4.9,0.8c1.5,0,2.9-0.3,4.1-0.8s2.2-1.3,2.8-2.4s1-2.1,1-3.2\n        c0-1.2-0.3-2.2-0.9-3.1s-1.5-1.6-2.8-2.2c-0.9-0.4-2.4-0.8-4.8-1.4s-3.7-1-4.3-1.5c-0.6-0.5-0.8-1.1-0.8-1.9\n        c0-0.9,0.4-1.6,1.2-2.3s2-0.9,3.8-0.9c1.7,0,2.9,0.3,3.7,1s1.3,1.7,1.5,3.1l2.7-0.2c0-1.3-0.4-2.4-1.1-3.4s-1.6-1.8-2.8-2.3\n        s-2.6-0.8-4.2-0.8c-1.4,0-2.8,0.2-3.9,0.7s-2.1,1.2-2.7,2.1s-0.9,2-0.9,3c0,1,0.3,1.9,0.8,2.7s1.3,1.5,2.3,2\n        c0.8,0.4,2.2,0.9,4.1,1.3s3.2,0.8,3.8,1c0.9,0.3,1.5,0.8,1.9,1.3s0.6,1.1,0.6,1.8c0,0.7-0.2,1.3-0.6,1.8s-1,1-1.9,1.3\n        c-0.8,0.3-1.8,0.5-2.9,0.5c-1.2,0-2.3-0.2-3.3-0.6s-1.7-1-2.2-1.7s-0.8-1.6-0.9-2.6l-2.7,0.2C52.9,55.1,53.3,56.4,54,57.5z"/>\n    </symbol>\n    <symbol id="p" viewBox="0 0 100 100">\n      <circle cx="50" cy="50" fill="#bbe5fa" r="35" stroke-width="4" stroke="#2f5fac"/>\n      <path fill="#2f5fac" stroke="none" stroke-width="2" d="M43.1,67.5V53h9.2c5.1,0,8.6-1.1,10.5-3.2c1.9-2.1,2.9-4.7,2.9-7.7c0-1.8-0.4-3.4-1.1-4.9\n        c-0.7-1.5-1.7-2.6-2.9-3.5c-1.2-0.8-2.7-1.4-4.4-1.7c-1.3-0.2-3.1-0.3-5.4-0.3H38.4v35.8H43.1z M43.1,36h9.2\n        c2.1,0,3.6,0.1,4.4,0.3c1.2,0.3,2.2,1,3,2.1c0.8,1.1,1.1,2.3,1.1,3.8c0,2.1-0.6,3.7-1.9,4.8c-1.3,1.1-3.5,1.7-6.5,1.7h-9.3V36z"/>\n    </symbol>\n    <symbol id="ser" viewBox="0 0 100 100">\n      <path d="M20,50 a1,1 0 0,0 30,0 a1,1 0 0,1 30,0" fill="none" stroke="#000" stroke-width="1"/>\n      <path d="M22.2,88.5c1,1.5,2.4,2.7,4.1,3.4c1.8,0.8,3.9,1.1,6.5,1.1c2,0,3.9-0.4,5.5-1.1c1.6-0.7,2.9-1.8,3.8-3.1\n        c0.9-1.3,1.3-2.8,1.3-4.3c0-1.5-0.4-2.9-1.2-4.1c-0.8-1.2-2-2.2-3.7-2.9c-1.1-0.5-3.3-1.1-6.3-1.8c-3.1-0.7-5-1.4-5.7-2\n        c-0.7-0.7-1.1-1.5-1.1-2.5c0-1.2,0.5-2.2,1.6-3c1-0.8,2.7-1.3,5-1.3c2.2,0,3.9,0.5,5,1.4c1.1,0.9,1.8,2.3,2,4.1l3.6-0.3\n        c-0.1-1.7-0.5-3.2-1.4-4.5c-0.9-1.3-2.1-2.3-3.7-3s-3.5-1-5.6-1c-1.9,0-3.7,0.3-5.3,1C25,65.1,23.8,66,23,67.3s-1.2,2.6-1.2,4.1\n        c0,1.3,0.3,2.5,1,3.6c0.7,1.1,1.7,2,3.1,2.7c1.1,0.6,2.9,1.2,5.5,1.8c2.6,0.6,4.3,1.1,5.1,1.4c1.2,0.5,2.1,1,2.6,1.7\n        c0.5,0.7,0.8,1.5,0.8,2.4c0,0.9-0.3,1.7-0.8,2.5c-0.5,0.7-1.4,1.3-2.5,1.8c-1.1,0.4-2.4,0.6-3.8,0.6c-1.6,0-3.1-0.3-4.4-0.8\n        c-1.3-0.6-2.3-1.3-2.9-2.2c-0.6-0.9-1-2.1-1.2-3.5l-3.6,0.3C20.7,85.3,21.2,87,22.2,88.5z"/>\n      <path d="M60.2,89.1c-0.9,0.7-2,1-3.3,1c-1.7,0-3.2-0.6-4.3-1.8c-1.2-1.2-1.8-3-1.9-5.2h15.5c0-0.4,0-0.7,0-0.9\n        c0-3.4-0.9-6.1-2.6-8s-4-2.8-6.8-2.8c-2.9,0-5.2,1-7,2.9S47,78.9,47,82.4c0,3.4,0.9,6,2.7,7.9s4.2,2.8,7.2,2.8\n        c2.4,0,4.4-0.6,5.9-1.8c1.5-1.2,2.6-2.8,3.2-4.9l-3.6-0.4C61.8,87.4,61.1,88.5,60.2,89.1z M52.6,75.9c1.1-1.1,2.5-1.6,4.1-1.6\n        c1.8,0,3.2,0.7,4.4,2c0.7,0.9,1.2,2.2,1.3,3.9H50.8C50.9,78.4,51.5,77,52.6,75.9z"/>\n      <path d="M73.9,92.6V81.7c0-1.5,0.2-2.9,0.6-4.1c0.3-0.8,0.7-1.5,1.3-1.9c0.6-0.5,1.3-0.7,2.1-0.7c0.9,0,1.7,0.3,2.6,0.8l1.2-3.3\n        c-1.2-0.8-2.4-1.1-3.6-1.1c-0.8,0-1.6,0.2-2.3,0.7s-1.4,1.4-2.2,2.9v-3.1h-3.2v20.7H73.9z"/>\n\n    </symbol>\n    <symbol id="thr" viewBox="0 0 100 100">\n      <path d="M20,50 a1,1 0 0,0 30,0 a1,1 0 0,1 30,0" fill="none" stroke="#000" stroke-width="1"/>\n      <path d="M34.1,92.6V67.3h9.5V64H20.9v3.4h9.4v25.3H34.1z"/>\n      <path d="M50.6,92.6V81.2c0-1.6,0.2-2.9,0.6-3.8s1-1.7,2-2.2s1.9-0.8,2.9-0.8c1.4,0,2.5,0.4,3.2,1.2s1.1,2.1,1.1,3.8v13.1h3.5V79.4\n        c0-2-0.2-3.6-0.7-4.6s-1.3-1.9-2.4-2.5s-2.5-0.9-4-0.9c-2.5,0-4.6,1-6.2,2.9V64H47v28.6H50.6z"/>\n      <path d="M72.8,92.6V81.7c0-1.5,0.2-2.9,0.6-4.1c0.3-0.8,0.7-1.5,1.3-1.9c0.6-0.5,1.3-0.7,2.1-0.7c0.9,0,1.7,0.3,2.6,0.8l1.2-3.3\n        c-1.2-0.8-2.4-1.1-3.6-1.1c-0.8,0-1.6,0.2-2.3,0.7s-1.4,1.4-2.2,2.9v-3.1h-3.2v20.7H72.8z"/>\n    </symbol>\n    <symbol id="asn" viewBox="0 0 100 100">\n      <path d="M20,50 a1,1 0 0,0 30,0 a1,1 0 0,1 30,0" fill="none" stroke="#000" stroke-width="1"/>\n      <path d="M19.4,92.6l3.1-8.7h12l3.3,8.7h4.3L30.5,64h-4.1l-11,28.6H19.4z M26.8,72.4c0.7-1.8,1.2-3.6,1.5-5.5\n        c0.4,1.5,1.1,3.5,2,5.9l3,7.9h-9.7L26.8,72.4z"/>\n      <path d="M46.1,91.4c1.4,1.1,3.5,1.7,6.2,1.7c1.6,0,3.1-0.3,4.4-0.8s2.3-1.4,3-2.4s1-2.1,1-3.3c0-1.2-0.3-2.2-0.8-3\n        c-0.6-0.8-1.3-1.4-2.3-1.8c-1-0.4-2.7-1-5.2-1.6c-1.7-0.5-2.8-0.8-3.1-0.9c-0.6-0.2-1.1-0.6-1.3-0.9c-0.3-0.4-0.4-0.8-0.4-1.2\n        c0-0.7,0.3-1.3,1-1.9c0.7-0.5,1.8-0.8,3.5-0.8c1.4,0,2.4,0.3,3.2,0.9c0.7,0.6,1.2,1.4,1.4,2.5l3.4-0.5c-0.2-1.3-0.6-2.4-1.2-3.2\n        s-1.5-1.4-2.7-1.9s-2.7-0.7-4.3-0.7c-1.1,0-2.1,0.1-3,0.4c-0.9,0.3-1.7,0.6-2.2,1c-0.7,0.5-1.3,1.2-1.7,2\n        c-0.4,0.8-0.6,1.6-0.6,2.6c0,1,0.3,1.9,0.8,2.8c0.5,0.8,1.3,1.5,2.3,2s2.8,1,5.4,1.7c1.9,0.5,3.1,0.9,3.6,1.2c0.7,0.5,1,1.1,1,1.9\n        c0,0.9-0.4,1.7-1.2,2.3s-2,1-3.6,1c-1.6,0-2.8-0.4-3.7-1.1c-0.9-0.7-1.4-1.8-1.6-3.2l-3.5,0.5C43.8,88.6,44.7,90.3,46.1,91.4z"/>\n      <path d="M68.3,92.6V81.3c0-2.7,0.5-4.5,1.6-5.4c1.1-1,2.4-1.4,3.9-1.4c0.9,0,1.8,0.2,2.5,0.6c0.7,0.4,1.2,1,1.5,1.7\n        s0.4,1.8,0.4,3.2v12.6h3.5V79.8c0-1.6-0.1-2.8-0.2-3.4c-0.2-1-0.6-1.9-1.1-2.6c-0.5-0.7-1.3-1.3-2.4-1.8c-1-0.4-2.2-0.7-3.4-0.7\n        c-2.9,0-5.1,1.1-6.6,3.4v-2.9h-3.2v20.7H68.3z"/>\n    </symbol>\n    <symbol id="hyl" viewBox="0 0 100 100">\n      <path d="M20,50 a1,1 0 0,0 30,0 a1,1 0 0,1 30,0" fill="none" stroke="#000" stroke-width="1"/>\n      <path d="M28.1,92.6V79.1H43v13.5h3.8V64H43v11.8H28.1V64h-3.8v28.6H28.1z"/>\n      <path d="M54.7,101c1.1,0,2.1-0.3,2.9-0.8c0.8-0.5,1.5-1.4,2.1-2.5c0.5-0.9,1.1-2.4,2-4.7l7.9-21.1h-3.5l-4.4,12.1\n        c-0.6,1.5-1,3.1-1.4,4.7c-0.4-1.7-0.9-3.3-1.5-4.8l-4.3-12h-3.8l7.9,20.8c-0.1,0.4-0.2,0.7-0.3,0.9c-0.5,1.4-0.9,2.3-1.1,2.6\n        c-0.3,0.5-0.7,0.8-1.2,1.1s-1.1,0.4-1.9,0.4c-0.6,0-1.2-0.1-2-0.3l0.4,3.3C53.3,100.9,54.1,101,54.7,101z"/>\n      <path d="M76.1,92.6V64h-3.5v28.6H76.1z"/>\n    </symbol>\n    <symbol id="etnp" viewBox="0 0 100 100">\n      <path d="M50,15.1 L66.2,26.9 L60,45.9 L40,45.9 L33.8,26.9" fill="#000"/>\n      <circle cx="50" cy="70" fill="#bbe5fa" r="15" stroke-width="2" stroke="#2f5fac"/>\n      <path fill="#2f5fac" stroke="none" stroke-width="2" d="M47,70.5v0h4.5c2.5,0,4.3-0.55,5.25-1.6c0.95-1.05,1.45-2.35,1.45-3.85c0-0.9-0.2-1.7-0.55-2.45c-0.35-0.75-0.85-1.3-1.45-1.75c-0.6-0.4-1.35-0.7-2.2-0.85c-0.65-0.1-1.55-0.15-2.7-0.15h-8v17.9h3.6z m-0.5,-8.5h4.6\nc1.05,0,1.8,0.05,2.2,0.15\nc0.6,0.15,1.1,0.5,1.5,1.05c0.4,0.55,0.55,1.15,0.55,1.9c0,1.05-0.3,1.85-0.95,2.4c-0.65,0.55-1.75,0.85-3.25,0.85h-4.65v-7z"/>\n    </symbol>\n    <symbol id="dol-pp" viewBox="0 0 100 100">\n      <circle cx="50" cy="20" fill="#bbe5fa" r="7.5" stroke-width="2" stroke="#2f5fac"/>\n      <circle cx="50" cy="40" fill="#bbe5fa" r="7.5" stroke-width="2" stroke="#2f5fac"/>\n      <path fill="none" stroke="#999" stroke-width="4" stroke-linecap="round"  d="M50,50 55.8,61.1 44.5,72 55.8,83 44.5,94"/>\n    </symbol>\n    <symbol id="dol-p" viewBox="0 0 100 100">\n      <circle cx="50" cy="20" fill="#bbe5fa" r="7.5" stroke-width="2" stroke="#2f5fac"/>\n      <path fill="none" stroke="#999" stroke-width="4" stroke-linecap="round"  d="M50,27.5 55.8,38.9 44.5,50 55.8,61.1 44.5,72 55.8,83 44.5,94"/>\n    </symbol>\n\n    <symbol id="pi" viewBox="0 0 100 100">\n  <path d="M40.5,37.048h12.039c2.38,0,4.302,0.674,5.765,2.023c1.464,1.35,2.196,3.245,2.196,5.687c0,2.101-0.653,3.929-1.959,5.486\n    c-1.306,1.557-3.304,2.336-5.996,2.336h-8.401v11.373H40.5V37.048z M54.636,40.747c-0.799-0.378-1.897-0.567-3.291-0.567h-7.201\n    v9.323h7.201c1.625,0,2.943-0.348,3.955-1.044s1.519-1.923,1.519-3.681C56.819,42.799,56.091,41.456,54.636,40.747z"/>\n<polyline fill="none" stroke="#000000" stroke-miterlimit="10" points="12.076,90.888 12.076,54.475 33.525,54.475 "/>\n<line fill="none" stroke="#000000" stroke-miterlimit="10" x1="22.8" y1="80.746" x2="22.8" y2="54.475"/>\n<polygon fill="#fff" stroke="#000000" stroke-miterlimit="10" points="50.482,3.475 38.46,10.415 38.46,24.297 50.482,31.237 \n  62.503,24.297 62.503,10.415 "/>\n<line fill="none" stroke="#000000" stroke-miterlimit="10" x1="50.482" y1="35.021" x2="50.482" y2="31.237"/>\n    </symbol>\n\n  </defs>\n  \x3c!--\n  <g>\n    <rect x="0" y="0" width="100" height="100" stroke-width="0.1" stroke="#000" fill="none"/>\n    <text x="20" y="50" font-family="helvetica">100 x 100</text>\n    <text x="0" y="15"  font-family="helvetica">0</text>\n    <text x="70" y="100"  font-family="helvetica">100</text>\n  </g>\n  --\x3e\n  <use xlink:href="#galnac" x="100" y="100" width="100" height="100"/>\n  <use xlink:href="#glcnac" x="200" y="100" width="100" height="100"/>\n  <use xlink:href="#man" x="300" y="100" width="100" height="100"/>\n  <use xlink:href="#glc" x="400" y="100" width="100" height="100"/>\n  <text x="150" text-anchor="middle" y="210">GalNAc</text>\n  <text x="250" text-anchor="middle" y="210">GlcNAc</text>\n  <text x="350" text-anchor="middle" y="210">Mannose</text>\n  <text x="450" text-anchor="middle" y="210">Glucose</text>\n  <use xlink:href="#fuc" x="100" y="250" width="100" height="100"/>\n  <use xlink:href="#neu" x="200" y="250" width="100" height="100"/>\n  <use xlink:href="#neuac" x="300" y="250" width="100" height="100"/>\n  <use xlink:href="#neugc" x="400" y="250" width="100" height="100"/>\n  <text x="150" text-anchor="middle" y="370">Fucose</text>\n  <text x="250" text-anchor="middle" y="370">Sialic acid</text>\n  <text x="350" text-anchor="middle" y="370">NeuAc</text>\n  <text x="450" text-anchor="middle" y="370">NeuGc</text>\n\n  <use xlink:href="#ara" x="100" y="400" width="100" height="100"/>\n  <use xlink:href="#xyl" x="200" y="400" width="100" height="100"/>\n  <use xlink:href="#glca" x="300" y="400" width="100" height="100"/>\n  <use xlink:href="#idoa" x="400" y="400" width="100" height="100"/>\n\n  <text x="150" text-anchor="middle" y="510">Arabinose</text>\n  <text x="250" text-anchor="middle" y="510">Xylose</text>\n  <text x="350" text-anchor="middle" y="510">GlcA</text>\n  <text x="450" text-anchor="middle" y="510">IdoA</text>\n\n  <use xlink:href="#hexa" x="100" y="550" width="100" height="100"/>\n  <use xlink:href="#hex" x="200" y="550" width="100" height="100"/>\n  <use xlink:href="#hexnac" x="300" y="550" width="100" height="100"/>\n  <use xlink:href="#p" x="400" y="550" width="100" height="100"/>\n\n  <text x="150" text-anchor="middle" y="660">HexA</text>\n  <text x="250" text-anchor="middle" y="660">Hexose</text>\n  <text x="350" text-anchor="middle" y="660">HexNAc</text>\n  <text x="450" text-anchor="middle" y="660">P</text>\n\n  <use xlink:href="#ser" x="100" y="700" width="100" height="100"/>\n  <use xlink:href="#thr" x="200" y="700" width="100" height="100"/>\n  <use xlink:href="#asn" x="300" y="700" width="100" height="100"/>\n  <use xlink:href="#hyl" x="400" y="700" width="100" height="100"/>\n\n  <text x="150" text-anchor="middle" y="810">Ser</text>\n  <text x="250" text-anchor="middle" y="810">Thr</text>\n  <text x="350" text-anchor="middle" y="810">Asn</text>\n  <text x="450" text-anchor="middle" y="810">HyL</text>\n\n  <use xlink:href="#hso3" x="100" y="850" width="100" height="100"/>\n  <use xlink:href="#cer" x="200" y="850" width="100" height="100"/>\n  <use xlink:href="#hso3.2" x="300" y="850" width="100" height="100"/>\n  <use xlink:href="#hso3.3" x="400" y="850" width="100" height="100"/>\n\n  <text x="150" text-anchor="middle" y="960">HSO3</text>\n  <text x="250" text-anchor="middle" y="960">Cer</text>\n  <text x="350" text-anchor="middle" y="960">2S</text>\n  <text x="450" text-anchor="middle" y="960">3S</text>\n\n\n  <use xlink:href="#hso3.4" x="100" y="1000" width="100" height="100"/>\n  <use xlink:href="#hso3.6" x="200" y="1000" width="100" height="100"/>\n  <use xlink:href="#hso3.N" x="300" y="1000" width="100" height="100"/>\n  <use xlink:href="#glcn" x="400" y="1000" width="100" height="100"/>\n\n  <text x="150" text-anchor="middle" y="1110">4S</text>\n  <text x="250" text-anchor="middle" y="1110">6S</text>\n  <text x="350" text-anchor="middle" y="1110">NS</text>\n  <text x="450" text-anchor="middle" y="1110">GlcN</text>\n\n\n  <use xlink:href="#etnp" x="100" y="1150" width="100" height="100"/>\n  <use xlink:href="#pi" x="200" y="1150" width="100" height="100"/>\n  <use xlink:href="#dol-pp" x="300" y="1150" width="100" height="100"/>\n  <use xlink:href="#dol-p" x="400" y="1150" width="100" height="100"/>\n\n  <text x="150" text-anchor="middle" y="1260">Etnp</text>\n  <text x="250" text-anchor="middle" y="1260">PI</text>\n  <text x="350" text-anchor="middle" y="1260">Dol-PP</text>\n  <text x="450" text-anchor="middle" y="1260">Dol-P</text>\n\n\n</svg>\n'},function(t,e,r){"use strict";(function(t){var n=r(6),i=r(3),o=r(9),s=r(12),a=r(19);function c(t,e,r,n,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,i)}function l(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){c(o,n,i,s,a,"next",t)}function a(t){c(o,n,i,s,a,"throw",t)}s(void 0)}))}}var u=Symbol("document_container"),h="object"!=typeof t||"object"!=typeof t.versions||void 0===t.versions.node?r(15).default:"",d=Object(i.a)("glycanjs:canvasrenderer"),f=Symbol("done_tween"),p=(t,e)=>(t.x.push(e[0]),t.y.push(e[1]),t);class m{constructor(t){this._mat=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix(),this._mat.a=t[0],this._mat.b=t[1],this._mat.c=t[2],this._mat.d=t[3],this._mat.e=t[4],this._mat.f=t[5]}applyToPoint(t,e){var r=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGPoint();return r.x=t,r.y=e,r.matrixTransform(this._mat)}inverse(){var t=this._mat.inverse(),e=[t.a,t.b,t.c,t.d,t.e,t.f];return new m(e)}multiply(t){var e=this._mat.multiply(t._mat),r=[e.a,e.b,e.c,e.d,e.e,e.f];return new m(r)}}var g,v=function(t,e){var r=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:[],y:[]};if(e.torender){for(var n of e.torender)r=t(n,r);return r}return e.x2&&(p(r,[e.x,e.y]),p(r,[e.x2,e.y2])),e.width&&(p(r,[e.x,e.y]),p(r,[e.x+e.width,e.y+e.height])),e.text&&(p(r,[e.x,e.y]),p(r,[e.x,e.y])),r}(e);r.x=r.x.map((t,e,r)=>{if(e%2==0)return.5*(t+r[e+1])}).filter(t=>void 0!==t),r.y=r.y.map((t,e,r)=>{if(e%2==0)return.5*(t+r[e+1])}).filter(t=>void 0!==t);var n=Math.min(...r.x)-100,i=Math.max(...r.x)+100,o=Math.min(...r.y)-100,s=Math.max(...r.y)+100;t.width=1*(i-n),t.height=1*(s-o);var c,l=t.getContext("2d"),{width:u,height:h}=t.getBoundingClientRect(),d=t.height,f=h||1,g=t.width,v=u||1;if(d>g){var y=new m([d/f,0,0,d/f,0,0]).multiply(new m([1,0,0,1,-.5*v,0]));c=new m([1,0,0,1,.5*g,0]).multiply(y)}else{var b=new m([g/v,0,0,g/v,0,0]).multiply(new m([1,0,0,1,0,-.5*f]));c=new m([1,0,0,1,0,.5*d]).multiply(b)}l.setTransform(1,0,0,1,-1*n,-1*o),t.cm=new a.a(l,{handleScale:!1,handleTransforms:!0,matrix:new m([1,0,0,1,-1*n,-1*o])}),t.cm.centering_matrix=c,t.screenToCanvasMatrix=new m([1,0,0,1,-1*n,-1*o]).inverse().multiply(c),function t(e,r){if(r.torender)for(var n of r.torender)t(e,n);else r.render&&r.render(e)}(t,e)},y=t=>{var e={};if(e.fill=t.getAttribute("fill"),t.getAttribute("stroke-width")&&parseFloat(t.getAttribute("stroke-width"))>0&&(e.stroke=t.getAttribute("stroke")),t.getAttribute("transform")){var[r,n,i,o]=t.getAttribute("transform").match(/rotate\((\d+),(\d+),(\d+)\)/);r.length>0&&(e.rotate={angle:n,cx:i,cy:o})}return e},b=t=>{var e=[];for(var r of t.querySelectorAll("path")){var n=y(r);n.d=r.getAttribute("d"),e.push(n)}for(var i of t.querySelectorAll("circle")){var o=y(i);o.cx=parseFloat(i.getAttribute("cx")),o.cy=parseFloat(i.getAttribute("cy")),o.r=parseFloat(i.getAttribute("r")),e.push(o)}for(var s of t.querySelectorAll("rect")){var a=y(s),c=s.getAttribute("x"),l=s.getAttribute("y"),u=parseFloat(s.getAttribute("x"))+parseFloat(s.getAttribute("width")),h=parseFloat(s.getAttribute("y"))+parseFloat(s.getAttribute("height"));a.d="M".concat(c,",").concat(l," ").concat(u,",").concat(l," ").concat(u,",").concat(h," ").concat(c,",").concat(h," z"),e.push(a)}for(var d of t.querySelectorAll("polyline")){var f=y(d);f.d="M"+d.getAttribute("points")+"Z",e.push(f)}for(var p of t.querySelectorAll("text")){var m=y(p);m.fontSize=p.getAttribute("font-size"),m.text=p.textContent;var g=p.getAttribute("x"),v=p.getAttribute("y");m.x=g,m.y=v,e.push(m)}return e},w=Symbol("global_symbols"),x=Symbol("performing_import"),_=new WeakMap,T=function(t,e){if(e.clientX){var r=t.getBoundingClientRect(),n=t.screenToCanvasMatrix.applyToPoint(e.clientX-r.x,e.clientY-r.y),i=n.x/100,o=n.y/100;e.sugarX=i,e.sugarY=o}},E=(t,e,r)=>(e*=100,(t*=100)>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height),N=(t,e)=>({left:t,top:e,width:0,height:0}),S=function(t){if(t.sugarX||t.sugarY){var e=[...this.iconset].filter(E.bind(null,t.sugarX,t.sugarY)),r=t.type;for(var n of e)if(n.hasElement()){t.stopImmediatePropagation();var i=new Event(r,{bubbles:!0});return n.element.getBoundingClientRect=N.bind(null,t.clientX,t.clientY),n.element.dispatchEvent(i),void("dragover"===r&&this.last_dragenter!==n&&(this.last_dragenter&&(delete this.last_dragenter,i=new Event("dragleave",{bubbles:!0}),n.element.dispatchEvent(i)),i=new Event("dragenter",{bubbles:!0}),n.element.dispatchEvent(i),this.last_dragenter=n))}if(e.length<1&&"dragover"===r&&this.last_dragenter){var o=new Event("dragleave",{bubbles:!0});this.last_dragenter.element.dispatchEvent(o),delete this.last_dragenter}}};class O extends o.a{constructor(t,e){var r;if(d("CanvasRenderer"),super(t,e),Object(n.autoPlay)(!0),this.iconset=new Set,Object(n.onTick)(()=>{this.animating&&this.paint()}),this.ready=g.call(this),t)for(var i of(t instanceof HTMLCanvasElement?r=t:(this[u]=t,d.info("Creating canvas element"),(r=t.ownerDocument.createElement("canvas")).setAttribute("width","1px"),r.setAttribute("height","1px"),t.appendChild(r)),this.element=new s.a(r),function(t,e){for(var r of"mousemove mousedown mouseup click touchstart touchend touchmove drop dragover".split(" "))t.addEventListener(r,e,{passive:!0,capture:!0})}(this.element.canvas,T.bind(this,this.element.canvas)),["click","dragover"]))this.element.canvas.addEventListener(i,S.bind(this),{capture:!0})}static get Canvas(){return s.a}static get SYMBOLS(){return h}static get GLOBAL_SCALE(){return 100}get animating(){for(var t of this.iconset)if(!t.rendered)return!0;return!1}setupContainer(t,e){var r=this.element;if(t||(t=r.group(),this.rendered.set(e,t)),this.groupTag&&!t.tagGroup&&(t.tagGroup=t.group()),t.tagGroup)for(var n of t.tagGroup.element.childNodes)t.appendChild(n);return t}renderLinkageGroup(t){return t.group()}renderLinkageLabel(t,e,r,n,i,o){var s=t.text(e,r,n);return!i&&o<0&&(s["text-anchor"]="end"),s}removeRendered(t){t.residue&&(t.residue.parent.remove(t.residue),t.residue.element&&t.residue.element.parentNode.removeChild(t.residue.element),this.iconset.has(t.residue)&&this.iconset.delete(t.residue)),t.linkage&&t.linkage.parent.remove(t.linkage)}setIconPosition(t,e,r,i,o,s){_.get(t)&&_.get(t).stop(),_.set(t,new n.Tween(t));var a=_.get(t),c=200;t.rendered=!1,clearTimeout(t[f]),t.x!==e||t.y!==r||t.width!==i||t.height!==o?(this.iconset.has(t)||(this.iconset.add(t),t.x=e,t.y=r,t.width=i,t.height=o,t.rotate=s,c=0,t.rendered=!0),a.to({x:e,y:r,width:i,height:o,rotate:s},c).on("complete",t=>{t[f]=setTimeout(()=>{t.rendered=!0},100)}).start()):t.rendered=!0}screenCoordinatesFromLayout(t){var e=this.element.canvas,r={x:0,y:0},n=t.x+t.width,i=t.y+t.height;r.x=100*t.x,r.y=100*t.y;var o=e.screenToCanvasMatrix.inverse().applyToPoint(r.x,r.y);return t.x=o.x,t.y=o.y,r.x=100*n,r.y=100*i,o=e.screenToCanvasMatrix.inverse().applyToPoint(r.x,r.y),t.width=o.x-t.x,t.height=o.y-t.y,t.x+=e.getBoundingClientRect().x,t.y+=e.getBoundingClientRect().y,t}renderIcon(t,e){var r=t.use(e,0,0,1,1);r.src=this.symbols[e].svg,r.paths=this.symbols[e].paths;var n=this.element.canvas;return Object.defineProperty(r,"element",{get:function(){return this._element||(this._element=n.ownerDocument.createElement("button"),n.appendChild(this._element)),this._element}}),r.hasElement=()=>"_element"in r,r}scaleToFit(){}paint(){v(this.element.canvas,this.element)}refresh(){var t=this;return l((function*(){return t.ready.then(l((function*(){yield o.a.prototype.refresh.call(t),t.paint()})))}))()}}O[w]=null,O[x]=!1,g=function(){var t=document.createElement("svg");return O[x]?new Promise(t=>{setTimeout(()=>{g.call(this).then(t)},0)}):null!==O[w]?(this.symbols=O[w],Promise.resolve()):(O[x]=!0,this.symbols={},Promise.resolve().then(()=>t.innerHTML=h).then(()=>{for(var e of t.querySelectorAll("defs symbol")){var r=e.innerHTML.replace(/#/g,"%23"),n=b(e),i='data:image/svg+xml;utf8,<svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" x="0" y="0" width="100px" height="100px">'.concat(r,"</svg>");this.symbols[e.getAttribute("id")]={svg:i,paths:n}}O[w]=this.symbols,O[x]=!1}))},O.DEFAULT_PADDING={top:0,side:0},e.a=O}).call(this,r(4))},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(52),i=r(53),o=r(31);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,r)}function l(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=d(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(c.isBuffer(e)){var r=0|f(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?a(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=a(t,e<0?0:0|f(e)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function d(t,e){var r=e.length<0?0:0|f(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function f(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(n)return H(t).length;e=(""+e).toLowerCase(),n=!0}}function m(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return S(this,e,r);case"ascii":return O(this,e,r);case"latin1":case"binary":return C(this,e,r);case"base64":return N(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function v(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:y(t,e,r,n,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):y(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,r,n,i){var o,s=1,a=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,r/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var u=-1;for(o=r;o<a;o++)if(l(t,o)===l(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(r+c>a&&(r=a-c),o=r;o>=0;o--){for(var h=!0,d=0;d<c;d++)if(l(t,o+d)!==l(e,d)){h=!1;break}if(h)return o}return-1}function b(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function w(t,e,r,n){return U(H(e,t.length-r),t,r,n)}function x(t,e,r,n){return U(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r,n){return x(t,e,r,n)}function T(t,e,r,n){return U(G(e),t,r,n)}function E(t,e,r,n){return U(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function N(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function S(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,c,l=t[i],u=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(u=l);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,h=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,r){return l(null,t,e,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,r){return function(t,e,r,n){return u(e),e<=0?a(t,e):void 0!==r?"string"==typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=c.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?S(this,0,t):m.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,r,n,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),l=this.slice(n,i),u=t.slice(e,r),h=0;h<a;++h)if(l[h]!==u[h]){o=l[h],s=u[h];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return v(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return v(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":return x(this,t,e,r);case"latin1":case"binary":return _(this,t,e,r);case"base64":return T(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function C(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function A(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=B(t[o]);return i}function M(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function k(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,r,n,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function P(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function L(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(t,e,r,n,o){return o||L(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function F(t,e,r,n,o){return o||L(t,0,r,8),i.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;r=new c(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},c.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},c.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},c.prototype.readUInt8=function(t,e){return e||k(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||k(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||k(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||k(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||k(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){e||k(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||k(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||k(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||j(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||j(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);j(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);j(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):I(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,r){return D(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return D(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return F(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return F(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=c.isBuffer(t)?t:H(new c(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var R=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(R,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function U(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(7))},function(t,e,r){(function(t){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,r(17).Buffer)},function(t,e,r){"use strict";
/*!
	canvas-mouse 0.8.0-alpha
	Copyright (c) 2017 Epistemex
	MIT license.
*/e.a=function(t,e){if(!(t instanceof CanvasRenderingContext2D))throw"Need a 2D canvas context.";e=Object.assign({handleScale:!1,handleTransforms:!1,handleResize:!0,handleScroll:!0,onchange:null,matrix:null,plugins:[]},e);var r,n,i,o,s,a,c,l=this,u=Object.defineProperty.bind(Object),h="currentTransform"in t||"mozCurrentTransform"in t,d=e.plugins,f=t.canvas,p=e.matrix,m=p?p.inverse():null,g=e.handleScale,v=e.handleTransforms&&(h||p),y=p?function(t){var e=m.applyToPoint(t.x,t.y);return{x:e.x,y:e.y,timeStamp:t.timeStamp}}:function(e){var r,n,i=t.currentTransform||t.mozCurrentTransform;i instanceof SVGMatrix&&(i=DOMMatrix.fromMatrix(i));return r=void 0===i.a?new DOMMatrix(i):i,n=r.invertSelf(),{x:e.x*n.a+e.y*n.c+n.e,y:e.x*n.b+e.y*n.d+n.f,timeStamp:e.timeStamp}};function b(){p&&!p._xx&&(p._xx=p._x,p._x=function(){return m=this.inverse(),this._xx()})}function w(){var t=f.getBoundingClientRect(),e=getComputedStyle(f),r=e.getPropertyValue.bind(e),l=parseFloat,u="padding-",h="border-",d="-width",p="left",m="right",g="bottom";a=l(r(u+p))+l(r(h+p+d)),c=l(r(u+"top"))+l(r(h+"top"+d)),n=t.left+a,i=t.top+c,o=f.width/(t.width-(a+l(r(u+m))+l(r(h+m+d))))||1,s=f.height/(t.height-(c+l(r(u+g))+l(r(h+g+d))))||1}function x(){cancelAnimationFrame(r),r=requestAnimationFrame(T)}function _(){cancelAnimationFrame(r),r=requestAnimationFrame(E)}function T(){w(),e.onchange&&e.onchange({type:"resize",timeStamp:Date.now()})}function E(){var t=f.getBoundingClientRect();n=t.left+a,i=t.top+c,e.onchange&&e.onchange({type:"scroll",timeStamp:Date.now()})}!v||h||p||(console.log("currentTransform not supported by browser"),v=!1),this.getPos=function(t){var e,r={x:(e=t).clientX-n,y:e.clientY-i,timeStamp:e.timeStamp};if(g&&(r=function(t){return t.x*=o,t.y*=s,t}(r)),v&&(r=y(r)),d.length)for(var a=0;a<d.length;a++)r=d[a].handler(t,r);return r},this.getPosXY=function(t,e){var r;return 1===arguments.length?(e=t.y,r=t.x):r=t,l.getPos({clientX:r/o+n,clientY:e/s+i,timestamp:Date.now()})},this.addPlugin=function(t){d.indexOf(t)<0&&d.push(t)},this.removePlugin=function(t){var e=d.indexOf(t);e>-1&&d.splice(e,1)},this.init=w,this.update=E,u(l,"handleScale",{get:function(){return g},set:function(t){g=!!t}}),u(l,"handleTransforms",{get:function(){return v},set:function(t){v=!!t&&(h||p)}}),u(l,"handleScroll",{get:function(){return e.handleScroll},set:function(t){t?(window.addEventListener("scroll",_),e.handleScroll=!0):(window.removeEventListener("scroll",_),e.handleScroll=!1)}}),u(l,"handleResize",{get:function(){return e.handleResize},set:function(t){t?(window.addEventListener("resize",x),e.handleResize=!0):(window.removeEventListener("resize",x),e.handleResize=!1)}}),u(l,"onchange",{get:function(){return e.onchange},set:function(t){e.onchange=t}}),u(l,"matrix",{get:function(){return p},set:function(t){p=t,v=v&&(h||p),b()}}),b(),w(),l.handleResize=e.handleResize,l.handleScroll=e.handleScroll}},function(t,e,r){"use strict";function n(t,e,r,n,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void r(t)}a.done?e(c):Promise.resolve(c).then(n,i)}function i(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var s=t.apply(e,r);function a(t){n(s,i,o,a,c,"next",t)}function c(t){n(s,i,o,a,c,"throw",t)}a(void 0)}))}}r.d(e,"a",(function(){return b})),r.d(e,"c",(function(){return O})),r.d(e,"b",(function(){return M})),r.d(e,"d",(function(){return A}));var{CondensedIupac:o,Mass:s,Sugar:a,Monosaccharide:c,LinkageLayout:l,SugarAwareLayout:u,SVGRenderer:h,SVGCanvas:d,Repeat:f,Reaction:p,ReactionGroup:m}=r(2),{BrowserShimmedSVGRenderer:g,BrowserShimmedStaticSVGRenderer:v}=r(47),{tag_supported:y}=r(86),b={CondensedIupac:o,Mass:s,Sugar:a,Monosaccharide:c,LinkageLayout:l,SugarAwareLayout:u,SVGRenderer:g,Repeat:f,Reaction:p},w=s((0,o.IO)(a)),x=Object.freeze({compact:.5,tight:.75,normal:1,loose:1.5});function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";return class extends t{static get DELTA_X(){return super.DELTA_X*(x[e]||1)}static get DELTA_Y(){return super.DELTA_Y*(x[e]||1)}}}function T(t){Array.isArray(t);return Array.isArray(t)||(t=[t]),t.map(t=>{var e=new w;return e.sequence=t,e})}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal",n=new g(_(e,r));for(var i of t)n.addSugar(i);return n}function N(t,e){return S.apply(this,arguments)}function S(){return(S=i((function*(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];yield g.AppendSymbols(e.element.canvas.querySelector("defs"));var n=t.map(t=>{var r=e.element.canvas.cloneNode();return r.appendChild(e.element.canvas.querySelector("defs").cloneNode(!0)),r.appendChild(e.rendered.get(t).element),r.outerHTML});return r?n:n[0]}))).apply(this,arguments)}function O(){return C.apply(this,arguments)}function C(){return(C=i((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Man(a1-3)Man(b1-4)GlcNAc(b1-4)GlcNAc(b1-O)Ser",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{linkage:!1,oxford:!1,rotate:!1,leftToRight:!1,spacing:"normal"},r=(Array.isArray(t),t);Array.isArray(t)||(r=[t]);var n=T(r),i=E(n,e.oxford?l:u,e.spacing);for(var[o,s]of(i.LayoutEngine.LINKS=!!e.linkage,i.rotate=e.rotate,i.leftToRight=e.leftToRight,i.refresh(),i.scaleToFit(),r.entries()))i.rendered.get(n[o]).element.setAttribute("sviewer:seq",r[o]),e.title&&i.rendered.get(n[o]).element.setAttribute("sviewer:title",e.title);return yield N(n,i,Array.isArray(t))}))).apply(this,arguments)}function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Symbol("supported");return t.groupTag=r,y(r,t.sugars,e,w),t}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;return v.fromSVGString(t,e)}},function(t,e){},function(t,e,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new Promise((function(r,n){function i(){void 0!==o&&t.removeListener("error",o),r([].slice.call(arguments))}var o;"error"!==e&&(o=function(r){t.removeListener(e,i),n(r)},t.once("error",o)),t.once(e,i)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function u(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,o,s,a;if(l(r),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),s=o[e]),void 0===s)s=o[e]=r,++t._eventsCount;else if("function"==typeof s?s=o[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=u(t))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=s.length,a=c,console&&console.warn&&console.warn(a)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function p(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):g(i,i.length)}function m(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function g(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[t];if(void 0===c)return!1;if("function"==typeof c)o(c,this,e);else{var l=c.length,u=g(c,l);for(r=0;r<l;++r)o(u[r],this,e)}return!0},a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return l(e),this.on(t,f(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,f(this,t,e)),this},a.prototype.removeListener=function(t,e){var r,n,i,o,s;if(l(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===e||r[o].listener===e){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},a.prototype.listeners=function(t){return p(this,t,!0)},a.prototype.rawListeners=function(t){return p(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):m.call(t,e)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,r){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,r)}));case 3:return e.nextTick((function(){t.call(null,r,n)}));case 4:return e.nextTick((function(){t.call(null,r,n,i)}));default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,r(4))},function(t,e,r){var n=r(17),i=n.Buffer;function o(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=s),o(i,s),s.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var n=i(t);return void 0!==e?"string"==typeof r?n.fill(e,r):n.fill(e):n.fill(0),n},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n.SlowBuffer(t)}},function(t,e,r){(function(n){var i;e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,t=>{"%%"!==t&&(n++,"%c"===t&&(i=n))}),e.splice(i,0,r)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(t){}!t&&void 0!==n&&"env"in n&&(t=n.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(i=!1,()=>{i||(i=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=r(26)(e);var{formatters:o}=t.exports;o.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this,r(4))},function(t,e,r){t.exports=function(t){function e(t){var r,i,o,s=null;function a(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(a.enabled){var o=a,s=Number(new Date),c=s-(r||s);o.diff=c,o.prev=r,o.curr=s,r=s,n[0]=e.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var l=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(t,r)=>{if("%%"===t)return"%";l++;var i=e.formatters[r];if("function"==typeof i){var s=n[l];t=i.call(o,s),n.splice(l,1),l--}return t}),e.formatArgs.call(o,n);var u=o.log||e.log;u.apply(o,n)}}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=n,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==e.namespaces&&(i=e.namespaces,o=e.enabled(t)),o),set:t=>{s=t}}),"function"==typeof e.init&&e.init(a),a}function n(t,r){var n=e(this.namespace+(void 0===r?":":r)+t);return n.log=this.log,n}function i(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){var t=[...e.names.map(i),...e.skips.map(i).map(t=>"-"+t)].join(",");return e.enable(""),t},e.enable=function(t){var r;e.save(t),e.namespaces=t,e.names=[],e.skips=[];var n=("string"==typeof t?t:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(27),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(r=>{e[r]=t[r]}),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]},e.enable(e.load()),e}},function(t,e){var r=1e3,n=6e4,i=60*n,o=24*i;function s(t,e,r,n){var i=e>=1.5*r;return Math.round(t/r)+" "+n+(i?"s":"")}t.exports=function(t,e){e=e||{};var a=typeof t;if("string"===a&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return;var s=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"weeks":case"week":case"w":return 6048e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(t);if("number"===a&&isFinite(t))return e.long?function(t){var e=Math.abs(t);if(e>=o)return s(t,e,o,"day");if(e>=i)return s(t,e,i,"hour");if(e>=n)return s(t,e,n,"minute");if(e>=r)return s(t,e,r,"second");return t+" ms"}(t):function(t){var e=Math.abs(t);if(e>=o)return Math.round(t/o)+"d";if(e>=i)return Math.round(t/i)+"h";if(e>=n)return Math.round(t/n)+"m";if(e>=r)return Math.round(t/r)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,r){(e=t.exports=r(36)).Stream=e,e.Readable=e,e.Writable=r(29),e.Duplex=r(11),e.Transform=r(39),e.PassThrough=r(81)},function(t,e,r){"use strict";(function(e,n,i){var o=r(23);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var n=t.entry;t.entry=null;for(;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var a,c=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?n:o.nextTick;y.WritableState=v;var l=Object.create(r(18));l.inherits=r(13);var u={deprecate:r(80)},h=r(37),d=r(24).Buffer,f=i.Uint8Array||function(){};var p,m=r(38);function g(){}function v(t,e){a=a||r(11),t=t||{};var n=e instanceof a;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(l||0===l)?l:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,i){--e.pendingcb,r?(o.nextTick(i,n),o.nextTick(E,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),E(t,e))}(t,r,n,e,i);else{var s=_(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||x(t,r),n?c(w,t,r,s,i):w(t,r,s,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function y(t){if(a=a||r(11),!(p.call(y,this)||this instanceof a))return new y(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function b(t,e,r,n,i,o,s){e.writelen=n,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function w(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),E(t,e)}function x(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,c=!0;r;)i[a]=r,r.isBuf||(c=!1),r=r.next,a+=1;i.allBuffers=c,b(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,h=r.callback;if(b(t,e,!1,e.objectMode?1:l.length,l,u,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function _(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function T(t,e){t._final((function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),E(t,e)}))}function E(t,e){var r=_(e);return r&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(T,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}l.inherits(y,h),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!p.call(this,t)||this===y&&(t&&t._writableState instanceof v)}})):p=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,r){var n,i=this._writableState,s=!1,a=!i.objectMode&&(n=t,d.isBuffer(n)||n instanceof f);return a&&!d.isBuffer(t)&&(t=function(t){return d.from(t)}(t)),"function"==typeof e&&(r=e,e=null),a?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=g),i.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),o.nextTick(e,r)}(this,r):(a||function(t,e,r,n){var i=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),o.nextTick(n,s),i=!1),i}(this,i,t,r))&&(i.pendingcb++,s=function(t,e,r,n,i,o){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=d.from(e,r));return e}(e,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=e.objectMode?1:n.length;e.length+=a;var c=e.length<e.highWaterMark;c||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,a,n,i,o);return c}(this,i,a,t,e,r)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||x(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,E(t,e),r&&(e.finished?o.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,n,r)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,r(4),r(78).setImmediate,r(7))},function(t,e,r){"use strict";var n=r(24).Buffer,i=n.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(n.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=c,this.end=l,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=u,this.end=h,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function u(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var r=function(t,e,r){var n=e.length-1;if(n<r)return 0;var i=s(e[n]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if((i=s(e[n]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if((i=s(e[n]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){(function(t){function r(t,e){for(var r=0,n=t.length-1;n>=0;n--){var i=t[n];"."===i?t.splice(n,1):".."===i?(t.splice(n,1),r++):r&&(t.splice(n,1),r--)}if(e)for(;r--;r)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var r=[],n=0;n<t.length;n++)e(t[n],n,t)&&r.push(t[n]);return r}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,i="/"===s.charAt(0))}return(i?"/":"")+(e=r(n(e.split("/"),(function(t){return!!t})),!i).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),s="/"===i(t,-1);return(t=r(n(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&s&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(n(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,r){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;r>=0&&""===t[r];r--);return e>r?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var i=n(t.split("/")),o=n(r.split("/")),s=Math.min(i.length,o.length),a=s,c=0;c<s;c++)if(i[c]!==o[c]){a=c;break}var l=[];for(c=a;c<i.length;c++)l.push("..");return(l=l.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),r=47===e,n=-1,i=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!i){n=o;break}}else i=!1;return-1===n?r?"/":".":r&&1===n?"/":t.slice(0,n)},e.basename=function(t,e){var r=function(t){"string"!=typeof t&&(t+="");var e,r=0,n=-1,i=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!i){r=e+1;break}}else-1===n&&(i=!1,n=e+1);return-1===n?"":t.slice(r,n)}(t);return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,r=0,n=-1,i=!0,o=0,s=t.length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===n&&(i=!1,n=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){r=s+1;break}}return-1===e||-1===n||0===o||1===o&&e===n-1&&e===r+1?"":t.slice(e,n)};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(4))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(56),i=r(57),o=r(58),s=r(59),a=r(60),c=r(34),l=r(61),u=r(62),h=r(63),d=r(64),f=r(65),p=r(66),m=r(67),g=r(68),v=r(69),y=r(70);e.typeHandlers={bmp:n.BMP,cur:i.CUR,dds:o.DDS,gif:s.GIF,icns:a.ICNS,ico:c.ICO,j2c:l.J2C,jp2:u.JP2,jpg:h.JPG,ktx:d.KTX,png:f.PNG,pnm:p.PNM,psd:m.PSD,svg:g.SVG,tiff:v.TIFF,webp:y.WEBP}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(t,e){var r=t.readUInt8(e);return 0===r?256:r}function i(t,e){var r=6+16*e;return{height:n(t,r+1),width:n(t,r)}}e.ICO={validate:t=>0===t.readUInt16LE(0)&&1===t.readUInt16LE(2),calculate(t){var e=t.readUInt16LE(4),r=i(t,0);if(1===e)return r;for(var n=[r],o=1;o<e;o+=1)n.push(i(t,o));return{height:r.height,images:n,width:r.width}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readUInt=function(t,e,r,n){return r=r||0,t["readUInt"+e+(n?"BE":"LE")].call(t,r)}},function(t,e,r){"use strict";(function(e,n){var i=r(23);t.exports=b;var o,s=r(31);b.ReadableState=y;r(22).EventEmitter;var a=function(t,e){return t.listeners(e).length},c=r(37),l=r(24).Buffer,u=e.Uint8Array||function(){};var h=Object.create(r(18));h.inherits=r(13);var d=r(75),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var p,m=r(76),g=r(38);h.inherits(b,c);var v=["error","close","destroy","pause","resume"];function y(t,e){t=t||{};var n=e instanceof(o=o||r(11));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=r(30).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(o=o||r(11),!(this instanceof b))return new b(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),c.call(this)}function w(t,e,r,n,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,T(t)}(t,s)):(i||(o=function(t,e){var r;n=e,l.isBuffer(n)||n instanceof u||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):x(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?x(t,s,e,!1):N(t,s)):x(t,s,e,!1))):n||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function x(t,e,r,n){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&T(t)),N(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof t&&((e=e||n.defaultEncoding)!==n.encoding&&(t=l.from(t,e),e=""),r=!0),w(this,t,e,!1,r)},b.prototype.unshift=function(t){return w(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=r(30).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};function _(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function T(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(E,t):E(t))}function E(t){f("emit readable"),t.emit("readable"),A(t)}function N(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(S,t,e))}function S(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function O(t){f("readable nexttick read 0"),t.read(0)}function C(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),A(t),e.flowing&&!e.reading&&t.read(0)}function A(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function M(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var n;t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):n=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,n=1,i=r.data;t-=i.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++n}return e.length-=n,i}(t,e):function(t,e){var r=l.allocUnsafe(t),n=e.head,i=1;n.data.copy(r),t-=n.data.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,s),0===(t-=s)){s===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++i}return e.length-=i,r}(t,e);return n}(t,e.buffer,e.decoder),r);var r}function k(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(j,e,t))}function j(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function P(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}b.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?k(this):T(this),null;if(0===(t=_(t,e))&&e.ended)return 0===e.length&&k(this),null;var n,i=e.needReadable;return f("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",i=!0),e.ended||e.reading?f("reading or ended",i=!1):i&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=_(r,e))),null===(n=t>0?M(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&k(this)),null!==n&&this.emit("data",n),n},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var r=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,e);var c=(!e||!1!==e.end)&&t!==n.stdout&&t!==n.stderr?u:b;function l(e,n){f("onunpipe"),e===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),t.removeListener("close",v),t.removeListener("finish",y),t.removeListener("drain",h),t.removeListener("error",g),t.removeListener("unpipe",l),r.removeListener("end",u),r.removeListener("end",b),r.removeListener("data",m),d=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function u(){f("onend"),t.end()}o.endEmitted?i.nextTick(c):r.once("end",c),t.on("unpipe",l);var h=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,A(t))}}(r);t.on("drain",h);var d=!1;var p=!1;function m(e){f("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==P(o.pipes,t))&&!d&&(f("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function g(e){f("onerror",e),b(),t.removeListener("error",g),0===a(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",y),b()}function y(){f("onfinish"),t.removeListener("close",v),b()}function b(){f("unpipe"),r.unpipe(t)}return r.on("data",m),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",g),t.once("close",v),t.once("finish",y),t.emit("pipe",r),o.flowing||(f("pipe resume"),r.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r)),this;if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=P(e.pipes,t);return-1===s||(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r)),this},b.prototype.on=function(t,e){var r=c.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&T(this):i.nextTick(O,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(C,t,e))}(this,t)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;for(var i in t.on("end",(function(){if(f("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){(f("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i)||(r.objectMode||i&&i.length)&&(e.push(i)||(n=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<v.length;o++)t.on(v[o],this.emit.bind(this,v[o]));return this._read=function(e){f("wrapped _read",e),n&&(n=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=M}).call(this,r(7),r(4))},function(t,e,r){t.exports=r(22).EventEmitter},function(t,e,r){"use strict";var n=r(23);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||n.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(n.nextTick(i,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){"use strict";t.exports=s;var n=r(11),i=Object.create(r(18));function o(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);n.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush((function(e,r){c(t,e,r)})):c(this,null,null)}function c(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=r(13),i.inherits(s,n),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var r=this;n.prototype._destroy.call(this,t,(function(t){e(t),r.emit("close")}))}},,,,,,function(t,e,r){t.exports=r(46)},function(t,e,r){"use strict";r.r(e),function(t){var e=r(20);t.Glycan=e.a,t.render_iupac_sugar=e.c,t.load_sugar_svg=e.b,t.tag_supported=e.d}.call(this,r(7))},function(t,e,r){"use strict";r.r(e),function(t){r.d(e,"BrowserShimmedSVGRenderer",(function(){return v})),r.d(e,"BrowserShimmedStaticSVGRenderer",(function(){return y}));var{CondensedIupac:n,Mass:i,Sugar:o,Monosaccharide:s,LinkageLayout:a,SugarAwareLayout:c,SVGRenderer:l,SVGCanvas:u,Repeat:h,Reaction:d}=r(2),{createSVGWindow:f,SVGSVGElement:p}=r(48),m=f(),g=m.document;class v extends l{constructor(t){if(super(g.documentElement,t),t){var e=g.createElementNS("http://www.w3.org/2000/svg","defs");this.element.canvas.appendChild(e),this.element.canvas.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.element.canvas.setAttribute("xmlns:sviewer","https://glycocode.com/sviewer")}}static get SYMBOLS(){return l.SYMBOLS||"object"!=typeof t||"object"!=typeof t.versions||void 0===t.versions.node?l.SYMBOLS:r(21).readFileSync("node_modules/glycan.js/sugars.svg")}static AppendSymbols(t){return Promise.resolve(this.SYMBOLS).then(t=>{var e=f().document;return e.documentElement.innerHTML=t,e.documentElement}).then(t=>t.querySelectorAll("svg defs symbol")).then(e=>{for(var r of e)t.appendChild(r.cloneNode(!0))})}scaleToFit(){var t={x:null,y:null},e={x:null,y:null};for(var r of this.sugars)for(var n of r.composition()){var i=this.rendered.get(n).residue.element;if(!i.hidden){var o=i.getAttribute("transform").replace(/rotate\([^\)]*\)/,"").trim(),[s,a]=o.split(/\s+/).map(t=>t.replace(/[^\d\.\-,]/g,"").split(",").map(parseFloat));(null==t.x||s[0]<t.x)&&(t.x=s[0]),(null==e.x||s[0]+a[0]>e.x)&&(e.x=s[0]+a[0]),(null==t.y||s[1]<t.y)&&(t.y=s[1]),(null==e.y||s[1]+a[1]>e.y)&&(e.y=s[1]+a[1])}}var c={x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y},l=[c.x,c.y,c.width,c.height];for(var u of g.documentElement.childNodes.filter(t=>t instanceof p))u.setAttribute("viewBox",l.join(" ")),u.setAttribute("preserveAspectRatio","xMidYMid meet")}static fromSVGString(t,e){f();var r=m.document;r.documentElement.innerHTML=t;var n=r.childNodes[0];return n.ownerDocument=r,this.fromSVGElement(n,e)}static fromSVGElement(t,e){var r=new y;r.element=new u(t),r.element.canvas.parentNode.removeChild(r.element.canvas),r.element.canvas=t,l.SYMBOLS;var n=t.querySelectorAll("g");for(var i of n)if(i.hasAttribute("glycanjs:sequence")){var o=new e;for(var s of(o.sequence=i.getAttribute("glycanjs:sequence"),r.addSugar(o),r.rendered.set(o,r.element.group(i)),i.querySelectorAll("use")))if(s.hasAttribute("glycanjs:location")){var a={residue:{element:s}};s.parentNode!==i&&i.appendChild(s),r.rendered.set(o.locate_monosaccharide(s.getAttribute("glycanjs:location")),a)}for(var c of i.querySelectorAll("g"))if(c.hasAttribute("glycanjs:location")){c.parentNode!==i&&(i.appendChild(c),r.element.sendToBack(c));var h=r.rendered.get(o.locate_monosaccharide(c.getAttribute("glycanjs:location")));h?h.linkage=c:console.log("ERROR loading linkage for ",o.sequence,"missing residue at",c.getAttribute("glycanjs:location"))}}return r}}class y extends v{layoutFor(t){var{x:e,y:r,width:n,height:i}=this.rendered.get(t).residue.element.getBoundingClientRect();return{x:e,y:r,width:n,height:i}}screenCoordinatesFromLayout(t){return t}}}.call(this,r(4))},function(module,exports,__webpack_require__){(function(global){!function(t,e){for(var r in e)t[r]=e[r]}(exports,function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="./main-module.js")}({"./dirname.cjs":
/*!******************************************!*\
  !*** external "./src/utils/dirname.cjs" ***!
  \******************************************/
/*! no static exports found */function(t,e){t.exports=__webpack_require__(49)},"./main-module.js":
/*!************************!*\
  !*** ./main-module.js ***!
  \************************/
/*! exports provided: Attr, CharacterData, Comment, CustomEvent, DOMImplementation, Document, DocumentFragment, Element, Event, EventTarget, Node, NodeFilter, Text, Window, HTMLElement, HTMLImageElement, HTMLLinkElement, HTMLParser, HTMLScriptElement, elementAccess, ParentNode, SVGElement, SVGGraphicsElement, matrixFactory, SVGMatrix, SVGPathElement, SVGPoint, SVGSVGElement, SVGTextContentElement, setFontDir, setFontFamilyMappings, preloadFonts, getConfig, getFonts, config, createDocument, createHTMLDocument, createSVGDocument, createWindow, createHTMLWindow, createSVGWindow, defaults */function(t,e,r){"use strict";r.r(e);var n=r(/*! ./src/utils/defaults.js */"./src/utils/defaults.js");r.d(e,"defaults",(function(){return n}));var i=r(/*! ./src/dom/Attr.js */"./src/dom/Attr.js");r.d(e,"Attr",(function(){return i.Attr}));var o=r(/*! ./src/dom/CharacterData.js */"./src/dom/CharacterData.js");r.d(e,"CharacterData",(function(){return o.CharacterData}));var s=r(/*! ./src/dom/Comment.js */"./src/dom/Comment.js");r.d(e,"Comment",(function(){return s.Comment}));var a=r(/*! ./src/dom/CustomEvent.js */"./src/dom/CustomEvent.js");r.d(e,"CustomEvent",(function(){return a.CustomEvent}));var c=r(/*! ./src/dom/Document.js */"./src/dom/Document.js");r.d(e,"DOMImplementation",(function(){return c.DOMImplementation})),r.d(e,"Document",(function(){return c.Document}));var l=r(/*! ./src/dom/DocumentFragment.js */"./src/dom/DocumentFragment.js");r.d(e,"DocumentFragment",(function(){return l.DocumentFragment}));var u=r(/*! ./src/dom/Element.js */"./src/dom/Element.js");r.d(e,"Element",(function(){return u.Element}));var h=r(/*! ./src/dom/Event.js */"./src/dom/Event.js");r.d(e,"Event",(function(){return h.Event}));var d=r(/*! ./src/dom/EventTarget.js */"./src/dom/EventTarget.js");r.d(e,"EventTarget",(function(){return d.EventTarget}));var f=r(/*! ./src/dom/Node.js */"./src/dom/Node.js");r.d(e,"Node",(function(){return f.Node}));var p=r(/*! ./src/dom/NodeFilter.js */"./src/dom/NodeFilter.js");r.d(e,"NodeFilter",(function(){return p.NodeFilter}));var m=r(/*! ./src/dom/Text.js */"./src/dom/Text.js");r.d(e,"Text",(function(){return m.Text}));var g=r(/*! ./src/dom/Window.js */"./src/dom/Window.js");r.d(e,"Window",(function(){return g.Window}));var v=r(/*! ./src/dom/html/HTMLElement.js */"./src/dom/html/HTMLElement.js");r.d(e,"HTMLElement",(function(){return v.HTMLElement}));var y=r(/*! ./src/dom/html/HTMLImageElement.js */"./src/dom/html/HTMLImageElement.js");r.d(e,"HTMLImageElement",(function(){return y.HTMLImageElement}));var b=r(/*! ./src/dom/html/HTMLLinkElement.js */"./src/dom/html/HTMLLinkElement.js");r.d(e,"HTMLLinkElement",(function(){return b.HTMLLinkElement}));var w=r(/*! ./src/dom/html/HTMLParser.js */"./src/dom/html/HTMLParser.js");r.d(e,"HTMLParser",(function(){return w.HTMLParser}));var x=r(/*! ./src/dom/html/HTMLScriptElement.js */"./src/dom/html/HTMLScriptElement.js");r.d(e,"HTMLScriptElement",(function(){return x.HTMLScriptElement}));var _=r(/*! ./src/dom/mixins/elementAccess.js */"./src/dom/mixins/elementAccess.js");r.d(e,"elementAccess",(function(){return _.elementAccess}));var T=r(/*! ./src/dom/mixins/ParentNode.js */"./src/dom/mixins/ParentNode.js");r.d(e,"ParentNode",(function(){return T.ParentNode}));var E=r(/*! ./src/dom/svg/SVGElement.js */"./src/dom/svg/SVGElement.js");r.d(e,"SVGElement",(function(){return E.SVGElement}));var N=r(/*! ./src/dom/svg/SVGGraphicsElement.js */"./src/dom/svg/SVGGraphicsElement.js");r.d(e,"SVGGraphicsElement",(function(){return N.SVGGraphicsElement}));var S=r(/*! ./src/dom/svg/SVGMatrix.js */"./src/dom/svg/SVGMatrix.js");r.d(e,"matrixFactory",(function(){return S.matrixFactory})),r.d(e,"SVGMatrix",(function(){return S.SVGMatrix}));var O=r(/*! ./src/dom/svg/SVGPathElement.js */"./src/dom/svg/SVGPathElement.js");r.d(e,"SVGPathElement",(function(){return O.SVGPathElement}));var C=r(/*! ./src/dom/svg/SVGPoint.js */"./src/dom/svg/SVGPoint.js");r.d(e,"SVGPoint",(function(){return C.SVGPoint}));var A=r(/*! ./src/dom/svg/SVGSVGElement.js */"./src/dom/svg/SVGSVGElement.js");r.d(e,"SVGSVGElement",(function(){return A.SVGSVGElement}));var M=r(/*! ./src/dom/svg/SVGTextContentElement.js */"./src/dom/svg/SVGTextContentElement.js");r.d(e,"SVGTextContentElement",(function(){return M.SVGTextContentElement}));var k=r(/*! ./src/config.js */"./src/config.js");r.d(e,"setFontDir",(function(){return k.setFontDir})),r.d(e,"setFontFamilyMappings",(function(){return k.setFontFamilyMappings})),r.d(e,"preloadFonts",(function(){return k.preloadFonts})),r.d(e,"getConfig",(function(){return k.getConfig})),r.d(e,"getFonts",(function(){return k.getFonts})),r.d(e,"config",(function(){return k.config}));var j=r(/*! ./src/factories.js */"./src/factories.js");r.d(e,"createDocument",(function(){return j.createDocument})),r.d(e,"createHTMLDocument",(function(){return j.createHTMLDocument})),r.d(e,"createSVGDocument",(function(){return j.createSVGDocument})),r.d(e,"createWindow",(function(){return j.createWindow})),r.d(e,"createHTMLWindow",(function(){return j.createHTMLWindow})),r.d(e,"createSVGWindow",(function(){return j.createSVGWindow}))},"./src/config.js":
/*!***********************!*\
  !*** ./src/config.js ***!
  \***********************/
/*! exports provided: setFontDir, setFontFamilyMappings, preloadFonts, getConfig, getFonts, config */function(t,e,r){"use strict";r.r(e),r.d(e,"setFontDir",(function(){return l})),r.d(e,"setFontFamilyMappings",(function(){return u})),r.d(e,"preloadFonts",(function(){return h})),r.d(e,"getConfig",(function(){return d})),r.d(e,"getFonts",(function(){return f})),r.d(e,"config",(function(){return p}));var n=r(/*! path */"path"),i=r.n(n),o=r(/*! fontkit */"fontkit"),s=r.n(o);const a={},c={},l=function(t){return a.fontDir=t,this},u=function(t){return a.fontFamilyMappings=t,this},h=()=>{var t=a.fontFamilyMappings;for(const[e,r]of Object.entries(t)){const t=i.a.join(a.fontDir,r);try{c[e]=s.a.openSync(t)}catch(t){console.warn("Could not load font file for "+e,t)}}},d=()=>a,f=()=>c,p={setFontDir:l,setFontFamilyMappings:u,preloadFonts:h,getConfig:d,getFonts:f}},"./src/dom/Attr.js":
/*!*************************!*\
  !*** ./src/dom/Attr.js ***!
  \*************************/
/*! exports provided: Attr */function(t,e,r){"use strict";r.r(e),r.d(e,"Attr",(function(){return o}));var n=r(/*! ./Node.js */"./src/dom/Node.js"),i=r(/*! ../utils/namespaces.js */"./src/utils/namespaces.js");class o extends n.Node{constructor(t,e,r){super(t,{nodeValue:"",...e},r),this.nodeName=r===i.html?t.toLowerCase():t,this.nodeType=n.Node.ATTRIBUTE_NODE,this.ownerElement=null}get value(){return this.nodeValue}set value(t){this.nodeValue=t}get name(){return this.nodeName}}},"./src/dom/CharacterData.js":
/*!**********************************!*\
  !*** ./src/dom/CharacterData.js ***!
  \**********************************/
/*! exports provided: CharacterData */function(t,e,r){"use strict";r.r(e),r.d(e,"CharacterData",(function(){return a}));var n=r(/*! ./Node.js */"./src/dom/Node.js"),i=r(/*! ../utils/objectCreationUtils.js */"./src/utils/objectCreationUtils.js"),o=r(/*! ./mixins/NonDocumentTypeChildNode.js */"./src/dom/mixins/NonDocumentTypeChildNode.js"),s=r(/*! ./mixins/ChildNode.js */"./src/dom/mixins/ChildNode.js");class a extends n.Node{constructor(t,e){super(t,e),this.data=this.nodeValue}appendData(t){this.data+=t}deleteData(t,e){this.data=this.data.slice(0,t)+this.data.slice(0,t+e)}insertData(t,e){this.data=this.data.slice(0,t)+e+this.data.slice(t)}replaceData(t,e,r){this.deleteData(t,e),this.insertData(t,r)}substringData(t,e){this.data=this.data.substr(t,e)}get length(){return this.data.length}}Object(i.mixin)(o.NonDocumentTypeChildNode,a),Object(i.mixin)(s.ChildNode,a)},"./src/dom/Comment.js":
/*!****************************!*\
  !*** ./src/dom/Comment.js ***!
  \****************************/
/*! exports provided: Comment */function(t,e,r){"use strict";r.r(e),r.d(e,"Comment",(function(){return o}));var n=r(/*! ./CharacterData.js */"./src/dom/CharacterData.js"),i=r(/*! ./Node.js */"./src/dom/Node.js");class o extends n.CharacterData{constructor(t,e){super(t,e),this.nodeType=i.Node.COMMENT_NODE}}},"./src/dom/CustomEvent.js":
/*!********************************!*\
  !*** ./src/dom/CustomEvent.js ***!
  \********************************/
/*! exports provided: CustomEvent */function(t,e,r){"use strict";r.r(e),r.d(e,"CustomEvent",(function(){return i}));var n=r(/*! ./Event.js */"./src/dom/Event.js");class i extends n.Event{constructor(t,e={}){super(t),this.detail=e.detail||null,this.cancelable=e.cancelable||!1}}},"./src/dom/Document.js":
/*!*****************************!*\
  !*** ./src/dom/Document.js ***!
  \*****************************/
/*! exports provided: DOMImplementation, Document */function(t,e,r){"use strict";r.r(e),r.d(e,"DOMImplementation",(function(){return N})),r.d(e,"Document",(function(){return S}));var n=r(/*! ./Node.js */"./src/dom/Node.js"),i=r(/*! ./Comment.js */"./src/dom/Comment.js"),o=r(/*! ./Text.js */"./src/dom/Text.js"),s=r(/*! ./Attr.js */"./src/dom/Attr.js"),a=r(/*! ./DocumentFragment.js */"./src/dom/DocumentFragment.js"),c=r(/*! ./html/HTMLLinkElement.js */"./src/dom/html/HTMLLinkElement.js"),l=r(/*! ./html/HTMLScriptElement.js */"./src/dom/html/HTMLScriptElement.js"),u=r(/*! ./html/HTMLImageElement.js */"./src/dom/html/HTMLImageElement.js"),h=r(/*! ./html/HTMLElement.js */"./src/dom/html/HTMLElement.js"),d=r(/*! ./mixins/elementAccess.js */"./src/dom/mixins/elementAccess.js"),f=r(/*! ../utils/objectCreationUtils.js */"./src/utils/objectCreationUtils.js"),p=r(/*! ./svg/SVGSVGElement.js */"./src/dom/svg/SVGSVGElement.js"),m=r(/*! ./svg/SVGPathElement.js */"./src/dom/svg/SVGPathElement.js"),g=r(/*! ./svg/SVGTextContentElement.js */"./src/dom/svg/SVGTextContentElement.js"),v=r(/*! ./svg/SVGGraphicsElement.js */"./src/dom/svg/SVGGraphicsElement.js"),y=r(/*! ./mixins/ParentNode.js */"./src/dom/mixins/ParentNode.js"),b=r(/*! ../utils/namespaces.js */"./src/utils/namespaces.js"),w=r(/*! ./DocumentType.js */"./src/dom/DocumentType.js"),x=r(/*! ./mixins/NonElementParentNode.js */"./src/dom/mixins/NonElementParentNode.js");function _(t,e){for(var r=t.firstChild;null!=r;r=r.nextSibling)if(r.nodeType===n.Node.ELEMENT_NODE&&r.nodeName===e)return r;return null}const T=(t,e)=>{switch(t){case b.svg:return(t=>{switch(t.toLowerCase()){case"svg":return p.SVGSVGElement;case"path":return m.SVGPathElement;case"text":case"tspan":case"tref":case"altglyph":case"textpath":return g.SVGTextContentElement;default:return v.SVGGraphicsElement}})(e);case b.html:case null:case"":default:return(t=>{switch(t.toLowerCase()){case"img":return u.HTMLImageElement;case"link":return c.HTMLLinkElement;case"script":return l.HTMLScriptElement;default:return h.HTMLElement}})(e)}};var E={xml:{"":!0,"1.0":!0,"2.0":!0},core:{"":!0,"2.0":!0},html:{"":!0,"1.0":!0,"2.0":!0},xhtml:{"":!0,"1.0":!0,"2.0":!0}};const N={hasFeature(t,e){var r=E[(t||"").toLowerCase()];return r&&r[e||""]||!1},createDocumentType(t,e,r){return new w.DocumentType(t,{publicId:e,systemId:r,ownerDocument:this})},createDocument(t,e,r){var n=new S(t);if(r){if(r.ownerDocument)throw new Error("the object is in the wrong Document, a call to importNode is required");r.ownerDocument=n,n.appendChild(r)}return e&&n.appendChild(n.createElementNS(t,e)),n},createHTMLDocument(t=""){const e=new S(b.html),r=e.createElement("html"),n=e.createElement("head"),i=e.createElement("title");return i.appendChild(e.createTextNode(t)),n.appendChild(i),r.appendChild(n),r.appendChild(e.createElement("body")),e.appendChild(r),e}};class S extends n.Node{constructor(t){super("#document",{},t),this.nodeType=n.Node.DOCUMENT_NODE,this.implementation=N,this.defaultView=null}createAttribute(t){return this.namespaceURI===b.html&&(t=t.toLowerCase()),this.createAttributeNS(null,t,!0)}createAttributeNS(t,e,r=!1){return new s.Attr(e,{ownerDocument:this,local:r},t)}createComment(t){return new i.Comment("#comment",{nodeValue:t,ownerDocument:this})}createDocumentFragment(t){return new a.DocumentFragment("#document-fragment",{ownerDocument:this})}createElement(t){return this.createElementNS(this.namespaceURI,t,!0)}createElementNS(t,e,r=!1){return new(T(t,e))(e,{ownerDocument:this,local:r},t)}createTextNode(t){return new o.Text("#text",{nodeValue:t,ownerDocument:this})}get compatMode(){return"CSS1Compat"}get body(){return _(this.documentElement,"BODY")}get head(){return _(this.documentElement,"HEAD")}get documentElement(){return this.lastChild}}Object(f.mixin)(d.elementAccess,S),Object(f.mixin)(y.ParentNode,S),Object(f.mixin)(x.NonElementParentNode,S)},"./src/dom/DocumentFragment.js":
/*!*************************************!*\
  !*** ./src/dom/DocumentFragment.js ***!
  \*************************************/
/*! exports provided: DocumentFragment */function(t,e,r){"use strict";r.r(e),r.d(e,"DocumentFragment",(function(){return c}));var n=r(/*! ./Node.js */"./src/dom/Node.js"),i=r(/*! ../utils/objectCreationUtils.js */"./src/utils/objectCreationUtils.js"),o=r(/*! ./mixins/elementAccess.js */"./src/dom/mixins/elementAccess.js"),s=r(/*! ./mixins/ParentNode.js */"./src/dom/mixins/ParentNode.js"),a=r(/*! ./mixins/NonElementParentNode.js */"./src/dom/mixins/NonElementParentNode.js");class c extends n.Node{constructor(t,e){super(t,e),this.nodeType=n.Node.DOCUMENT_FRAGMENT_NODE}}Object(i.mixin)(o.elementAccess,c),Object(i.mixin)(s.ParentNode,c),Object(i.mixin)(a.NonElementParentNode,c)},"./src/dom/DocumentType.js":
/*!*********************************!*\
  !*** ./src/dom/DocumentType.js ***!
  \*********************************/
/*! exports provided: DocumentType */function(t,e,r){"use strict";r.r(e),r.d(e,"DocumentType",(function(){return s}));var n=r(/*! ./Node.js */"./src/dom/Node.js"),i=r(/*! ../utils/objectCreationUtils.js */"./src/utils/objectCreationUtils.js"),o=r(/*! ./mixins/ChildNode.js */"./src/dom/mixins/ChildNode.js");class s extends n.Node{constructor(t,e){super(t,e),this.nodeType=n.Node.DOCUMENT_TYPE_NODE,this.name=t;const{publicId:r,systemId:i}=e;this.publicId=r||"",this.systemId=i||""}}Object(i.mixin)(o.ChildNode,s)},"./src/dom/Element.js":
/*!****************************!*\
  !*** ./src/dom/Element.js ***!
  \****************************/
/*! exports provided: Element */function(t,e,r){"use strict";r.r(e),r.d(e,"Element",(function(){return m}));var n=r(/*! ./Node.js */"./src/dom/Node.js"),i=r(/*! ./mixins/ParentNode.js */"./src/dom/mixins/ParentNode.js"),o=r(/*! ./mixins/elementAccess.js */"./src/dom/mixins/elementAccess.js"),s=r(/*! ./html/HTMLParser.js */"./src/dom/html/HTMLParser.js"),a=r(/*! ./DocumentFragment.js */"./src/dom/DocumentFragment.js"),c=r(/*! ../utils/objectCreationUtils.js */"./src/utils/objectCreationUtils.js"),l=r(/*! ../utils/tagUtils.js */"./src/utils/tagUtils.js"),u=r(/*! ../utils/mapUtils.js */"./src/utils/mapUtils.js"),h=r(/*! ../utils/strUtils.js */"./src/utils/strUtils.js"),d=r(/*! ./mixins/NonDocumentTypeChildNode.js */"./src/dom/mixins/NonDocumentTypeChildNode.js"),f=r(/*! ./mixins/ChildNode.js */"./src/dom/mixins/ChildNode.js"),p=r(/*! ../utils/namespaces.js */"./src/utils/namespaces.js");class m extends n.Node{constructor(t,e,r){var n;super(t,e,r),this.style=(n=this,new Proxy(n,{get(t,e){const r=t.getAttribute("style")||"",i=Object(u.cssToMap)(r);return"cssText"===e?r:"setProperty"===e?function(t,e="",r=""){n.style[t]=e+(r?" !"+r:"")}:(e=Object(h.decamelize)(e),i.has(e)?i.get(e):"")},set(t,e,r){if("css-text"===(e=Object(h.decamelize)(e)))return t.setAttribute("style",Object(u.mapToCss)(Object(u.cssToMap)(r))),!0;{r=Object(h.hexToRGB)(r.toString());const n=t.getAttribute("style")||"",i=Object(u.cssToMap)(n);return i.set(e,r),t.setAttribute("style",Object(u.mapToCss)(i)),!0}}})),this.tagName=this.nodeName}getAttribute(t){const e=this.getAttributeNode(t);return e?e.value:null}getAttributeNode(t){return((t,e)=>(t.namespaceURI===p.html&&t.ownerDocument.namespaceURI===p.html&&(e=e.toLowerCase()),[...t.attrs].find(t=>t.name===e)))(this,t)}getAttributeNodeNS(t,e){return((t,e,r)=>(e||(e=null),[...t.attrs].find(t=>t.localName===r&&t.namespaceURI===e)))(this,t,e)}getAttributeNS(t,e){const r=this.getAttributeNodeNS(t,e);return r?r.value:null}getBoundingClientRect(){throw new Error("Only implemented for SVG Elements")}hasAttribute(t){return!!this.getAttributeNode(t)}hasAttributeNS(t,e){return!!this.getAttributeNodeNS(t,e)}matches(t){return this.matchWithScope(t,this)}removeAttribute(t){const e=this.getAttributeNode(t);return e&&this.removeAttributeNode(e),e}removeAttributeNode(t){if(!this.attrs.delete(t))throw new Error("Attribute cannot be removed because it was not found on the element");return t}removeAttributeNS(t,e){const r=this.getAttributeNode(t,e);return r&&this.removeAttributeNode(r),r}setAttribute(t,e){this.namespaceURI===p.html&&this.ownerDocument.namespaceURI===p.html&&(t=t.toLowerCase());let r=this.getAttributeNode(t);r||(r=this.ownerDocument.createAttributeNS(null,t,!0),this.setAttributeNode(r)),r.value=e}setAttributeNode(t){this.attrs.add(t),t.ownerElement=this}setAttributeNS(t,e,r){const[n,i,o]=((t,e)=>{let r=null,n=e;if(t||(t=null),e.includes(":")&&([r,n]=e.split(":")),!t&&r)throw new Error("Namespace Error");if("xml"===r&&t!==p.xml)throw new Error("Namespace Error");if(("xmlns"===r||"xmlns"===e)&&t!==p.xmlns)throw new Error("Namespace Error");if("xmlns"!==r&&"xmlns"!==e&&t===p.xmlns)throw new Error("Namespace Error");return[t,r,n]})(t,e);let s=this.getAttributeNodeNS(n,o);s||(s=this.ownerDocument.createAttributeNS(n,e),this.setAttributeNode(s)),s.value=r,this.attrs.add(s)}get attributes(){return[...this.attrs]}get className(){return this.getAttribute("class")}set className(t){this.setAttribute("class",t)}get id(){return this.getAttribute("id")||""}set id(t){return this.setAttribute("id",t)}get innerHTML(){return this.childNodes.map(t=>t.nodeType===n.Node.TEXT_NODE?Object(h.htmlEntities)(t.data):t.nodeType===n.Node.CDATA_SECTION_NODE?Object(h.cdata)(t.data):t.nodeType===n.Node.COMMENT_NODE?Object(h.comment)(t.data):t.outerHTML).join("")}set innerHTML(t){for(;this.firstChild;)this.removeChild(this.firstChild);Object(s.HTMLParser)(t,this)}get outerHTML(){return Object(l.tag)(this)}set outerHTML(t){var e=new a.DocumentFragment;Object(s.HTMLParser)(t,e),this.parentNode.insertBefore(e,this),this.parentNode.removeChild(this)}}Object(c.mixin)(i.ParentNode,m),Object(c.mixin)(o.elementAccess,m),Object(c.mixin)(d.NonDocumentTypeChildNode,m),Object(c.mixin)(f.ChildNode,m)},"./src/dom/Event.js":
/*!**************************!*\
  !*** ./src/dom/Event.js ***!
  \**************************/
/*! exports provided: Event */function(t,e,r){"use strict";r.r(e),r.d(e,"Event",(function(){return n}));class n{constructor(t){this.type=t,this.cancelable=!1,this.defaultPrevented=!1,this.target=null}preventDefault(){this.cancelable&&(this.defaultPrevented=!0)}}},"./src/dom/EventTarget.js":
/*!********************************!*\
  !*** ./src/dom/EventTarget.js ***!
  \********************************/
/*! exports provided: EventTarget */function(t,e,r){"use strict";r.r(e),r.d(e,"EventTarget",(function(){return i}));const n=Symbol("private properties");class i{constructor(){this[n]={},this[n].listeners={}}addEventListener(t,e){t in this[n].listeners||(this[n].listeners[t]=[]),this[n].listeners[t].push(e)}dispatchEvent(t){if(!(t.type in this[n].listeners))return!0;var e=this[n].listeners[t.type];return t.target=this,e.forEach((function(e){e(t)})),!t.defaultPrevented}removeEventListener(t,e){if(t in this[n].listeners)for(var r=this[n].listeners[t],i=0,o=r.length;i<o;i++)if(r[i]===e)return void r.splice(i,1)}}},"./src/dom/Node.js":
/*!*************************!*\
  !*** ./src/dom/Node.js ***!
  \*************************/
/*! exports provided: Node */function(t,e,r){"use strict";r.r(e),r.d(e,"Node",(function(){return c}));var n=r(/*! ../utils/objectCreationUtils.js */"./src/utils/objectCreationUtils.js"),i=r(/*! ./EventTarget.js */"./src/dom/EventTarget.js"),o=r(/*! ../utils/tagUtils.js */"./src/utils/tagUtils.js"),s=r(/*! ../utils/namespaces.js */"./src/utils/namespaces.js");const a={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};class c extends i.EventTarget{constructor(t="",e={},r=null){if(super(),t.includes(":")&&!e.local?[this.prefix,this.localName]=t.split(":"):(this.localName=t,this.prefix=null),this.nodeName=r===s.html?t.toUpperCase():t,this.namespaceURI=r,this.nodeType=c.ELEMENT_NODE,this.nodeValue=null!=e.nodeValue?e.nodeValue:null,this.childNodes=[],this.attrs=e.attrs||new Set,this.ownerDocument=e.ownerDocument||null,this.parentNode=null,e.childNodes)for(var n=0,i=e.childNodes.length;n<i;++n)this.appendChild(e.childNodes[n])}appendChild(t){return this.insertBefore(t)}cloneNode(t=!1){var e=Object(o.cloneNode)(this);return t&&this.childNodes.forEach((function(r){var n=r.cloneNode(t);e.appendChild(n)})),e}contains(t){if(t===this)return!1;for(;t.parentNode;){if(t===this)return!0;t=t.parentNode}return!1}getRootNode(){return this.parentNode&&this.parentNode.nodeType!==c.DOCUMENT_NODE?this.parentNode.getRootNode():this}hasChildNodes(){return!!this.childNodes.length}insertBefore(t,e){let r=this.childNodes.indexOf(e);if(-1===r&&(r=this.childNodes.length),t.nodeType===c.DOCUMENT_FRAGMENT_NODE){let r,n=e;for(;r=t.childNodes.pop();)this.insertBefore(r,n),n=r;return t}return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=this,this.childNodes.splice(r,0,t),t}isDefaultNamespace(t){switch(this.nodeType){case c.ELEMENT_NODE:return this.prefix?this.hasAttribute("xmlns")?this.getAttribute("xmlns"):!!this.parentNode&&this.parentNode.isDefaultNamespace(t):this.namespaceURI===t;case c.DOCUMENT_NODE:return this.documentElement.isDefaultNamespace(t);case c.ENTITY_NODE:case c.NOTATION_NODE:case c.DOCUMENT_TYPE_NODE:case c.DOCUMENT_FRAGMENT_NODE:return!1;case c.ATTRIBUTE_NODE:return!!this.ownerElement&&this.ownerElement.isDefaultNamespace(t);default:return!!this.parentNode&&this.parentNode.isDefaultNamespace(t)}}isEqualNode(t){this.normalize(),t.normalize();let e=this.nodeName===t.nodeName;return e=e&&this.localName===t.localName,e=e&&this.namespaceURI===t.namespaceURI,e=e&&this.prefix===t.prefix,e=e&&this.nodeValue===t.nodeValue,e=e&&this.childNodes.length===t.childNodes.length,!!e&&(e=e&&!this.childNodes.reduce((e,r,n)=>e&&r.isEqualNode(t.childNodes[n]),!0),this.nodeType===c.DOCUMENT_TYPE_NODE&&t.nodeType===c.DOCUMENT_TYPE_NODE&&(e=e&&this.publicId===t.publicId,e=e&&this.systemId===t.systemId,e=e&&this.internalSubset===t.internalSubset),e)}isSameNode(t){return this===t}lookupNamespacePrefix(t,e){if(this.namespaceURI&&this.namespaceURI===t&&this.prefix&&e.lookupNamespaceURI(this.prefix)===t)return this.prefix;for(const[r,n]of this.attrs.entries()){if(!r.includes(":"))continue;const[i,o]=r.split(":");if("xmlns"===i&&n===t&&e.lookupNamespaceURI(o)===t)return o}return this.parentNode?this.parentNode.lookupNamespacePrefix(t,e):null}lookupNamespaceURI(t){switch(this.nodeType){case c.ELEMENT_NODE:if(null!=this.namespaceURI&&this.prefix===t)return this.namespaceURI;for(const[e,r]of this.attrs.entries()){if(!e.includes(":"))continue;const[n,i]=e.split(":");if("xmlns"===n&&i===t)return null!=r?r:null;if("xmlns"===i&&null==t)return null!=r?r:null}return this.parentNode?this.parentNode.lookupNamespaceURI(t):null;case c.DOCUMENT_NODE:return this.documentElement.lookupNamespaceURI(t);case c.ENTITY_NODE:case c.NOTATION_NODE:case c.DOCUMENT_TYPE_NODE:case c.DOCUMENT_FRAGMENT_NODE:return null;case c.ATTRIBUTE_NODE:return this.ownerElement?this.ownerElement.lookupNamespaceURI(t):null;default:return this.parentNode?this.parentNode.lookupNamespaceURI(t):null}}lookupPrefix(t){if(!t)return null;switch(this.nodeType){case c.ELEMENT_NODE:return this.lookupNamespacePrefix(t,this);case c.DOCUMENT_NODE:return this.documentElement.lookupNamespacePrefix(t);case c.ENTITY_NODE:case c.NOTATION_NODE:case c.DOCUMENT_FRAGMENT_NODE:case c.DOCUMENT_TYPE_NODE:return null;case c.ATTRIBUTE_NODE:return this.ownerElement?this.ownerElement.lookupNamespacePrefix(t):null;default:return this.parentNode?this.parentNode.lookupNamespacePrefix(t):null}}normalize(){const t=[];for(const e of this.childNodes){const r=t.shift();if(r){if(e.nodeType===c.TEXT_NODE){if(!e.data){t.unshift(r);continue}if(r.nodeType===c.TEXT_NODE){const n=this.ownerDocument.createTextNode(r.data+e.data);t.push(n);continue}t.push(r,e)}}else e.data&&t.unshift(e)}this.childNodes=t}removeChild(t){t.parentNode=null;var e=this.childNodes.indexOf(t);return-1===e||this.childNodes.splice(e,1),t}replaceChild(t,e){var r=e.nextSibling;return this.removeChild(e),this.insertBefore(t,r),e}get nextSibling(){return this.parentNode&&this.parentNode.childNodes[this.parentNode.childNodes.indexOf(this)+1]||null}get previousSibling(){return this.parentNode&&this.parentNode.childNodes[this.parentNode.childNodes.indexOf(this)-1]||null}get textContent(){return this.nodeType===c.TEXT_NODE||this.nodeType===c.CDATA_SECTION_NODE||this.nodeType===c.COMMENT_NODE?this.data:this.childNodes.reduce((function(t,e){return t+e.textContent}),"")}set textContent(t){this.childNodes=[this.ownerDocument.createTextNode(t)]}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get firstChild(){return this.childNodes[0]||null}}Object(n.extendStatic)(c,a),Object(n.extend)(c,a)},"./src/dom/NodeFilter.js":
/*!*******************************!*\
  !*** ./src/dom/NodeFilter.js ***!
  \*******************************/
/*! exports provided: NodeFilter */function(t,e,r){"use strict";r.r(e),r.d(e,"NodeFilter",(function(){return i}));var n=r(/*! ../utils/objectCreationUtils.js */"./src/utils/objectCreationUtils.js");class i{acceptNode(){return i.FILTER_ACCEPT}}Object(n.extendStatic)(i,{FILTER_ACCEPT:1,FILTER_REJECT:2,FILTER_IGNORE:4,SHOW_ALL:-1,SHOW_ELEMENT:1,SHOW_TEXT:4,SHOW_ENTITY_REFERENCE:16,SHOW_ENTITY:32,SHOW_PROCESSING_INSTRUCTION:64,SHOW_COMMENT:128,SHOW_DOCUMENT:256,SHOW_DOCUMENT_TYPE:512,SHOW_DOCUMENT_FRAGMENT:1024,SHOW_NOTATION:2048})},"./src/dom/Text.js":
/*!*************************!*\
  !*** ./src/dom/Text.js ***!
  \*************************/
/*! exports provided: Text */function(t,e,r){"use strict";r.r(e),r.d(e,"Text",(function(){return o}));var n=r(/*! ./CharacterData.js */"./src/dom/CharacterData.js"),i=r(/*! ./Node.js */"./src/dom/Node.js");class o extends n.CharacterData{constructor(t,e){super(t,e),this.nodeType=i.Node.TEXT_NODE}}},"./src/dom/Window.js":
/*!***************************!*\
  !*** ./src/dom/Window.js ***!
  \***************************/
/*! exports provided: Window */function(t,e,r){"use strict";r.r(e),r.d(e,"Window",(function(){return S}));var n=r(/*! ../utils/objectCreationUtils.js */"./src/utils/objectCreationUtils.js"),i=r(/*! ./EventTarget.js */"./src/dom/EventTarget.js"),o=r(/*! ./Node.js */"./src/dom/Node.js"),s=r(/*! ./Document.js */"./src/dom/Document.js"),a=r(/*! ./DocumentFragment.js */"./src/dom/DocumentFragment.js"),c=r(/*! ./Text.js */"./src/dom/Text.js"),l=r(/*! ./CustomEvent.js */"./src/dom/CustomEvent.js"),u=r(/*! ./Event.js */"./src/dom/Event.js"),h=r(/*! ./Element.js */"./src/dom/Element.js"),d=r(/*! ./Attr.js */"./src/dom/Attr.js"),f=r(/*! ./html/HTMLImageElement.js */"./src/dom/html/HTMLImageElement.js"),p=r(/*! ./html/HTMLLinkElement.js */"./src/dom/html/HTMLLinkElement.js"),m=r(/*! ./html/HTMLScriptElement.js */"./src/dom/html/HTMLScriptElement.js"),g=r(/*! ./html/HTMLElement.js */"./src/dom/html/HTMLElement.js"),v=r(/*! ./svg/SVGPoint.js */"./src/dom/svg/SVGPoint.js"),y=r(/*! ./svg/SVGMatrix.js */"./src/dom/svg/SVGMatrix.js"),b=r(/*! ./svg/SVGElement.js */"./src/dom/svg/SVGElement.js"),w=r(/*! ./svg/SVGSVGElement.js */"./src/dom/svg/SVGSVGElement.js"),x=r(/*! ./svg/SVGPathElement.js */"./src/dom/svg/SVGPathElement.js"),_=r(/*! ./svg/SVGGraphicsElement.js */"./src/dom/svg/SVGGraphicsElement.js"),T=r(/*! ./svg/SVGTextContentElement.js */"./src/dom/svg/SVGTextContentElement.js"),E=r(/*! ../utils/strUtils.js */"./src/utils/strUtils.js"),N=r(/*! ../utils/defaults.js */"./src/utils/defaults.js");class S extends i.EventTarget{constructor(){super(),this.document=new s.Document,this.document.defaultView=this,this.self=this;const t=this.document;this.Image=class{constructor(e,r){const n=t.createElement("img");return null!=e&&n.setAttribute("width",e),null!=r&&n.setAttribute("height",r),n}}}getComputedStyle(t){return{getPropertyValue(e){let r;do{r=t.style[e]||t.getAttribute(e)}while(null==r&&(t=t.parentNode)&&1===t.nodeType);return r||N[Object(E.camelCase)(e)]||null}}}}let O=0;const C=global.Date.now(),A={now:()=>Date.now()-C},M={Window:S,Document:s.Document,DocumentFragment:a.DocumentFragment,Node:o.Node,EventTarget:i.EventTarget,Text:c.Text,Attr:d.Attr,Element:h.Element,CustomEvent:l.CustomEvent,Event:u.Event,HTMLElement:g.HTMLElement,HTMLLinkElement:p.HTMLLinkElement,HTMLScriptElement:m.HTMLScriptElement,HTMLImageElement:f.HTMLImageElement,SVGMatrix:y.SVGMatrix,SVGPoint:v.SVGPoint,SVGElement:b.SVGElement,SVGSVGElement:w.SVGSVGElement,SVGPathElement:x.SVGPathElement,SVGGraphicsElement:_.SVGGraphicsElement,SVGTextContentElement:T.SVGTextContentElement,setTimeout:global.setTimeout,clearTimeout:global.clearTimeout,pageXOffset:0,pageYOffset:0,Date:global.Date,requestAnimationFrame:t=>{const e=(new global.Date).getTime(),r=Math.max(0,16-(e-O));return global.setTimeout(()=>{O=e+r,t(O)},r)},cancelAnimationFrame:global.clearTimeout,performance:A};Object(n.extend)(S,M)},"./src/dom/html/HTMLElement.js":
/*!*************************************!*\
  !*** ./src/dom/html/HTMLElement.js ***!
  \*************************************/
/*! exports provided: HTMLElement */function(t,e,r){"use strict";r.r(e),r.d(e,"HTMLElement",(function(){return i}));var n=r(/*! ../Element.js */"./src/dom/Element.js");class i extends n.Element{}},"./src/dom/html/HTMLImageElement.js":
/*!******************************************!*\
  !*** ./src/dom/html/HTMLImageElement.js ***!
  \******************************************/
/*! exports provided: HTMLImageElement */function(t,e,r){"use strict";r.r(e),r.d(e,"HTMLImageElement",(function(){return a}));var n=r(/*! image-size */"image-size"),i=r.n(n),o=r(/*! ../Event.js */"./src/dom/Event.js"),s=r(/*! ./HTMLElement.js */"./src/dom/html/HTMLElement.js");class a extends s.HTMLElement{constructor(...t){super(...t),this.naturalWidth=0,this.naturalHeight=0,this.complete=!1}}Object.defineProperties(a.prototype,{src:{get(){return this.getAttribute("src")},set(t){this.setAttribute("src",t),i()(t,(t,e)=>{t?this.dispatchEvent(new o.Event("error")):(this.naturalWidth=e.width,this.naturalHeight=e.height,this.complete=!0,this.dispatchEvent(new o.Event("load")))})}},height:{get(){return this.getAttribute("height")||this.naturalHeight},set(t){this.setAttribute("height",t)}},width:{get(){return this.getAttribute("width")||this.naturalWidth},set(t){this.setAttribute("width",t)}}})},"./src/dom/html/HTMLLinkElement.js":
/*!*****************************************!*\
  !*** ./src/dom/html/HTMLLinkElement.js ***!
  \*****************************************/
/*! exports provided: HTMLLinkElement */function(t,e,r){"use strict";r.r(e),r.d(e,"HTMLLinkElement",(function(){return i}));var n=r(/*! ./HTMLElement.js */"./src/dom/html/HTMLElement.js");class i extends n.HTMLElement{}Object.defineProperties(i.prototype,{href:{get(){return this.getAttribute("href")},set(t){this.setAttribute("href",t)}},rel:{get(){return this.getAttribute("rel")},set(t){this.setAttribute("rel",t)}},type:{get(){return this.getAttribute("type")},set(t){this.setAttribute("type",t)}}})},"./src/dom/html/HTMLParser.js":
/*!************************************!*\
  !*** ./src/dom/html/HTMLParser.js ***!
  \************************************/
/*! exports provided: HTMLParser */function(t,e,r){"use strict";r.r(e),r.d(e,"HTMLParser",(function(){return o}));var n=r(/*! sax */"sax"),i=r.n(n);const o=function(t,e){let r=e,n=e.ownerDocument,o=null;e.nodeType!==e.DOCUMENT_NODE?t='<svgdom:wrapper xmlns:svgdom="svgdom:rocks">'+t+"</svgdom:wrapper>":n=e;const s=i.a.parser(!0,{xmlns:!0,strictEntities:!0});s.onerror=t=>{throw t},s.ondoctype=t=>{if(r!==n)throw new Error("Doctype can only be appended to document");r.appendChild(n.implementation.createDocumentType())},s.ontext=t=>r.appendChild(n.createTextNode(t)),s.oncomment=t=>r.appendChild(n.createComment(t)),s.onopentag=t=>{if("svgdom:wrapper"===t.name)return;const e=t.attributes,i=t.uri||r.lookupNamespaceURI(t.prefix||null);var o=n.createElementNS(i,t.name);for(const[t,r]of Object.entries(e))o.setAttributeNS(r.uri,t,r.value);r.appendChild(o),r=o},s.onclosetag=t=>{"svgdom:wrapper"!==t.name&&(r=r.parentNode)},s.onopencdata=()=>{o=n.createCDATASection("")},s.oncdata=t=>{o.appendData(t)},s.onclosecdata=()=>{r.appendChild(o)},s.write(t)}},"./src/dom/html/HTMLScriptElement.js":
/*!*******************************************!*\
  !*** ./src/dom/html/HTMLScriptElement.js ***!
  \*******************************************/
/*! exports provided: HTMLScriptElement */function(t,e,r){"use strict";r.r(e),r.d(e,"HTMLScriptElement",(function(){return i}));var n=r(/*! ./HTMLElement.js */"./src/dom/html/HTMLElement.js");class i extends n.HTMLElement{}Object.defineProperties(i.prototype,{src:{get(){return this.getAttribute("src")},set(t){this.setAttribute("src",t)}},type:{get(){return this.getAttribute("type")},set(t){this.setAttribute("type",t)}}})},"./src/dom/mixins/ChildNode.js":
/*!*************************************!*\
  !*** ./src/dom/mixins/ChildNode.js ***!
  \*************************************/
/*! exports provided: ChildNode */function(t,e,r){"use strict";r.r(e),r.d(e,"ChildNode",(function(){return i}));var n=r(/*! ../../utils/nodesToNode.js */"./src/utils/nodesToNode.js");const i={before(t){if(!this.parentNode)return;const e=Object(n.nodesToNode)(t,this.ownerDocument);this.parent.insertBefore(e,this)},after(t){if(!this.parentNode)return;const e=Object(n.nodesToNode)(t,this.ownerDocument);this.parent.insertBefore(e,this.nextSibling)},replaceWith(t){if(!this.parentNode)return;const e=this.nextSibling;this.delete();const r=Object(n.nodesToNode)(t);this.parent.insertBefore(r,e)},remove(){this.parentNode&&this.parentNode.removeChild(this)}}},"./src/dom/mixins/NonDocumentTypeChildNode.js":
/*!****************************************************!*\
  !*** ./src/dom/mixins/NonDocumentTypeChildNode.js ***!
  \****************************************************/
/*! exports provided: NonDocumentTypeChildNode */function(t,e,r){"use strict";r.r(e),r.d(e,"NonDocumentTypeChildNode",(function(){return n}));const n={};Object.defineProperties(n,{previousElementSibling:{get(){let t;for(;t=this.previousSibling;)if(t.nodeType===t.ELEMENT_NODE)return t;return null}},nextElementSibling:{get(){let t;for(;t=this.nextSibling;)if(t.nodeType===t.ELEMENT_NODE)return t;return null}}})},"./src/dom/mixins/NonElementParentNode.js":
/*!************************************************!*\
  !*** ./src/dom/mixins/NonElementParentNode.js ***!
  \************************************************/
/*! exports provided: NonElementParentNode */function(t,e,r){"use strict";r.r(e),r.d(e,"NonElementParentNode",(function(){return o}));var n=r(/*! ../../utils/NodeIterator.js */"./src/utils/NodeIterator.js"),i=r(/*! ../NodeFilter.js */"./src/dom/NodeFilter.js");const o={getElementById(t){const e=new n.NodeIterator(this,i.NodeFilter.SHOW_ELEMENT,e=>t===e.id?i.NodeFilter.FILTER_ACCEPT:i.NodeFilter.FILTER_IGNORE,!1);for(const t of e)return t;return null}}},"./src/dom/mixins/ParentNode.js":
/*!**************************************!*\
  !*** ./src/dom/mixins/ParentNode.js ***!
  \**************************************/
/*! exports provided: ParentNode */function(t,e,r){"use strict";r.r(e),r.d(e,"ParentNode",(function(){return a}));var n=r(/*! ../../other/CssQuery.js */"./src/other/CssQuery.js"),i=r(/*! ../../utils/NodeIterator.js */"./src/utils/NodeIterator.js"),o=r(/*! ../NodeFilter.js */"./src/dom/NodeFilter.js"),s=r(/*! ../../utils/nodesToNode.js */"./src/utils/nodesToNode.js");const a={matchWithScope(t,e){return new n.CssQuery(t).matches(this,e)},query(t,e,r=!1){const n=new i.NodeIterator(e,o.NodeFilter.SHOW_ELEMENT,r=>r.matchWithScope(t,e)?o.NodeFilter.FILTER_ACCEPT:o.NodeFilter.FILTER_IGNORE,!1),s=[];for(const t of n)if(s.push(t),r)return s;return s},querySelectorAll(t){return this.query(t,this)},querySelector(t){return this.query(t,this,!0)[0]||null},prepend(t){const e=Object(s.nodesToNode)(t,this.ownerDocument);this.insertBefore(e,this.firstChild)},append(t){const e=Object(s.nodesToNode)(t,this.ownerDocument);this.appendChild(e)},replaceChildren(t){for(;this.firstChild;)this.removeChild(this.firstChild);this.append(t)}};Object.defineProperties(a,{children:{get(){return this.childNodes.filter((function(t){return t.nodeType===t.ELEMENT_NODE}))}},firstElementChild:{get(){for(const t of this.childNodes)if(t&&t.nodeType===t.ELEMENT_NODE)return t;return null}},lastElementChild:{get(){for(const t of this.childNodes.slice().reverse())if(t&&t.nodeType===t.ELEMENT_NODE)return t;return null}},childElementCount:{get(){return this.children.length}}})},"./src/dom/mixins/elementAccess.js":
/*!*****************************************!*\
  !*** ./src/dom/mixins/elementAccess.js ***!
  \*****************************************/
/*! exports provided: elementAccess */function(t,e,r){"use strict";r.r(e),r.d(e,"elementAccess",(function(){return o}));var n=r(/*! ../NodeFilter.js */"./src/dom/NodeFilter.js"),i=r(/*! ../../utils/NodeIterator.js */"./src/utils/NodeIterator.js");const o={getElementsByTagName(t){return[...new i.NodeIterator(this,n.NodeFilter.SHOW_ELEMENT,e=>e.nodeName===t?n.NodeFilter.FILTER_ACCEPT:n.NodeFilter.FILTER_IGNORE,!1)]},getElementsByTagNameNS(t,e){return[...new i.NodeIterator(this,n.NodeFilter.SHOW_ELEMENT,r=>r.isNamespace(t)&&r.nodeName===e?n.NodeFilter.FILTER_ACCEPT:n.NodeFilter.FILTER_IGNORE,!1)]},getElementsByClassName(t){return[...new i.NodeIterator(this,n.NodeFilter.SHOW_ELEMENT,e=>((t,e)=>t.className.split(/\s+/).includes(e))(e,t)?n.NodeFilter.FILTER_ACCEPT:n.NodeFilter.FILTER_IGNORE,!1)]}}},"./src/dom/svg/SVGElement.js":
/*!***********************************!*\
  !*** ./src/dom/svg/SVGElement.js ***!
  \***********************************/
/*! exports provided: SVGElement */function(t,e,r){"use strict";r.r(e),r.d(e,"SVGElement",(function(){return i}));var n=r(/*! ../Element.js */"./src/dom/Element.js");class i extends n.Element{get ownerSVGElement(){let t,e=null;for(;t=this.parentNode;)"svg"===t.nodeName&&(e=t);return e}get viewportElement(){let t,e=null;for(;t=this.parentNode;)["svg","symbol"].conains(t.nodeName)&&(e=t);return e}}},"./src/dom/svg/SVGGraphicsElement.js":
/*!*******************************************!*\
  !*** ./src/dom/svg/SVGGraphicsElement.js ***!
  \*******************************************/
/*! exports provided: SVGGraphicsElement */function(t,e,r){"use strict";r.r(e),r.d(e,"SVGGraphicsElement",(function(){return a}));var n=r(/*! ./SVGElement.js */"./src/dom/svg/SVGElement.js"),i=r(/*! ../../utils/bboxUtils.js */"./src/utils/bboxUtils.js"),o=r(/*! ../../utils/regex.js */"./src/utils/regex.js"),s=r(/*! ./SVGMatrix.js */"./src/dom/svg/SVGMatrix.js");class a extends n.SVGElement{generateViewBoxMatrix(){if(!["marker","symbol","pattern","svg","view"].includes(this.nodeName))return new s.SVGMatrix;var t=(this.getAttribute("viewBox")||"").split(o.delimiter).map(parseFloat).filter(t=>!isNaN(t)),e=parseFloat(this.getAttribute("width"))||0,r=parseFloat(this.getAttribute("height"))||0,n=parseFloat(this.getAttribute("x"))||0,i=parseFloat(this.getAttribute("y"))||0;return e&&r?(4!==t.length&&(t=[0,0,e,r]),(new s.SVGMatrix).translate(n,i).scale(e/t[2],r/t[3]).translate(-t[0],-t[1])):(new s.SVGMatrix).translate(n,i)}getBBox(){return Object(i.getPointCloud)(this).bbox()}getBoundingClientRect(){let t=this.matrixify();return this.parentNode&&"#document"!==this.parentNode.nodeName&&(t=this.parentNode.getScreenCTM().multiply(t)),Object(i.getPointCloud)(this,!1,!0).transform(t).bbox()}getCTM(){for(var t=this.matrixify(),e=this;(e=e.parentNode)&&!(["svg","symbol","image","pattern","marker"].indexOf(e.nodeName)>-1);)if(t=t.multiply(e.matrixify()),"#document"===e.nodeName)return this.getScreenCTM();return e.generateViewBoxMatrix().multiply(t)}getInnerMatrix(){var t=this.matrixify();return["svg","symbol","image","pattern","marker"].indexOf(this.nodeName)>-1&&(t=this.generateViewBoxMatrix().multiply(t)),t}getScreenCTM(){var t=this.getInnerMatrix();return this.parentNode&&this.parentNode instanceof a?this.parentNode.getScreenCTM().multiply(t):t}matrixify(){return(this.getAttribute("transform")||"").trim().split(o.transforms).slice(0,-1).map((function(t){var e=t.trim().split("(");return[e[0].trim(),e[1].split(o.delimiter).map((function(t){return parseFloat(t.trim())}))]})).reduce((function(t,e){return"matrix"===e[0]?t.multiply({a:(r=e[1])[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]}):t[e[0]].apply(t,e[1]);var r}),new s.SVGMatrix)}get transform(){throw new Error("Not implemented")}}},"./src/dom/svg/SVGMatrix.js":
/*!**********************************!*\
  !*** ./src/dom/svg/SVGMatrix.js ***!
  \**********************************/
/*! exports provided: matrixFactory, SVGMatrix */function(t,e,r){"use strict";r.r(e),r.d(e,"matrixFactory",(function(){return i})),r.d(e,"SVGMatrix",(function(){return o}));const n=function(t){return t%360*Math.PI/180};function i(t,e,r,n,i,s){var a=new o;return a.a=t,a.b=e,a.c=r,a.d=n,a.e=i,a.f=s,a}class o{constructor(){this.a=this.d=1,this.b=this.c=this.e=this.f=0}inverse(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.e,o=this.f,s=t*n-e*r;if(!s)throw new Error("Cannot invert "+this);var a=n/s,c=-e/s,l=-r/s,u=t/s,h=-(a*i+l*o),d=-(c*i+u*o);return this.a=a,this.b=c,this.c=l,this.d=u,this.e=h,this.f=d,this}multiply(t){var e=new o;return e.a=this.a*t.a+this.c*t.b+0*this.e,e.b=this.b*t.a+this.d*t.b+0*this.f,e.c=this.a*t.c+this.c*t.d+0*this.e,e.d=this.b*t.c+this.d*t.d+0*this.f,e.e=this.a*t.e+this.c*t.f+1*this.e,e.f=this.b*t.e+this.d*t.f+1*this.f,e}rotate(t,e,r){return t=t%360*Math.PI/180,this.multiply(i(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),e?-Math.cos(t)*e+Math.sin(t)*r+e:0,r?-Math.sin(t)*e-Math.cos(t)*r+r:0))}scale(t,e=t){return this.multiply(i(t,0,0,e,0,0))}skew(t,e){return this.multiply(i(1,Math.tan(n(e)),Math.tan(n(t)),1,0,0))}skewX(t){return this.skew(t,0)}skewY(t){return this.skew(0,t)}toString(){return"SVGMatrix"}translate(t=0,e=0){return this.multiply(i(1,0,0,1,t,e))}}},"./src/dom/svg/SVGPathElement.js":
/*!***************************************!*\
  !*** ./src/dom/svg/SVGPathElement.js ***!
  \***************************************/
/*! exports provided: SVGPathElement */function(t,e,r){"use strict";r.r(e),r.d(e,"SVGPathElement",(function(){return o}));var n=r(/*! ./SVGGraphicsElement.js */"./src/dom/svg/SVGGraphicsElement.js"),i=r(/*! ../../utils/pathUtils.js */"./src/utils/pathUtils.js");class o extends n.SVGGraphicsElement{getPointAtLength(t){return i.pointAtLength(this.getAttribute("d"),t)}getTotalLength(){return i.length(this.getAttribute("d"))}}},"./src/dom/svg/SVGPoint.js":
/*!*********************************!*\
  !*** ./src/dom/svg/SVGPoint.js ***!
  \*********************************/
/*! exports provided: SVGPoint */function(t,e,r){"use strict";r.r(e),r.d(e,"SVGPoint",(function(){return n}));class n{constructor(){this.x=0,this.y=0}matrixTransform(t){var e=new n;return e.x=t.a*this.x+t.c*this.y+1*t.e,e.y=t.b*this.x+t.d*this.y+1*t.f,e}}},"./src/dom/svg/SVGSVGElement.js":
/*!**************************************!*\
  !*** ./src/dom/svg/SVGSVGElement.js ***!
  \**************************************/
/*! exports provided: SVGSVGElement */function(t,e,r){"use strict";r.r(e),r.d(e,"SVGSVGElement",(function(){return a}));var n=r(/*! ./SVGGraphicsElement.js */"./src/dom/svg/SVGGraphicsElement.js"),i=r(/*! ../../other/Box.js */"./src/other/Box.js"),o=r(/*! ./SVGMatrix.js */"./src/dom/svg/SVGMatrix.js"),s=r(/*! ./SVGPoint.js */"./src/dom/svg/SVGPoint.js");class a extends n.SVGGraphicsElement{createSVGMatrix(){return new o.SVGMatrix}createSVGPoint(){return new s.SVGPoint}createSVGRect(){return new i.Box}}},"./src/dom/svg/SVGTextContentElement.js":
/*!**********************************************!*\
  !*** ./src/dom/svg/SVGTextContentElement.js ***!
  \**********************************************/
/*! exports provided: SVGTextContentElement */function(t,e,r){"use strict";r.r(e),r.d(e,"SVGTextContentElement",(function(){return i}));var n=r(/*! ./SVGGraphicsElement.js */"./src/dom/svg/SVGGraphicsElement.js");class i extends n.SVGGraphicsElement{getComputedTextLength(){return this.getBBox().width}}},"./src/factories.js":
/*!**************************!*\
  !*** ./src/factories.js ***!
  \**************************/
/*! exports provided: createDocument, createHTMLDocument, createSVGDocument, createWindow, createHTMLWindow, createSVGWindow */function(t,e,r){"use strict";r.r(e),r.d(e,"createDocument",(function(){return s})),r.d(e,"createHTMLDocument",(function(){return a})),r.d(e,"createSVGDocument",(function(){return h})),r.d(e,"createWindow",(function(){return c})),r.d(e,"createHTMLWindow",(function(){return l})),r.d(e,"createSVGWindow",(function(){return u}));var n=r(/*! ./dom/Window.js */"./src/dom/Window.js"),i=r(/*! ./dom/Document.js */"./src/dom/Document.js"),o=r(/*! ./utils/namespaces.js */"./src/utils/namespaces.js");const{createDocument:s,createHTMLDocument:a}=i.DOMImplementation,c=(...t)=>{const e=new n.Window,r=s(...t);return e.document=r,r.defaultView=e,e},l=t=>{const e=new n.Window,r=i.DOMImplementation.createHTMLDocument(t);return e.document=r,r.defaultView=e,e},u=()=>c(o.svg,"svg"),h=()=>s(o.svg,"svg")},"./src/other/Box.js":
/*!**************************!*\
  !*** ./src/other/Box.js ***!
  \**************************/
/*! exports provided: Box, NoBox */function(t,e,r){"use strict";r.r(e),r.d(e,"Box",(function(){return o})),r.d(e,"NoBox",(function(){return s}));var n=r(/*! ../utils/regex.js */"./src/utils/regex.js"),i=r(/*! ./Point.js */"./src/other/Point.js");class o{constructor(t){t="string"==typeof t?t.split(n.delimiter).map(parseFloat):Array.isArray(t)?t:"object"==typeof t?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):[0,0,0,0],this.x=this.left=t[0],this.y=this.top=t[1],this.width=t[2],this.height=t[3],this.right=this.left+this.width,this.bottom=this.top+this.height}merge(t){if(t instanceof s)return new o(this);var e=Math.min(this.x,t.x),r=Math.min(this.y,t.y);return new o(e,r,Math.max(this.x+this.width,t.x+t.width)-e,Math.max(this.y+this.height,t.y+t.height)-r)}transform(t){var e=1/0,r=-1/0,n=1/0,s=-1/0;return[new i.Point(this.x,this.y),new i.Point(this.x+this.width,this.y),new i.Point(this.x,this.y+this.height),new i.Point(this.x+this.width,this.y+this.height)].forEach((function(i){i=i.transform(t),e=Math.min(e,i.x),r=Math.max(r,i.x),n=Math.min(n,i.y),s=Math.max(s,i.y)})),new o(e,n,r-e,s-n)}}class s extends o{merge(t){return t instanceof s?new s:new o(t)}transform(t){return new s}}},"./src/other/CssQuery.js":
/*!*******************************!*\
  !*** ./src/other/CssQuery.js ***!
  \*******************************/
/*! exports provided: CssQuery */function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"CssQuery",(function(){return CssQuery}));var _utils_strUtils_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(/*! ../utils/strUtils.js */"./src/utils/strUtils.js"),_utils_regex_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(/*! ../utils/regex.js */"./src/utils/regex.js"),_utils_namespaces_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(/*! ../utils/namespaces.js */"./src/utils/namespaces.js");class CssQuery{constructor(t){if(CssQuery.cache.has(t))this.queries=CssQuery.cache.get(t);else{var e=Object(_utils_strUtils_js__WEBPACK_IMPORTED_MODULE_0__.splitNotInBrackets)(t,",");e=e.map(t=>{var e=0,r=0;t=t.replace(/[()[\]>~+]/g,(function(t){return"("===t?++e:")"===t?--e:"["===t?++r:"]"===t&&--r,"()[]".indexOf(t)>-1||r||e?t:" "+t+" "}));for(var n=[],i="%",o=0,s=(t=Object(_utils_strUtils_js__WEBPACK_IMPORTED_MODULE_0__.splitNotInBrackets)(t," ").filter(t=>!!t.length)).length;o<s;++o)">~+%".indexOf(t[o])>-1?i=t[o]:(n.push([i,t[o]]),i="%");return n}),this.queries=e,CssQuery.cacheKeys.length>50&&CssQuery.cache.delete(CssQuery.cacheKeys.shift()),CssQuery.cache.set(t,e),CssQuery.cacheKeys.push(t)}}matches(t,e){for(var r=this.queries.length;r--;)if(this.matchHelper(this.queries[r],t,e))return!0;return!1}matchHelper(t,e,r){var n=(t=t.slice()).pop();if(!new CssQueryNode(n[1]).matches(e,r))return!1;if(!t.length)return!0;if(","===n[0])return!0;if("+"===n[0])return!!e.previousSibling&&this.matchHelper(t,e.previousSibling,r);if(">"===n[0])return!!e.parentNode&&this.matchHelper(t,e.parentNode,r);if("~"===n[0]){for(;e=e.previousSibling;)if(this.matchHelper(t,e,r))return!0;return!1}if("%"===n[0]){for(;e=e.parentNode;)if(this.matchHelper(t,e,r))return!0;return!1}}}CssQuery.cache=new Map,CssQuery.cacheKeys=[];const nth=(node,arr,nth)=>{if("even"===nth?nth="2n":"odd"===nth&&(nth="2n+1"),/[^\d\-n+*/]+/.test(nth))return!1;nth=nth.replace("n","*n");for(var i,n=0,nl=arr.length;n<nl&&(i=eval(nth),!(i>nl));++n)if(arr[i-1]===node)return!0;return!1},lower=t=>t.toLowerCase(),eq=(t,e,r)=>r?lower(t)===lower(e):t===e,attributeMatcher={"=":(t,e,r)=>eq(e,r,t),"~=":(t,e,r)=>r.split(_utils_regex_js__WEBPACK_IMPORTED_MODULE_1__.delimiter).filter(r=>eq(r,e,t)).length>0,"|=":(t,e,r)=>eq(r.split(_utils_regex_js__WEBPACK_IMPORTED_MODULE_1__.delimiter)[0],e,t),"^=":(t,e,r)=>t?lower(r).startsWith(lower(e)):r.startsWith(e),"$=":(t,e,r)=>t?lower(r).endsWith(lower(e)):r.endsWith(e),"*=":(t,e,r)=>t?lower(r).includes(lower(e)):r.includes(e),"*":(t,e,r)=>null!=r},getAttributeValue=(t,e,r)=>t&&"*"!==t?r.getAttribute(t+":"+e):r.getAttribute(e),pseudoMatcher={"first-child":(t,e)=>e.parentNode&&e.parentNode.firstChild===e,"last-child":(t,e)=>e.parentNode&&e.parentNode.lastChild===e,"nth-child":(t,e)=>e.parentNode&&nth(e,e.parentNode.childNodes,t),"nth-last-child":(t,e)=>e.parentNode&&nth(e,e.parentNode.childNodes.slice().reverse(),t),"first-of-type":(t,e)=>e.parentNode&&e.parentNode.childNodes.filter(t=>t.nodeName===e.nodeName)[0]===e,"last-of-type":(t,e)=>e.parentNode&&e.parentNode.childNodes.filter(t=>t.nodeName===e.nodeName).pop()===e,"nth-of-type":(t,e)=>e.parentNode&&nth(e,e.parentNode.childNodes.filter(t=>t.nodeName===e.nodeName),t),"nth-last-of-type":(t,e)=>e.parentNode&&nth(e,e.parentNode.childNodes.filter(t=>t.nodeName===e.nodeName).reverse(),t),"only-child":(t,e)=>e.parentNode&&1===e.parentNode.childNodes.length,"only-of-type":(t,e)=>e.parentNode&&1===e.parentNode.childNodes.filter(t=>t.nodeName===e.nodeName).length,root:(t,e)=>e.ownerDocument.documentElement===e,not:(t,e,r)=>!new CssQuery(t).matches(e,r),matches:(t,e,r)=>new CssQuery(t).matches(e,r),scope:(t,e,r)=>e===r};class CssQueryNode{constructor(t){this.tag="",this.id="",this.classList=[],this.attrs=[],this.pseudo=[];var e=t.match(/^[\w-]+|^\*/);for(e&&(this.tag=e[0],t=t.slice(this.tag.length));e=/:([\w-]+)(?:\((.+)\))?/g.exec(t);)this.pseudo.push(pseudoMatcher[e[1]].bind(this,Object(_utils_strUtils_js__WEBPACK_IMPORTED_MODULE_0__.removeQuotes)(e[2]||""))),t=t.slice(0,e.index)+t.slice(e.index+e[0].length);for((e=t.match(/#([\w-]+)/))&&(this.id=e[1],t=t.slice(0,e.index)+t.slice(e.index+e[0].length));e=/\.([\w-]+)/g.exec(t);)this.classList.push(e[1]),t=t.slice(0,e.index)+t.slice(e.index+e[0].length);for(;e=/\[([\w-*]+\|)?([\w-]+)(([=^~$|*]+)(.+?)( +[iI])?)?\]/g.exec(t);){const r=e[1]?e[1].split("|")[0]:null;this.attrs.push({name:e[2],getValue:getAttributeValue.bind(this,r,e[2]),matcher:attributeMatcher[e[4]||"*"].bind(this,!!e[6],Object(_utils_strUtils_js__WEBPACK_IMPORTED_MODULE_0__.removeQuotes)((e[5]||"").trim()))}),t=t.slice(0,e.index)+t.slice(e.index+e[0].length)}}matches(t,e){var r;if(1!==t.nodeType)return!1;if(t.namespaceURI===_utils_namespaces_js__WEBPACK_IMPORTED_MODULE_2__.html&&(this.tag=this.tag.toUpperCase()),this.tag&&this.tag!==t.nodeName&&"*"!==this.tag)return!1;if(this.id&&this.id!==t.id)return!1;var n=(t.getAttribute("class")||"").split(_utils_regex_js__WEBPACK_IMPORTED_MODULE_1__.delimiter).filter(t=>!!t.length);if(this.classList.filter(t=>n.indexOf(t)<0).length)return!1;for(r=this.attrs.length;r--;){var i=this.attrs[r].getValue(t);if(null===i||!this.attrs[r].matcher(i))return!1}for(r=this.pseudo.length;r--;)if(!this.pseudo[r](t,e))return!1;return!0}}},"./src/other/Point.js":
/*!****************************!*\
  !*** ./src/other/Point.js ***!
  \****************************/
/*! exports provided: Point */function(t,e,r){"use strict";r.r(e),r.d(e,"Point",(function(){return i}));var n=r(/*! ../dom/svg/SVGPoint.js */"./src/dom/svg/SVGPoint.js");class i{constructor(t,e){var r;r=Array.isArray(t)?{x:t[0],y:t[1]}:"object"==typeof t?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=r.x,this.y=r.y}abs(){return Math.sqrt(this.absQuad())}absQuad(){return this.x*this.x+this.y*this.y}add(t,e){var r=new i(t,e);return new i(this.x+r.x,this.y+r.y)}angleTo(t){var e=Math.sign(this.x*t.y-this.y*t.x);return(e=e||1)*Math.acos(Math.round(this.dot(t)/(this.abs()*t.abs())*1e6)/1e6)}clone(){return new i(this)}closeTo(t,e=1e-5){return this.equals(t)||Math.abs(this.x-t.x)<e&&Math.abs(this.y-t.y)<e}div(t){return new i(this.x/t,this.y/t)}dot(t){return this.x*t.x+this.y*t.y}equals(t){return this.x===t.x&&this.y===t.y}mul(t){return new i(this.x*t,this.y*t)}native(){var t=new n.SVGPoint;return t.x=this.x,t.y=this.y,t}normal(){return new i(this.y,-this.x)}normalize(){var t=this.abs();if(!t)throw new Error("Can't normalize vector of zero length");return this.div(t)}reflectAt(t){return t.add(t.sub(this))}sub(t,e){var r=new i(t,e);return new i(this.x-r.x,this.y-r.y)}toArray(){return[this.x,this.y]}toPath(){return["M",this.x,this.y].join(" ")}transform(t){return new i(this.native().matrixTransform(t))}}},"./src/utils/NodeIterator.js":
/*!***********************************!*\
  !*** ./src/utils/NodeIterator.js ***!
  \***********************************/
/*! exports provided: NodeIterator */function(t,e,r){"use strict";r.r(e),r.d(e,"NodeIterator",(function(){return o}));var n=r(/*! ../dom/NodeFilter.js */"./src/dom/NodeFilter.js");const i=(t,e)=>t===n.NodeFilter.SHOW_ALL||(!!(t&n.NodeFilter.SHOW_ELEMENT&&e.nodeType===e.ELEMENT_NODE)||(!!(t&n.NodeFilter.SHOW_TEXT&&e.nodeType===e.TEXT_NODE)||(!!(t&n.NodeFilter.SHOW_ENTITY_REFERENCE&&e.nodeType===e.ENTITY_REFERENCE_NODE)||(!!(t&n.NodeFilter.SHOW_ENTITY&&e.nodeType===e.ENTITY_NODE)||(!!(t&n.NodeFilter.SHOW_PROCESSING_INSTRUCTION&&e.nodeType===e.PROCESSING_INSTRUCTION_NODE)||(!!(t&n.NodeFilter.SHOW_COMMENT&&e.nodeType===e.COMMENT_NODE)||(!!(t&n.NodeFilter.SHOW_DOCUMENT&&e.nodeType===e.DOCUMENT_NODE)||(!!(t&n.NodeFilter.SHOW_DOCUMENT_TYPE&&e.nodeType===e.DOCUMENT_TYPE_NODE)||(!!(t&n.NodeFilter.SHOW_DOCUMENT_FRAGMENT&&e.nodeType===e.DOCUMENT_FRAGMENT_NODE)||!!(t&n.NodeFilter.SHOW_NOTATION&&e.nodeType===e.NOTATION_NODE))))))))));class o{constructor(t,e=n.NodeFilter.SHOW_ALL,r=(()=>n.NodeFilter.FILTER_ACCEPT),i=!0){this.root=i?{childNodes:[t]}:t,this.whatToShow=e,this.filter=r}*[Symbol.iterator](){const t=this.root.childNodes;for(const e of t){if(!i(this.whatToShow,e))continue;const t=this.filter(e);t!==n.NodeFilter.FILTER_REJECT&&(t===n.NodeFilter.FILTER_ACCEPT&&(yield e),yield*new o(e,this.whatToShow,this.filter,!1))}return this}}},"./src/utils/PointCloud.js":
/*!*********************************!*\
  !*** ./src/utils/PointCloud.js ***!
  \*********************************/
/*! exports provided: PointCloud */function(t,e,r){"use strict";r.r(e),r.d(e,"PointCloud",(function(){return i}));var n=r(/*! ../other/Box.js */"./src/other/Box.js");class i extends Array{constructor(...t){1===t.length&&"number"==typeof t[0]?super(t.shift()):super(),t.reduce((t,e)=>(t.push(...e),this),this)}bbox(){if(!this.length)return new n.NoBox;let t=1/0,e=-1/0,r=1/0,i=-1/0;return this.forEach((function(n){t=Math.min(t,n.x),e=Math.max(e,n.x),r=Math.min(r,n.y),i=Math.max(i,n.y)})),new n.Box(t,r,e-t,i-r)}merge(t){return new i(this,t)}transform(t){return new i(this.map(e=>e.transform(t)))}}},"./src/utils/bboxUtils.js":
/*!********************************!*\
  !*** ./src/utils/bboxUtils.js ***!
  \********************************/
/*! exports provided: getPointCloud */function(t,e,r){"use strict";r.r(e),r.d(e,"getPointCloud",(function(){return u}));var n=r(/*! ./pathUtils.js */"./src/utils/pathUtils.js"),i=r(/*! ./regex.js */"./src/utils/regex.js"),o=r(/*! ./textUtils.js */"./src/utils/textUtils.js"),s=r(/*! ../other/Box.js */"./src/other/Box.js"),a=r(/*! ./PointCloud.js */"./src/utils/PointCloud.js"),c=r(/*! ./NodeIterator.js */"./src/utils/NodeIterator.js"),l=r(/*! ../dom/NodeFilter.js */"./src/dom/NodeFilter.js");const u=(t,e,r=!1)=>((t,e,r)=>r?t.transform(e.matrixify()):t)(h(t,r),t,e),h=(t,e)=>{if(1!==t.nodeType)return new a.PointCloud;switch(t.nodeName){case"rect":case"image":case"pattern":case"mask":case"foreignObject":return n.getCloud(n.pathFrom.rect(t));case"svg":case"symbol":if(e)return n.getCloud(n.pathFrom.rect(t));case"g":case"clipPath":case"a":case"marker":return t.childNodes.reduce((t,e)=>t.merge(u(e,!0).transform(e.generateViewBoxMatrix())),new a.PointCloud);case"circle":return n.getCloud(n.pathFrom.circle(t));case"ellipse":return n.getCloud(n.pathFrom.ellipse(t));case"line":return n.getCloud(n.pathFrom.line(t));case"polyline":case"polygon":return n.getCloud(n.pathFrom.polyline(t));case"path":case"glyph":case"missing-glyph":return n.getCloud(t.getAttribute("d"));case"use":{const e=t.getAttribute("href")||t.getAttribute("xlink:href"),r=t.getRootNode().getElementById(e.slice(1));return u(r).transform(t.generateViewBoxMatrix())}case"tspan":case"text":case"altGlyph":{const e=d(t);return e instanceof s.NoBox?new a.PointCloud:n.getCloud(n.pathFrom.box(e))}default:return new a.PointCloud}},d=t=>{const e=f(t);return p(t,e).filter(m).reduce((t,e)=>t.merge(e),new s.NoBox)},f=t=>{for(;t.parentNode&&("text"===t.nodeName&&"text"===t.parentNode.nodeName||("tspan"===t.nodeName||"textPath"===t.nodeName)&&["tspan","text","textPath"].includes(t.parentNode.nodeName));)t=t.parentNode;return t},p=function(t,e=t,r={x:0,y:0},n=[0],i=[0],o=[]){const s=new c.NodeIterator(e,l.NodeFilter.SHOW_ELEMENT|l.NodeFilter.SHOW_TEXT,t=>"title"===t.nodeName?l.NodeFilter.FILTER_IGNORE:l.NodeFilter.FILTER_ACCEPT);for(const a of s){if(a===t&&a!==e)return p(a,a,r,n,i);g(a,r,n,i,o)}return o},m=t=>0!==t.x||0!==t.y||0!==t.width||0!==t.height,g=(t,e,r,n,s)=>{if(t.nodeType===t.ELEMENT_NODE){var a=parseFloat(t.getAttribute("x")),c=parseFloat(t.getAttribute("y"));e.x=isNaN(a)?e.x:a,e.y=isNaN(c)?e.y:c;var l=(t.getAttribute("dx")||"").split(i.delimiter).filter(t=>""!==t).map(parseFloat),u=(t.getAttribute("dy")||"").split(i.delimiter).filter(t=>""!==t).map(parseFloat);r.splice(0,l.length,...l),n.splice(0,u.length,...u)}else{const i=t.data;let a=0;const c=i.length,l=v(t);if(n.length||r.length)for(;a<c&&(s.push(o.textBBox(i.substr(a,1),e.x,e.y,l)),e.x+=r.shift()||0,e.y+=n.shift()||0,n.length||r.length);a++);s.push(o.textBBox(i.substr(a),e.x,e.y,l)),e.x+=s[s.length-1].width}},v=t=>{t.nodeType===t.TEXT_NODE&&(t=t.parentNode);let e=null,r=null,n=null,i=null;const o=["text","tspan","tref","textPath","altGlyph","g"];do{e||(e=t.style.fontSize||t.getAttribute("font-size")),r||(r=t.style.fontFamily||t.getAttribute("font-family")),n||(n=t.style.textAnchor||t.getAttribute("text-anchor")),i||(i=t.style.dominantBaseline||t.getAttribute("dominant-baseline"))}while((t=t.parentNode)&&t.nodeType===t.ELEMENT_NODE&&o.includes(t.nodeName));return{fontFamily:r,fontSize:e,textAnchor:n||"start",dominantBaseline:i||"alphabetical"}}},"./src/utils/defaults.js":
/*!*******************************!*\
  !*** ./src/utils/defaults.js ***!
  \*******************************/
/*! exports provided: fontSize, fontFamily, fontDir, fontFamilyMappings */function(t,e,r){"use strict";r.r(e),r.d(e,"fontSize",(function(){return s})),r.d(e,"fontFamily",(function(){return a})),r.d(e,"fontDir",(function(){return c})),r.d(e,"fontFamilyMappings",(function(){return l}));var n=r(/*! path */"path"),i=r(/*! ./dirname.cjs */"./dirname.cjs"),o=r.n(i);const s=16,a="sans-serif",c=Object(n.join)(o.a,"../../","fonts/"),l={"sans-serif":"OpenSans-Regular.ttf","Open Sans":"OpenSans-Regular.ttf"}},"./src/utils/mapUtils.js":
/*!*******************************!*\
  !*** ./src/utils/mapUtils.js ***!
  \*******************************/
/*! exports provided: objectToMap, mapToObject, mapMap, mapToCss, cssToMap */function(t,e,r){"use strict";r.r(e),r.d(e,"objectToMap",(function(){return i})),r.d(e,"mapToObject",(function(){return o})),r.d(e,"mapMap",(function(){return s})),r.d(e,"mapToCss",(function(){return a})),r.d(e,"cssToMap",(function(){return c}));var n=r(/*! ../utils/strUtils.js */"./src/utils/strUtils.js");const i=function(t){return t instanceof Map?new Map(t):Object.keys(t).reduce((e,r)=>e.set(r,t[r]),new Map)},o=function(t){var e={};return t.forEach((function(t,r){e[r]=t})),e},s=function(t,e){var r=[];return t.forEach((function(t,n){r.push(e(t,n))})),r},a=function(t){return s(t,(function(t,e){return!!t&&Object(n.decamelize)(e)+": "+t})).filter((function(t){return!!t})).join("; ")+";"||!1},c=function(t){return new Map(t.split(/\s*;\s*/).filter((function(t){return!!t})).map((function(t){return t.split(/\s*:\s*/)})))}},"./src/utils/namespaces.js":
/*!*********************************!*\
  !*** ./src/utils/namespaces.js ***!
  \*********************************/
/*! exports provided: svg, xlink, html, mathml, xml, xmlns */function(t,e,r){"use strict";r.r(e),r.d(e,"svg",(function(){return n})),r.d(e,"xlink",(function(){return i})),r.d(e,"html",(function(){return o})),r.d(e,"mathml",(function(){return s})),r.d(e,"xml",(function(){return a})),r.d(e,"xmlns",(function(){return c}));const n="http://www.w3.org/2000/svg",i="http://www.w3.org/1999/xlink",o="http://www.w3.org/1999/xhtml",s="http://www.w3.org/1998/Math/MathML",a="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/"},"./src/utils/nodesToNode.js":
/*!**********************************!*\
  !*** ./src/utils/nodesToNode.js ***!
  \**********************************/
/*! exports provided: nodesToNode */function(t,e,r){"use strict";r.r(e),r.d(e,"nodesToNode",(function(){return n}));const n=(t,e)=>{if(1===(t=t.map(t=>"string"==typeof t?e.createTextNode(t):t)).length)return t;const r=e.createDocumentFragment();return t.forEach(r.appendChild,r),r}},"./src/utils/objectCreationUtils.js":
/*!******************************************!*\
  !*** ./src/utils/objectCreationUtils.js ***!
  \******************************************/
/*! exports provided: extend, extendStatic, mixin */function(t,e,r){"use strict";r.r(e),r.d(e,"extend",(function(){return n})),r.d(e,"extendStatic",(function(){return i})),r.d(e,"mixin",(function(){return o}));const n=(...t)=>{var e,r,n;for(e=t.pop(),n=t.length-1;n>=0;n--)for(r in e)t[n].prototype[r]=e[r]},i=(...t)=>{var e,r,n;for(e=t.pop(),n=t.length-1;n>=0;n--)for(r in e)t[n][r]=e[r]},o=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t);Object.defineProperties(e.prototype,r)}},"./src/utils/pathUtils.js":
/*!********************************!*\
  !*** ./src/utils/pathUtils.js ***!
  \********************************/
/*! exports provided: pathParser, Arc, pathBBox, pointAtLength, length, debug, getCloud, pathFrom */function(t,e,r){"use strict";r.r(e),r.d(e,"pathParser",(function(){return h})),r.d(e,"Arc",(function(){return f})),r.d(e,"pathBBox",(function(){return g})),r.d(e,"pointAtLength",(function(){return v})),r.d(e,"length",(function(){return y})),r.d(e,"debug",(function(){return b})),r.d(e,"getCloud",(function(){return w})),r.d(e,"pathFrom",(function(){return x}));var n=r(/*! ../other/Box.js */"./src/other/Box.js"),i=r(/*! ../other/Point.js */"./src/other/Point.js"),o=r(/*! ./regex.js */"./src/utils/regex.js"),s=r(/*! ./../dom/svg/SVGMatrix.js */"./src/dom/svg/SVGMatrix.js"),a=r(/*! ./PointCloud.js */"./src/utils/PointCloud.js");const c={M:(t,e,r,n)=>(e.x=n.x=t[0],e.y=n.y=t[1],new d(e)),L(t,e){const r=new m(e.x,e.y,t[0],t[1]);return e.x=t[0],e.y=t[1],r},H:(t,e)=>c.L([t[0],e.y],e),V:(t,e)=>c.L([e.x,t[0]],e),Q(t,e,r){const n=p.fromQuad(e,new i.Point(t[0],t[1]),new i.Point(t[2],t[3]));e.x=t[2],e.y=t[3];const o=new i.Point(t[0],t[1]).reflectAt(e);return r.x=o.x,r.y=o.y,n},T:(t,e,r,n,i)=>(t=i?[r.x,r.y].concat(t):[e.x,e.y].concat(t),c.Q(t,e,r)),C(t,e,r){const n=new p(e,new i.Point(t[0],t[1]),new i.Point(t[2],t[3]),new i.Point(t[4],t[5]));e.x=t[4],e.y=t[5];const o=new i.Point(t[2],t[3]).reflectAt(e);return r.x=o.x,r.y=o.y,n},S:(t,e,r,n,i)=>(t=i?[r.x,r.y].concat(t):[e.x,e.y].concat(t),c.C(t,e,r)),Z:(t,e,r,n)=>c.L([n.x,n.y],e),A(t,e,r){const n=new f(e,new i.Point(t[5],t[6]),t[0],t[1],t[2],t[3],t[4]);return e.x=t[5],e.y=t[6],n}},l="mlhvqtcsaz".split("");for(let t=0,e=l.length;t<e;++t)c[l[t]]=function(t){return function(e,r,n,i,o){if("H"===t)e[0]=e[0]+r.x;else if("V"===t)e[0]=e[0]+r.y;else if("A"===t)e[5]=e[5]+r.x,e[6]=e[6]+r.y;else for(let t=0,n=e.length;t<n;++t)e[t]=e[t]+(t%2?r.y:r.x);return c[t](e,r,n,i,o)}}(l[t].toUpperCase());function u(t,e,r,n){return r+n.replace(o.dots," .")}const h=t=>{const e={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t=t.replace(o.numbersWithDots,u).replace(o.pathLetters," $& ").replace(o.hyphen,"$1 -").trim().split(o.delimiter);const r=[],n=new i.Point,s=new i.Point,a=new i.Point;let l=0;const h=t.length;let d;do{o.isPathLetter.test(t[l])?(d=t[l],++l):"M"===d?d="L":"m"===d&&(d="l"),r.push(c[d].call(null,t.slice(l,l+=e[d.toUpperCase()]).map(parseFloat),n,a,s,r[r.length-1]instanceof p))}while(h>l);return r};class d{constructor(t){this.p1=t.clone()}bbox(){const t=this.p1;return new n.Box(t.x,t.y,0,0)}getCloud(){return new a.PointCloud([this.p1])}length(){return 0}toPath(){return["M",this.p1.x,this.p1.y].join(" ")}toPathFragment(){return["M",this.p1.x,this.p1.y]}}class f{constructor(t,e,r,n,o,a,c){if(!r||!n)return new m(t,e);r=Math.abs(r),n=Math.abs(n),this.p1=t.clone(),this.p2=e.clone(),this.arc=a?1:0,this.sweep=c?1:0;const l=Math.cos(o/180*Math.PI),u=Math.sin(o/180*Math.PI),h=new i.Point((t.x-e.x)/2,(t.y-e.y)/2).transform(Object(s.matrixFactory)(l,-u,u,l,0,0)),d=h.x**2/r**2+h.y**2/n**2;d>1&&(r=Math.sqrt(d)*r,n=Math.sqrt(d)*n);const f=r**2,p=n**2,g=f*h.y**2,v=p*h.x**2,y=f*p-g-v;let b=new i.Point(r*h.y/n,-n*h.x/r).mul(Math.sqrt(y/(g+v)));this.arc===this.sweep&&(b=b.mul(-1));const w=b.transform(Object(s.matrixFactory)(l,u,-u,l,0,0)).add(new i.Point((t.x+e.x)/2,(t.y+e.y)/2)),x=new i.Point((h.x-b.x)/r,(h.y-b.y)/n),_=new i.Point(1,0).angleTo(x);let T=x.angleTo(new i.Point((-h.x-b.x)/r,(-h.y-b.y)/n));T%=2*Math.PI,!c&&T>0&&(T-=2*Math.PI),c&&T<0&&(T+=2*Math.PI),this.c=w,this.theta=180*_/Math.PI,this.theta2=180*(_+T)/Math.PI,this.delta=180*T/Math.PI,this.rx=r,this.ry=n,this.phi=o,this.cosφ=l,this.sinφ=u}static fromCenterForm(t,e,r,n,o,a){const c=Math.cos(n/180*Math.PI),l=Math.sin(n/180*Math.PI),u=Object(s.matrixFactory)(c,l,-l,c,0,0),h=new i.Point(e*Math.cos(o/180*Math.PI),r*Math.sin(o/180*Math.PI)).transform(u).add(t),d=new i.Point(e*Math.cos((o+a)/180*Math.PI),r*Math.sin((o+a)/180*Math.PI)).transform(u).add(t),p=Math.abs(a)>180?1:0;return new f(h,d,e,r,n,p,a>0?1:0)}bbox(){return this.getCloud().bbox()}clone(){return new f(this.p1,this.p2,this.rx,this.ry,this.phi,this.arc,this.sweep)}getCloud(){if(this.p1.equals(this.p2))return new a.PointCloud([this.p1]);let t=180*Math.atan(-this.sinφ/this.cosφ*this.ry/this.rx)/Math.PI,e=180*Math.atan(this.cosφ/this.sinφ*this.ry/this.rx)/Math.PI,r=this.theta,n=this.theta2;if((r<0||n<0)&&(r+=360,n+=360),n<r){const t=r;r=n,n=t}for(;t-90>t;)t-=90;for(;t<r;)t+=90;for(;e-90>e;)e-=90;for(;e<r;)e+=90;const i=[t,e,t+90,e+90,t+180,e+180,t+270,e+270].filter((function(t){return t>r&&t<n})).map(function(t){for(;this.theta<t;)t-=360;return this.pointAt((t-this.theta)%360/this.delta)}.bind(this)).concat(this.p1,this.p2);return new a.PointCloud(i)}length(){if(this.p1.equals(this.p2))return 0;const t=this.p2.sub(this.p1).abs(),e=this.splitAt(.5),r=e[0].p2.sub(e[0].p1).abs(),n=e[1].p2.sub(e[1].p1).abs();return r+n-t<1e-5?r+n:e[0].length()+e[1].length()}pointAt(t){if(this.p1.equals(this.p2))return this.p1.clone();const e=(this.theta+t*this.delta)/180*Math.PI,r=Math.sin(e),n=Math.cos(e);return new i.Point(this.cosφ*this.rx*n-this.sinφ*this.ry*r+this.c.x,this.sinφ*this.ry*n+this.cosφ*this.rx*r+this.c.y)}splitAt(t){const e=Math.abs(this.delta),r=e*t,n=e*(1-t),i=this.pointAt(t);return[new f(this.p1,i,this.rx,this.ry,this.phi,r>180,this.sweep),new f(i,this.p2,this.rx,this.ry,this.phi,n>180,this.sweep)]}toPath(){return["M",this.p1.x,this.p1.y,"A",this.rx,this.ry,this.phi,this.arc,this.sweep,this.p2.x,this.p2.y].join(" ")}toPathFragment(){return["A",this.rx,this.ry,this.phi,this.arc,this.sweep,this.p2.x,this.p2.y]}toString(){return`p1: ${this.p1.x.toFixed(4)} ${this.p1.y.toFixed(4)}, p2: ${this.p2.x.toFixed(4)} ${this.p2.y.toFixed(4)}, c: ${this.c.x.toFixed(4)} ${this.c.y.toFixed(4)} theta: ${this.theta.toFixed(4)}, theta2: ${this.theta2.toFixed(4)}, delta: ${this.delta.toFixed(4)}, large: ${this.arc}, sweep: ${this.sweep}`}}class p{constructor(t,e,r,n){t instanceof i.Point?(this.p1=new i.Point(t),this.c1=new i.Point(e),this.c2=new i.Point(r),this.p2=new i.Point(n)):(this.p1=new i.Point(t.p1),this.c1=new i.Point(t.c1),this.c2=new i.Point(t.c2),this.p2=new i.Point(t.p2))}static fromQuad(t,e,r){const n=t.mul(1/3).add(e.mul(2/3)),i=e.mul(2/3).add(r.mul(1/3));return new p(t,n,i,r)}bbox(){return this.getCloud().bbox()}findRoots(){return this.findRootsX().concat(this.findRootsY())}findRootsX(){return this.findRootsXY(this.p1.x,this.c1.x,this.c2.x,this.p2.x)}findRootsXY(t,e,r,n){const i=3*(3*e-t-3*r+n),o=6*(t-2*e+r),s=3*(e-t);return 0===i?[-s/o].filter((function(t){return t>0&&t<1})):o*o-4*i*s<0?[]:o*o-4*i*s==0?[Math.round(-o/(2*i)*1e5)/1e5].filter((function(t){return t>0&&t<1})):[Math.round((-o+Math.sqrt(o*o-4*i*s))/(2*i)*1e5)/1e5,Math.round((-o-Math.sqrt(o*o-4*i*s))/(2*i)*1e5)/1e5].filter((function(t){return t>0&&t<1}))}findRootsY(){return this.findRootsXY(this.p1.y,this.c1.y,this.c2.y,this.p2.y)}flatness(){let t=Math.pow(3*this.c1.x-2*this.p1.x-this.p2.x,2),e=Math.pow(3*this.c1.y-2*this.p1.y-this.p2.y,2);const r=Math.pow(3*this.c2.x-2*this.p2.x-this.p1.x,2),n=Math.pow(3*this.c2.y-2*this.p2.y-this.p1.y,2);return t<r&&(t=r),e<n&&(e=n),t+e}getCloud(){const t=this.findRoots().filter(t=>0!==t&&1!==t).map(t=>this.pointAt(t)).concat(this.p1,this.p2);return new a.PointCloud(t)}length(){return this.lengthAt()}lengthAt(t=1){const e=this.splitAt(t)[0].makeFlat(t);let r=0;for(let t=0,n=e.length;t<n;++t)r+=e[t].p2.sub(e[t].p1).abs();return r}makeFlat(t){return this.flatness()>.15?this.splitAt(.5).map((function(e){return e.makeFlat(.5*t)})).reduce((function(t,e){return t.concat(e)}),[]):(this.t_value=t,[this])}pointAt(t){return new i.Point((1-t)*(1-t)*(1-t)*this.p1.x+3*(1-t)*(1-t)*t*this.c1.x+3*(1-t)*t*t*this.c2.x+t*t*t*this.p2.x,(1-t)*(1-t)*(1-t)*this.p1.y+3*(1-t)*(1-t)*t*this.c1.y+3*(1-t)*t*t*this.c2.y+t*t*t*this.p2.y)}splitAt(t){const e=this.splitAtScalar(t,"x"),r=this.splitAtScalar(t,"y");return[new p(new i.Point(e[0][0],r[0][0]),new i.Point(e[0][1],r[0][1]),new i.Point(e[0][2],r[0][2]),new i.Point(e[0][3],r[0][3])),new p(new i.Point(e[1][0],r[1][0]),new i.Point(e[1][1],r[1][1]),new i.Point(e[1][2],r[1][2]),new i.Point(e[1][3],r[1][3]))]}splitAtScalar(t,e){const r=this.p1[e],n=this.c1[e],i=this.c2[e],o=this.p2[e],s=t*t*t*o-3*t*t*(t-1)*i+3*t*(t-1)*(t-1)*n-(t-1)*(t-1)*(t-1)*r;return[[r,t*n-(t-1)*r,t*t*i-2*t*(t-1)*n+(t-1)*(t-1)*r,s],[s,t*t*o-2*t*(t-1)*i+(t-1)*(t-1)*n,t*o-(t-1)*i,o]]}toPath(){return["M",this.p1.x,this.p1.y].concat(this.toPathFragment()).join(" ")}toPathFragment(){return["C",this.c1.x,this.c1.y,this.c2.x,this.c2.y,this.p2.x,this.p2.y]}}class m{constructor(t,e,r,n){t instanceof Object?(this.p1=new i.Point(t),this.p2=new i.Point(e)):(this.p1=new i.Point(t,e),this.p2=new i.Point(r,n))}bbox(){return this.getCloud().bbox()}getCloud(){return new a.PointCloud([this.p1,this.p2])}length(){return this.p2.sub(this.p1).abs()}pointAt(t){const e=this.p2.sub(this.p1).mul(t);return this.p1.add(e)}toPath(){return["M",this.p1.x,this.p1.y,this.p2.x,this.p2.y].join(" ")}toPathFragment(){return["L",this.p2.x,this.p2.y]}}const g=function(t){return h(t).reduce((t,e)=>t.merge(e.bbox()),new n.NoBox)},v=function(t,e){const r=h(t),n=r.map(t=>t.length()),i=n.reduce((t,e)=>t+e,0);let o=0,s=e/i;if(s>=1)return r[r.length-1].p2?r[r.length-1].p2.native():r[r.length-1].p1.native();if(s<=0)return r[0].p1.native();for(;r[r.length-1]instanceof d;)r.pop();let a=0;for(const t=n.length;o<t;++o){if(a+=n[o]/i,a>s)break}return s=i/n[o]*(s-a)+1,r[o].pointAt(s).native()},y=function(t){return h(t).reduce((t,e)=>t+e.length(),0)},b=function(t){const e=h(t.getAttribute("d")),r={paths:e.map(t=>t.toPath()),fragments:e.map(t=>t.toPathFragment().join(" ")),bboxs:e.map(t=>{const e=t.bbox();return[e.x,e.y,e.width,e.height]}),bbox:e.reduce((t,e)=>t.merge(e.bbox()),new n.NoBox),bboxs_new:e.map(e=>e.getCloud().transform(t.matrixify()).bbox())};return Object.assign({},r,{bbox_new:r.bboxs_new.reduce((t,e)=>t.merge(e),new n.NoBox)})},w=t=>h(t).reduce((t,e)=>e.getCloud().merge(t),new a.PointCloud),x={box:({x:t,y:e,width:r,height:n})=>`M ${t} ${e} h ${r} v ${n} H ${t} V ${e}`,rect(t){const e=parseFloat(t.getAttribute("width"))||0,r=parseFloat(t.getAttribute("height"))||0,n=parseFloat(t.getAttribute("x"))||0,i=parseFloat(t.getAttribute("y"))||0;return`M ${n} ${i} h ${e} v ${r} H ${n} V ${i}`},circle(t){const e=parseFloat(t.getAttribute("r"))||0,r=parseFloat(t.getAttribute("cx"))||0,n=parseFloat(t.getAttribute("cy"))||0;return 0===e?"M0 0":`M ${r-e} ${n} A ${e} ${e} 0 0 0 ${r+e} ${n} A ${e} ${e} 0 0 0 ${r-e} ${n}`},ellipse(t){const e=parseFloat(t.getAttribute("rx"))||0,r=parseFloat(t.getAttribute("ry"))||0,n=parseFloat(t.getAttribute("cx"))||0,i=parseFloat(t.getAttribute("cy"))||0;return`M ${n-e} ${i} A ${e} ${r} 0 0 0 ${n+e} ${i} A ${e} ${r} 0 0 0 ${n-e} ${i}`},line(t){const e=parseFloat(t.getAttribute("x1"))||0,r=parseFloat(t.getAttribute("x2"))||0;return`M ${e} ${parseFloat(t.getAttribute("y1"))||0} L ${r} ${parseFloat(t.getAttribute("y2"))||0}`},polygon:t=>`M ${t.getAttribute("points")} z`,polyline:t=>"M "+t.getAttribute("points")}},"./src/utils/regex.js":
/*!****************************!*\
  !*** ./src/utils/regex.js ***!
  \****************************/
/*! exports provided: transforms, delimiter, hyphen, pathLetters, isPathLetter, numbersWithDots, dots */function(t,e,r){"use strict";r.r(e),r.d(e,"transforms",(function(){return n})),r.d(e,"delimiter",(function(){return i})),r.d(e,"hyphen",(function(){return o})),r.d(e,"pathLetters",(function(){return s})),r.d(e,"isPathLetter",(function(){return a})),r.d(e,"numbersWithDots",(function(){return c})),r.d(e,"dots",(function(){return l}));const n=/\)\s*,?\s*/,i=/[\s,]+/,o=/([^e])-/gi,s=/[MLHVCSQTAZ]/gi,a=/[MLHVCSQTAZ]/i,c=/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,l=/\./g},"./src/utils/strUtils.js":
/*!*******************************!*\
  !*** ./src/utils/strUtils.js ***!
  \*******************************/
/*! exports provided: fullHex, hexToRGB, decamelize, camelCase, removeQuotes, htmlEntities, unhtmlEntities, cdata, comment, splitNotInBrackets */function(t,e,r){"use strict";r.r(e),r.d(e,"fullHex",(function(){return n})),r.d(e,"hexToRGB",(function(){return i})),r.d(e,"decamelize",(function(){return o})),r.d(e,"camelCase",(function(){return s})),r.d(e,"removeQuotes",(function(){return a})),r.d(e,"htmlEntities",(function(){return c})),r.d(e,"unhtmlEntities",(function(){return l})),r.d(e,"cdata",(function(){return u})),r.d(e,"comment",(function(){return h})),r.d(e,"splitNotInBrackets",(function(){return d}));const n=function(t){return 4===t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t},i=function(t){if(typeof t instanceof Map){for(const[e,r]of t)t.set(e,i(r));return t}return/#[0-9a-f]{3,6}/.test(t)?(t=n(t),"rgb("+[parseInt(t.slice(1,3),16),parseInt(t.slice(3,5),16),parseInt(t.slice(5,7),16)].join(",")+")"):t};function o(t){return String(t).replace(/([a-z])([A-Z])/g,(function(t,e,r){return e+"-"+r.toLowerCase()}))}function s(t){return String(t).replace(/([a-z])-([a-z])/g,(function(t,e,r){return e+r.toUpperCase()}))}function a(t){return t.startsWith('"')||t.startsWith("'")?t.slice(1,-1):t}function c(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function l(t){return String(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace("&quot;",'"')}function u(t){return`<![CDATA[${t}]]>`}function h(t){return`\x3c!--${t}--\x3e`}const d=(t,e)=>{var r,n,i,o=0,s=0,a=0,c=[];for(n=0,i=t.length;n<i;++n)(r=t.charAt(n))!==e||o||s?"("===r?++o:")"===r?--o:"["===r?++s:"]"===r&&--s:(c.push(t.slice(a,n).trim()),a=n+1);return c.push(t.slice(a).trim()),c}},"./src/utils/tagUtils.js":
/*!*******************************!*\
  !*** ./src/utils/tagUtils.js ***!
  \*******************************/
/*! exports provided: tag, cloneNode */function(t,e,r){"use strict";r.r(e),r.d(e,"tag",(function(){return i})),r.d(e,"cloneNode",(function(){return o}));var n={br:!0,hr:!0,img:!0,link:!0};const i=function(t){const e=[...t.attrs].map((function(t){return(t.prefix?t.prefix+":":"")+t.localName+'="'+(e=t.value,String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"');var e})),{prefix:r,localName:i}=t,o=(r?r+":":"")+i;return"<"+[].concat(o,e).join(" ")+">"+(n[o.toLowerCase()]?"":t.innerHTML+"</"+o+">")},o=function(t){const{prefix:e,localName:r,namespaceURI:n,nodeValue:i,ownerDocument:o}=t,s=(e?e+":":"")+r,a=r.includes(":");return new t.constructor(s,{attrs:new Set([...t.attrs].map(t=>t.cloneNode())),nodeValue:i,ownerDocument:o,local:a},n)}},"./src/utils/textUtils.js":
/*!********************************!*\
  !*** ./src/utils/textUtils.js ***!
  \********************************/
/*! exports provided: textBBox */function(t,e,r){"use strict";r.r(e),r.d(e,"textBBox",(function(){return u}));var n=r(/*! path */"path"),i=r.n(n),o=r(/*! fontkit */"fontkit"),s=r.n(o),a=r(/*! ./defaults.js */"./src/utils/defaults.js"),c=r(/*! ../other/Box.js */"./src/other/Box.js"),l=r(/*! ../config.js */"./src/config.js");const u=function(t,e,r,n){if(!t)return new c.NoBox;const o=Object(l.getConfig)(),u=Object(l.getFonts)();for(var h,d,f=(n.fontFamily||a.fontFamily).split(/\s*,\s*/),p=Object.assign({},a.fontFamilyMappings,o.fontFamilyMappings),m=n.fontSize||a.fontSize,g=o.fontDir||a.fontDir,v=0,y=f.length;v<y;++v)if(p[f[v]]){h=f[v];break}if(h||(h=a.fontFamily),u[h])d=u[h];else{const t=i.a.join(g,p[h]);try{d=s.a.openSync(t)}catch(e){return console.warn(`Could not open font "${h}" in file "${t}". ${e.toString()}`),new c.NoBox}u[h]=d}var b=d.ascent-d.descent,w=(b>d.unitsPerEm?b:b+d.lineGap)/d.unitsPerEm*m,x=d.layout(t).glyphs.reduce((t,e)=>t+e.advanceWidth,0)/d.unitsPerEm*m,_=0;"end"===n.textAnchor?_=-x:"middle"===n.textAnchor&&(_=-x/2);var T=d.ascent;return"before-edge"===n.dominantBaseline||"text-before-edge"===n.dominantBaseline?T=0:"hanging"===n.dominantBaseline?T=d.ascent-d.xHeight-d.capHeight:"mathematical"===n.dominantBaseline?T=d.ascent-d.xHeight:"middle"===n.dominantBaseline?T=d.ascent-d.xHeight/2:"central"===n.dominantBaseline?T=d.ascent/2+d.descent/2:"ideographic"===n.dominantBaseline&&(T=d.ascent+d.descent),new c.Box(e+_,r-T/d.unitsPerEm*m,x,w)}},fontkit:
/*!**************************!*\
  !*** external "fontkit" ***!
  \**************************/
/*! no static exports found */function(t,e){t.exports=__webpack_require__(50)},"image-size":
/*!*****************************!*\
  !*** external "image-size" ***!
  \*****************************/
/*! no static exports found */function(t,e){t.exports=__webpack_require__(51)},path:
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/*! no static exports found */function(t,e){t.exports=__webpack_require__(32)},sax:
/*!**********************!*\
  !*** external "sax" ***!
  \**********************/
/*! no static exports found */function(t,e){t.exports=__webpack_require__(73)}}))}).call(this,__webpack_require__(7))},function(t,e){(function(e){t.exports=e}).call(this,"/")},function(t,e){t.exports={}},function(t,e,r){"use strict";(function(n,i){var o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{c(n.next(t))}catch(t){o(t)}}function a(t){try{c(n.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}c((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});var s=r(21),a=r(32),c=r(54),l=r(33),u=r(71);r(72);var h=new c.default({concurrency:100,autostart:!0});function d(t,e){var r=u.detector(t);if(r&&r in l.typeHandlers){var n=l.typeHandlers[r].calculate(t,e);if(void 0!==n)return n.type=r,n}throw new TypeError("unsupported file type: "+r+" (file: "+e+")")}function f(t,e){if(n.isBuffer(t))return d(t);if("string"!=typeof t)throw new TypeError("invalid invocation");var r=a.resolve(t);if("function"!=typeof e)return d(function(t){var e=s.openSync(t,"r"),r=s.fstatSync(e).size,i=Math.min(r,524288),o=n.alloc(i);return s.readSync(e,o,0,i,0),s.closeSync(e),o}(r),r);h.push(()=>function(t){return o(this,void 0,void 0,(function*(){var e=yield s.promises.open(t,"r"),{size:r}=yield e.stat();if(r<=0)throw new Error("Empty file");var i=Math.min(r,524288),o=n.alloc(i);return yield e.read(o,0,i,0),yield e.close(),o}))}(r).then(t=>i.nextTick(e,null,d(t,r))).catch(e))}t.exports=e=f,e.imageSize=f,e.setConcurrency=t=>{h.concurrency=t},e.types=Object.keys(l.typeHandlers)}).call(this,r(17).Buffer,r(4))},function(t,e,r){"use strict";e.byteLength=function(t){var e=l(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=l(t),s=n[0],a=n[1],c=new o(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),u=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,c[u++]=255&e);1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e);return c},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=0,a=r-i;s<a;s+=16383)o.push(u(t,s,s+16383>a?a:s+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],i[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function u(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,c=(1<<a)-1,l=c>>1,u=-7,h=r?i-1:0,d=r?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=n;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=l}return(f?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,c,l=8*o-i-1,u=(1<<l)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*c-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[r+f]=255&s,f+=p,s/=256,l-=8);t[r+f-p]|=128*m}},function(t,e,r){var n=r(55),i=r(22).EventEmitter;function o(t){if(!(this instanceof o))return new o(t);i.call(this),t=t||{},this.concurrency=t.concurrency||1/0,this.timeout=t.timeout||0,this.autostart=t.autostart||!1,this.results=t.results||null,this.pending=0,this.session=0,this.running=!1,this.jobs=[],this.timers={}}t.exports=o,t.exports.default=o,n(o,i);["pop","shift","indexOf","lastIndexOf"].forEach((function(t){o.prototype[t]=function(){return Array.prototype[t].apply(this.jobs,arguments)}})),o.prototype.slice=function(t,e){return this.jobs=this.jobs.slice(t,e),this},o.prototype.reverse=function(){return this.jobs.reverse(),this};function s(){for(var t in this.timers){var e=this.timers[t];delete this.timers[t],clearTimeout(e)}}function a(t){var e=this;function r(t){e.end(t)}this.on("error",r),this.on("end",(function n(i){e.removeListener("error",r),e.removeListener("end",n),t(i,this.results)}))}function c(t){this.session++,this.running=!1,this.emit("end",t)}["push","unshift","splice"].forEach((function(t){o.prototype[t]=function(){var e=Array.prototype[t].apply(this.jobs,arguments);return this.autostart&&this.start(),e}})),Object.defineProperty(o.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),o.prototype.start=function(t){if(t&&a.call(this,t),this.running=!0,!(this.pending>=this.concurrency))if(0!==this.jobs.length){var e=this,r=this.jobs.shift(),n=!0,i=this.session,o=null,s=!1,l=null,u=r.timeout||this.timeout;u&&(o=setTimeout((function(){s=!0,e.listeners("timeout").length>0?e.emit("timeout",d,r):d()}),u),this.timers[o]=o),this.results&&(l=this.results.length,this.results[l]=null),this.pending++,e.emit("start",r);var h=r(d);h&&h.then&&"function"==typeof h.then&&h.then((function(t){return d(null,t)})).catch((function(t){return d(t||!0)})),this.running&&this.jobs.length>0&&this.start()}else 0===this.pending&&c.call(this);function d(t,a){n&&e.session===i&&(n=!1,e.pending--,null!==o&&(delete e.timers[o],clearTimeout(o)),t?e.emit("error",t,r):!1===s&&(null!==l&&(e.results[l]=Array.prototype.slice.call(arguments,1)),e.emit("success",a,r)),e.session===i&&(0===e.pending&&0===e.jobs.length?c.call(e):e.running&&e.start()))}},o.prototype.stop=function(){this.running=!1},o.prototype.end=function(t){s.call(this),this.jobs.length=0,this.pending=0,c.call(this,t)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BMP={validate:t=>"BM"===t.toString("ascii",0,2),calculate:t=>({height:Math.abs(t.readInt32LE(22)),width:t.readUInt32LE(18)})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(34);e.CUR={validate:t=>0===t.readUInt16LE(0)&&2===t.readUInt16LE(2),calculate:t=>n.ICO.calculate(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DDS={validate:t=>542327876===t.readUInt32LE(0),calculate:t=>({height:t.readUInt32LE(12),width:t.readUInt32LE(16)})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/^GIF8[79]a/;e.GIF={validate(t){var e=t.toString("ascii",0,6);return n.test(e)},calculate:t=>({height:t.readUInt16LE(8),width:t.readUInt16LE(6)})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function i(t,e){var r=e+4;return[t.toString("ascii",e,r),t.readUInt32BE(r)]}function o(t){var e=n[t];return{width:e,height:e,type:t}}e.ICNS={validate:t=>"icns"===t.toString("ascii",0,4),calculate(t){var e=t.length,r=t.readUInt32BE(4),n=8,s=i(t,n),a=o(s[0]);if((n+=s[1])===r)return a;for(var c={height:a.height,images:[a],width:a.width};n<r&&n<e;)a=o((s=i(t,n))[0]),n+=s[1],c.images.push(a);return c}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.J2C={validate:t=>"ff4fff51"===t.toString("hex",0,4),calculate:t=>({height:t.readUInt32BE(12),width:t.readUInt32BE(8)})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="66747970",i="6a703268",o="6a502020",s="72726571",a=t=>({height:t.readUInt32BE(4),width:t.readUInt32BE(8)});e.JP2={validate(t){var e=t.toString("hex",4,8),r=t.readUInt32BE(0);if(e!==o||r<1)return!1;var i=r+4,s=t.readUInt32BE(r);return t.slice(i,i+s).toString("hex",0,4)===n},calculate(t){var e=t.readUInt32BE(0),r=e+4+t.readUInt16BE(e+2);switch(t.toString("hex",r,r+4)){case s:return r=r+4+4+(t=>{var e=t.readUInt8(0),r=1+2*e;return(r=r+2+t.readUInt16BE(r)*(2+e))+2+t.readUInt16BE(r)*(16+e)})(t.slice(r+4)),a(t.slice(r+8,r+24));case i:return a(t.slice(r+8,r+24));default:throw new TypeError("Unsupported header found: "+t.toString("ascii",r,r+4))}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(35);function i(t){return"45786966"===t.toString("hex",2,6)}function o(t,e){return{height:t.readUInt16BE(e),width:t.readUInt16BE(e+2)}}function s(t,e){var r=t.slice(2,e),i=r.toString("hex",6,8),o="4d4d"===i;if(o||"4949"===i)return function(t,e){for(var r=n.readUInt(t,16,14,e),i=0;i<r;i++){var o=16+12*i,s=o+12;if(o>t.length)return;var a=t.slice(o,s);if(274===n.readUInt(a,16,0,e)){if(3!==n.readUInt(a,16,2,e))return;if(1!==n.readUInt(a,32,4,e))return;return n.readUInt(a,16,8,e)}}}(r,o)}function a(t,e){if(e>t.length)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==t[e])throw new TypeError("Invalid JPG, marker table corrupted")}e.JPG={validate:t=>"ffd8"===t.toString("hex",0,2),calculate(t){var e,r;for(t=t.slice(4);t.length;){var n=t.readUInt16BE(0);if(i(t)&&(e=s(t,n)),a(t,n),192===(r=t[n+1])||193===r||194===r){var c=o(t,n+5);return e?{height:c.height,orientation:e,width:c.width}:c}t=t.slice(n+2)}throw new TypeError("Invalid JPG, no size found")}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.KTX={validate:t=>"KTX 11"===t.toString("ascii",1,7),calculate:t=>({height:t.readUInt32LE(40),width:t.readUInt32LE(36)})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PNG={validate(t){if("PNG\r\n\n"===t.toString("ascii",1,8)){var e=t.toString("ascii",12,16);if("CgBI"===e&&(e=t.toString("ascii",28,32)),"IHDR"!==e)throw new TypeError("Invalid PNG");return!0}return!1},calculate:t=>"CgBI"===t.toString("ascii",12,16)?{height:t.readUInt32BE(36),width:t.readUInt32BE(32)}:{height:t.readUInt32BE(20),width:t.readUInt32BE(16)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},i=Object.keys(n),o={default:t=>{for(var e=[];t.length>0;){var r=t.shift();if("#"!==r[0]){e=r.split(" ");break}}if(2===e.length)return{height:parseInt(e[1],10),width:parseInt(e[0],10)};throw new TypeError("Invalid PNM")},pam:t=>{for(var e={};t.length>0;){var r=t.shift();if(!(r.length>16||r.charCodeAt(0)>128)){var[n,i]=r.split(" ");if(n&&i&&(e[n.toLowerCase()]=parseInt(i,10)),e.height&&e.width)break}}if(e.height&&e.width)return{height:e.height,width:e.width};throw new TypeError("Invalid PAM")}};e.PNM={validate(t){var e=t.toString("ascii",0,2);return i.includes(e)},calculate(t){var e=t.toString("ascii",0,2),r=n[e],i=t.toString("ascii",3).split(/[\r\n]+/);return(o[r]||o.default)(i)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PSD={validate:t=>"8BPS"===t.toString("ascii",0,4),calculate:t=>({height:t.readUInt32BE(14),width:t.readUInt32BE(18)})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,i={height:/\sheight=(['"])([^%]+?)\1/,root:n,viewbox:/\sviewBox=(['"])(.+?)\1/,width:/\swidth=(['"])([^%]+?)\1/},o={cm:96/2.54,em:16,ex:8,m:96/2.54*100,mm:96/2.54/10,pc:96/72/12,pt:96/72};function s(t){var e=/([0-9.]+)([a-z]*)/.exec(t);if(e)return Math.round(parseFloat(e[1])*(o[e[2]]||1))}function a(t){var e=t.split(" ");return{height:s(e[3]),width:s(e[2])}}e.SVG={validate(t){var e=String(t);return n.test(e)},calculate(t){var e=t.toString("utf8").match(i.root);if(e){var r=function(t){var e=t.match(i.width),r=t.match(i.height),n=t.match(i.viewbox);return{height:r&&s(r[2]),viewbox:n&&a(n[2]),width:e&&s(e[2])}}(e[0]);if(r.width&&r.height)return function(t){return{height:t.height,width:t.width}}(r);if(r.viewbox)return function(t,e){var r=e.width/e.height;return t.width?{height:Math.floor(t.width/r),width:t.width}:t.height?{height:t.height,width:Math.floor(t.height*r)}:{height:e.height,width:e.width}}(r,r.viewbox)}throw new TypeError("Invalid SVG")}}},function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=r(21),i=r(35);function o(t,e){var r=i.readUInt(t,16,8,e);return(i.readUInt(t,16,10,e)<<16)+r}function s(t){if(t.length>24)return t.slice(12)}var a=["49492a00","4d4d002a"];e.TIFF={validate:t=>a.includes(t.toString("hex",0,4)),calculate(e,r){if(!r)throw new TypeError("Tiff doesn't support buffer");var a="BE"===function(t){var e=t.toString("ascii",0,2);return"II"===e?"LE":"MM"===e?"BE":void 0}(e),c=function(t,e){for(var r={},n=t;n&&n.length;){var a=i.readUInt(n,16,0,e),c=i.readUInt(n,16,2,e),l=i.readUInt(n,32,4,e);if(0===a)break;1!==l||3!==c&&4!==c||(r[a]=o(n,e)),n=s(n)}return r}(function(e,r,o){var s=i.readUInt(e,32,4,o),a=1024,c=n.statSync(r).size;s+a>c&&(a=c-s-10);var l=t.alloc(a),u=n.openSync(r,"r");return n.readSync(u,l,0,a,s),l.slice(2)}(e,r,a),a),l=c[256],u=c[257];if(!l||!u)throw new TypeError("Invalid Tiff. Missing tags");return{height:u,width:l}}}}).call(this,r(17).Buffer)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WEBP={validate(t){var e="RIFF"===t.toString("ascii",0,4),r="WEBP"===t.toString("ascii",8,12),n="VP8"===t.toString("ascii",12,15);return e&&r&&n},calculate(t){var e=t.toString("ascii",12,16);if(t=t.slice(20,30),"VP8X"===e){var r=t[0];if(0==(192&r)&&0==(1&r))return function(t){return{height:1+t.readUIntLE(7,3),width:1+t.readUIntLE(4,3)}}(t);throw new TypeError("Invalid WebP")}if("VP8 "===e&&47!==t[0])return function(t){return{height:16383&t.readInt16LE(8),width:16383&t.readInt16LE(6)}}(t);var n=t.toString("hex",3,6);if("VP8L"===e&&"9d012a"!==n)return function(t){return{height:1+((15&t[4])<<10|t[3]<<2|(192&t[2])>>6),width:1+((63&t[2])<<8|t[1])}}(t);throw new TypeError("Invalid WebP")}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(33),i=Object.keys(n.typeHandlers),o={56:"psd",66:"bmp",68:"dds",71:"gif",73:"tiff",77:"tiff",82:"webp",105:"icns",137:"png",255:"jpg"};e.detector=function(t){var e=t[0];if(e in o){var r=o[e];if(n.typeHandlers[r].validate(t))return r}return i.find(e=>n.typeHandlers[e].validate(t))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21);if(!("promises"in n)){class t{constructor(t){this.fd=t}stat(){return new Promise((t,e)=>{n.fstat(this.fd,(r,n)=>{r?e(r):t(n)})})}read(t,e,r,i){return new Promise((o,s)=>{n.read(this.fd,t,e,r,i,t=>{t?s(t):o()})})}close(){return new Promise((t,e)=>{n.close(this.fd,r=>{r?e(r):t()})})}}Object.defineProperty(n,"promises",{value:{open:(e,r)=>new Promise((i,o)=>{n.open(e,r,(e,r)=>{e?o(e):i(new t(r))})})},writable:!1})}},function(t,e,r){(function(t){!function(e){e.parser=function(t,e){return new o(t,e)},e.SAXParser=o,e.SAXStream=a,e.createStream=function(t,e){return new a(t,e)},e.MAX_BUFFER_LENGTH=65536;var n,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function o(t,r){if(!(this instanceof o))return new o(t,r);!function(t){for(var e=0,r=i.length;e<r;e++)t[i[e]]=""}(this),this.q=this.c="",this.bufferCheckPosition=e.MAX_BUFFER_LENGTH,this.opt=r||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!t,this.noscript=!(!t&&!this.opt.noscript),this.state=_.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(e.XML_ENTITIES):Object.create(e.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(l)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),E(this,"onready")}e.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){}return e.prototype=t,new e}),Object.keys||(Object.keys=function(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r);return e}),o.prototype={end:function(){A(this)},write:function(t){if(this.error)throw this.error;if(this.closed)return C(this,"Cannot write after close. Assign an onready handler.");if(null===t)return A(this);"object"==typeof t&&(t=t.toString());var r=0,n="";for(;n=R(t,r++),this.c=n,n;)switch(this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++),this.state){case _.BEGIN:if(this.state=_.BEGIN_WHITESPACE,"\ufeff"===n)continue;F(this,n);continue;case _.BEGIN_WHITESPACE:F(this,n);continue;case _.TEXT:if(this.sawRoot&&!this.closedRoot){for(var o=r-1;n&&"<"!==n&&"&"!==n;)(n=R(t,r++))&&this.trackPosition&&(this.position++,"\n"===n?(this.line++,this.column=0):this.column++);this.textNode+=t.substring(o,r-1)}"<"!==n||this.sawRoot&&this.closedRoot&&!this.strict?(p(n)||this.sawRoot&&!this.closedRoot||M(this,"Text data outside of root node."),"&"===n?this.state=_.TEXT_ENTITY:this.textNode+=n):(this.state=_.OPEN_WAKA,this.startTagPosition=this.position);continue;case _.SCRIPT:"<"===n?this.state=_.SCRIPT_ENDING:this.script+=n;continue;case _.SCRIPT_ENDING:"/"===n?this.state=_.CLOSE_TAG:(this.script+="<"+n,this.state=_.SCRIPT);continue;case _.OPEN_WAKA:if("!"===n)this.state=_.SGML_DECL,this.sgmlDecl="";else if(p(n));else if(v(u,n))this.state=_.OPEN_TAG,this.tagName=n;else if("/"===n)this.state=_.CLOSE_TAG,this.tagName="";else if("?"===n)this.state=_.PROC_INST,this.procInstName=this.procInstBody="";else{if(M(this,"Unencoded <"),this.startTagPosition+1<this.position){var s=this.position-this.startTagPosition;n=new Array(s).join(" ")+n}this.textNode+="<"+n,this.state=_.TEXT}continue;case _.SGML_DECL:"[CDATA["===(this.sgmlDecl+n).toUpperCase()?(N(this,"onopencdata"),this.state=_.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+n==="--"?(this.state=_.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+n).toUpperCase()?(this.state=_.DOCTYPE,(this.doctype||this.sawRoot)&&M(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===n?(N(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=_.TEXT):m(n)?(this.state=_.SGML_DECL_QUOTED,this.sgmlDecl+=n):this.sgmlDecl+=n;continue;case _.SGML_DECL_QUOTED:n===this.q&&(this.state=_.SGML_DECL,this.q=""),this.sgmlDecl+=n;continue;case _.DOCTYPE:">"===n?(this.state=_.TEXT,N(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=n,"["===n?this.state=_.DOCTYPE_DTD:m(n)&&(this.state=_.DOCTYPE_QUOTED,this.q=n));continue;case _.DOCTYPE_QUOTED:this.doctype+=n,n===this.q&&(this.q="",this.state=_.DOCTYPE);continue;case _.DOCTYPE_DTD:this.doctype+=n,"]"===n?this.state=_.DOCTYPE:m(n)&&(this.state=_.DOCTYPE_DTD_QUOTED,this.q=n);continue;case _.DOCTYPE_DTD_QUOTED:this.doctype+=n,n===this.q&&(this.state=_.DOCTYPE_DTD,this.q="");continue;case _.COMMENT:"-"===n?this.state=_.COMMENT_ENDING:this.comment+=n;continue;case _.COMMENT_ENDING:"-"===n?(this.state=_.COMMENT_ENDED,this.comment=O(this.opt,this.comment),this.comment&&N(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+n,this.state=_.COMMENT);continue;case _.COMMENT_ENDED:">"!==n?(M(this,"Malformed comment"),this.comment+="--"+n,this.state=_.COMMENT):this.state=_.TEXT;continue;case _.CDATA:"]"===n?this.state=_.CDATA_ENDING:this.cdata+=n;continue;case _.CDATA_ENDING:"]"===n?this.state=_.CDATA_ENDING_2:(this.cdata+="]"+n,this.state=_.CDATA);continue;case _.CDATA_ENDING_2:">"===n?(this.cdata&&N(this,"oncdata",this.cdata),N(this,"onclosecdata"),this.cdata="",this.state=_.TEXT):"]"===n?this.cdata+="]":(this.cdata+="]]"+n,this.state=_.CDATA);continue;case _.PROC_INST:"?"===n?this.state=_.PROC_INST_ENDING:p(n)?this.state=_.PROC_INST_BODY:this.procInstName+=n;continue;case _.PROC_INST_BODY:if(!this.procInstBody&&p(n))continue;"?"===n?this.state=_.PROC_INST_ENDING:this.procInstBody+=n;continue;case _.PROC_INST_ENDING:">"===n?(N(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=_.TEXT):(this.procInstBody+="?"+n,this.state=_.PROC_INST_BODY);continue;case _.OPEN_TAG:v(h,n)?this.tagName+=n:(k(this),">"===n?I(this):"/"===n?this.state=_.OPEN_TAG_SLASH:(p(n)||M(this,"Invalid character in tag name"),this.state=_.ATTRIB));continue;case _.OPEN_TAG_SLASH:">"===n?(I(this,!0),L(this)):(M(this,"Forward-slash in opening tag not followed by >"),this.state=_.ATTRIB);continue;case _.ATTRIB:if(p(n))continue;">"===n?I(this):"/"===n?this.state=_.OPEN_TAG_SLASH:v(u,n)?(this.attribName=n,this.attribValue="",this.state=_.ATTRIB_NAME):M(this,"Invalid attribute name");continue;case _.ATTRIB_NAME:"="===n?this.state=_.ATTRIB_VALUE:">"===n?(M(this,"Attribute without value"),this.attribValue=this.attribName,P(this),I(this)):p(n)?this.state=_.ATTRIB_NAME_SAW_WHITE:v(h,n)?this.attribName+=n:M(this,"Invalid attribute name");continue;case _.ATTRIB_NAME_SAW_WHITE:if("="===n)this.state=_.ATTRIB_VALUE;else{if(p(n))continue;M(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",N(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===n?I(this):v(u,n)?(this.attribName=n,this.state=_.ATTRIB_NAME):(M(this,"Invalid attribute name"),this.state=_.ATTRIB)}continue;case _.ATTRIB_VALUE:if(p(n))continue;m(n)?(this.q=n,this.state=_.ATTRIB_VALUE_QUOTED):(M(this,"Unquoted attribute value"),this.state=_.ATTRIB_VALUE_UNQUOTED,this.attribValue=n);continue;case _.ATTRIB_VALUE_QUOTED:if(n!==this.q){"&"===n?this.state=_.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=n;continue}P(this),this.q="",this.state=_.ATTRIB_VALUE_CLOSED;continue;case _.ATTRIB_VALUE_CLOSED:p(n)?this.state=_.ATTRIB:">"===n?I(this):"/"===n?this.state=_.OPEN_TAG_SLASH:v(u,n)?(M(this,"No whitespace between attributes"),this.attribName=n,this.attribValue="",this.state=_.ATTRIB_NAME):M(this,"Invalid attribute name");continue;case _.ATTRIB_VALUE_UNQUOTED:if(!g(n)){"&"===n?this.state=_.ATTRIB_VALUE_ENTITY_U:this.attribValue+=n;continue}P(this),">"===n?I(this):this.state=_.ATTRIB;continue;case _.CLOSE_TAG:if(this.tagName)">"===n?L(this):v(h,n)?this.tagName+=n:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=_.SCRIPT):(p(n)||M(this,"Invalid tagname in closing tag"),this.state=_.CLOSE_TAG_SAW_WHITE);else{if(p(n))continue;y(u,n)?this.script?(this.script+="</"+n,this.state=_.SCRIPT):M(this,"Invalid tagname in closing tag."):this.tagName=n}continue;case _.CLOSE_TAG_SAW_WHITE:if(p(n))continue;">"===n?L(this):M(this,"Invalid characters in closing tag");continue;case _.TEXT_ENTITY:case _.ATTRIB_VALUE_ENTITY_Q:case _.ATTRIB_VALUE_ENTITY_U:var a,c;switch(this.state){case _.TEXT_ENTITY:a=_.TEXT,c="textNode";break;case _.ATTRIB_VALUE_ENTITY_Q:a=_.ATTRIB_VALUE_QUOTED,c="attribValue";break;case _.ATTRIB_VALUE_ENTITY_U:a=_.ATTRIB_VALUE_UNQUOTED,c="attribValue"}";"===n?(this[c]+=D(this),this.entity="",this.state=a):v(this.entity.length?f:d,n)?this.entity+=n:(M(this,"Invalid character in entity name"),this[c]+="&"+this.entity+n,this.entity="",this.state=a);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(t){for(var r=Math.max(e.MAX_BUFFER_LENGTH,10),n=0,o=0,s=i.length;o<s;o++){var a=t[i[o]].length;if(a>r)switch(i[o]){case"textNode":S(t);break;case"cdata":N(t,"oncdata",t.cdata),t.cdata="";break;case"script":N(t,"onscript",t.script),t.script="";break;default:C(t,"Max buffer length exceeded: "+i[o])}n=Math.max(n,a)}var c=e.MAX_BUFFER_LENGTH-n;t.bufferCheckPosition=c+t.position}(this);return this}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var t;S(t=this),""!==t.cdata&&(N(t,"oncdata",t.cdata),t.cdata=""),""!==t.script&&(N(t,"onscript",t.script),t.script="")}};try{n=r(74).Stream}catch(t){n=function(){}}var s=e.EVENTS.filter((function(t){return"error"!==t&&"end"!==t}));function a(t,e){if(!(this instanceof a))return new a(t,e);n.apply(this),this._parser=new o(t,e),this.writable=!0,this.readable=!0;var r=this;this._parser.onend=function(){r.emit("end")},this._parser.onerror=function(t){r.emit("error",t),r._parser.error=null},this._decoder=null,s.forEach((function(t){Object.defineProperty(r,"on"+t,{get:function(){return r._parser["on"+t]},set:function(e){if(!e)return r.removeAllListeners(t),r._parser["on"+t]=e,e;r.on(t,e)},enumerable:!0,configurable:!1})}))}a.prototype=Object.create(n.prototype,{constructor:{value:a}}),a.prototype.write=function(e){if("function"==typeof t&&"function"==typeof t.isBuffer&&t.isBuffer(e)){if(!this._decoder){var n=r(30).StringDecoder;this._decoder=new n("utf8")}e=this._decoder.write(e)}return this._parser.write(e.toString()),this.emit("data",e),!0},a.prototype.end=function(t){return t&&t.length&&this.write(t),this._parser.end(),!0},a.prototype.on=function(t,e){var r=this;return r._parser["on"+t]||-1===s.indexOf(t)||(r._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),r.emit.apply(r,e)}),n.prototype.on.call(r,t,e)};var c="http://www.w3.org/XML/1998/namespace",l={xml:c,xmlns:"http://www.w3.org/2000/xmlns/"},u=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,h=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,d=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,f=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function p(t){return" "===t||"\n"===t||"\r"===t||"\t"===t}function m(t){return'"'===t||"'"===t}function g(t){return">"===t||p(t)}function v(t,e){return t.test(e)}function y(t,e){return!v(t,e)}var b,w,x,_=0;for(var T in e.STATE={BEGIN:_++,BEGIN_WHITESPACE:_++,TEXT:_++,TEXT_ENTITY:_++,OPEN_WAKA:_++,SGML_DECL:_++,SGML_DECL_QUOTED:_++,DOCTYPE:_++,DOCTYPE_QUOTED:_++,DOCTYPE_DTD:_++,DOCTYPE_DTD_QUOTED:_++,COMMENT_STARTING:_++,COMMENT:_++,COMMENT_ENDING:_++,COMMENT_ENDED:_++,CDATA:_++,CDATA_ENDING:_++,CDATA_ENDING_2:_++,PROC_INST:_++,PROC_INST_BODY:_++,PROC_INST_ENDING:_++,OPEN_TAG:_++,OPEN_TAG_SLASH:_++,ATTRIB:_++,ATTRIB_NAME:_++,ATTRIB_NAME_SAW_WHITE:_++,ATTRIB_VALUE:_++,ATTRIB_VALUE_QUOTED:_++,ATTRIB_VALUE_CLOSED:_++,ATTRIB_VALUE_UNQUOTED:_++,ATTRIB_VALUE_ENTITY_Q:_++,ATTRIB_VALUE_ENTITY_U:_++,CLOSE_TAG:_++,CLOSE_TAG_SAW_WHITE:_++,SCRIPT:_++,SCRIPT_ENDING:_++},e.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},e.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(e.ENTITIES).forEach((function(t){var r=e.ENTITIES[t],n="number"==typeof r?String.fromCharCode(r):r;e.ENTITIES[t]=n})),e.STATE)e.STATE[e.STATE[T]]=T;function E(t,e,r){t[e]&&t[e](r)}function N(t,e,r){t.textNode&&S(t),E(t,e,r)}function S(t){t.textNode=O(t.opt,t.textNode),t.textNode&&E(t,"ontext",t.textNode),t.textNode=""}function O(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function C(t,e){return S(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,E(t,"onerror",e),t}function A(t){return t.sawRoot&&!t.closedRoot&&M(t,"Unclosed root tag"),t.state!==_.BEGIN&&t.state!==_.BEGIN_WHITESPACE&&t.state!==_.TEXT&&C(t,"Unexpected end"),S(t),t.c="",t.closed=!0,E(t,"onend"),o.call(t,t.strict,t.opt),t}function M(t,e){if("object"!=typeof t||!(t instanceof o))throw new Error("bad call to strictFail");t.strict&&C(t,e)}function k(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,r=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(r.ns=e.ns),t.attribList.length=0,N(t,"onopentagstart",r)}function j(t,e){var r=t.indexOf(":")<0?["",t]:t.split(":"),n=r[0],i=r[1];return e&&"xmlns"===t&&(n="xmlns",i=""),{prefix:n,local:i}}function P(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))t.attribName=t.attribValue="";else{if(t.opt.xmlns){var e=j(t.attribName,!0),r=e.prefix,n=e.local;if("xmlns"===r)if("xml"===n&&t.attribValue!==c)M(t,"xml: prefix must be bound to "+c+"\nActual: "+t.attribValue);else if("xmlns"===n&&"http://www.w3.org/2000/xmlns/"!==t.attribValue)M(t,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+t.attribValue);else{var i=t.tag,o=t.tags[t.tags.length-1]||t;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[n]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,N(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}}function I(t,e){if(t.opt.xmlns){var r=t.tag,n=j(t.tagName);r.prefix=n.prefix,r.local=n.local,r.uri=r.ns[n.prefix]||"",r.prefix&&!r.uri&&(M(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),r.uri=n.prefix);var i=t.tags[t.tags.length-1]||t;r.ns&&i.ns!==r.ns&&Object.keys(r.ns).forEach((function(e){N(t,"onopennamespace",{prefix:e,uri:r.ns[e]})}));for(var o=0,s=t.attribList.length;o<s;o++){var a=t.attribList[o],c=a[0],l=a[1],u=j(c,!0),h=u.prefix,d=u.local,f=""===h?"":r.ns[h]||"",p={name:c,value:l,prefix:h,local:d,uri:f};h&&"xmlns"!==h&&!f&&(M(t,"Unbound namespace prefix: "+JSON.stringify(h)),p.uri=h),t.tag.attributes[c]=p,N(t,"onattribute",p)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),N(t,"onopentag",t.tag),e||(t.noscript||"script"!==t.tagName.toLowerCase()?t.state=_.TEXT:t.state=_.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function L(t){if(!t.tagName)return M(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=_.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=_.SCRIPT);N(t,"onscript",t.script),t.script=""}var e=t.tags.length,r=t.tagName;t.strict||(r=r[t.looseCase]());for(var n=r;e--;){if(t.tags[e].name===n)break;M(t,"Unexpected close tag")}if(e<0)return M(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=_.TEXT);t.tagName=r;for(var i=t.tags.length;i-- >e;){var o=t.tag=t.tags.pop();t.tagName=t.tag.name,N(t,"onclosetag",t.tagName);var s={};for(var a in o.ns)s[a]=o.ns[a];var c=t.tags[t.tags.length-1]||t;t.opt.xmlns&&o.ns!==c.ns&&Object.keys(o.ns).forEach((function(e){var r=o.ns[e];N(t,"onclosenamespace",{prefix:e,uri:r})}))}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=_.TEXT}function D(t){var e,r=t.entity,n=r.toLowerCase(),i="";return t.ENTITIES[r]?t.ENTITIES[r]:t.ENTITIES[n]?t.ENTITIES[n]:("#"===(r=n).charAt(0)&&("x"===r.charAt(1)?(r=r.slice(2),i=(e=parseInt(r,16)).toString(16)):(r=r.slice(1),i=(e=parseInt(r,10)).toString(10))),r=r.replace(/^0+/,""),isNaN(e)||i.toLowerCase()!==r?(M(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCodePoint(e))}function F(t,e){"<"===e?(t.state=_.OPEN_WAKA,t.startTagPosition=t.position):p(e)||(M(t,"Non-whitespace before first tag."),t.textNode=e,t.state=_.TEXT)}function R(t,e){var r="";return e<t.length&&(r=t.charAt(e)),r}_=e.STATE,String.fromCodePoint||(b=String.fromCharCode,w=Math.floor,x=function(){var t,e,r=16384,n=[],i=-1,o=arguments.length;if(!o)return"";for(var s="";++i<o;){var a=Number(arguments[i]);if(!isFinite(a)||a<0||a>1114111||w(a)!==a)throw RangeError("Invalid code point: "+a);a<=65535?n.push(a):(t=55296+((a-=65536)>>10),e=a%1024+56320,n.push(t,e)),(i+1===o||n.length>r)&&(s+=b.apply(null,n),n.length=0)}return s},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:x,configurable:!0,writable:!0}):String.fromCodePoint=x)}(e)}).call(this,r(17).Buffer)},function(t,e,r){t.exports=i;var n=r(22).EventEmitter;function i(){n.call(this)}r(13)(i,n),i.Readable=r(28),i.Writable=r(82),i.Duplex=r(83),i.Transform=r(84),i.PassThrough=r(85),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",a),r.on("close",c));var s=!1;function a(){s||(s=!0,t.end())}function c(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(u(),0===n.listenerCount(this,"error"))throw t}function u(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",a),r.removeListener("close",c),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",u),r.removeListener("close",u),t.removeListener("close",u)}return r.on("error",l),t.on("error",l),r.on("end",u),r.on("close",u),t.on("close",u),t.emit("pipe",r),t}},function(t,e){},function(t,e,r){"use strict";var n=r(24).Buffer,i=r(77);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return n.alloc(0);if(1===this.length)return this.head.data;for(var e,r,i,o=n.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,r=o,i=a,e.copy(r,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(79),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(7))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,i,o,s,a,c=1,l={},u=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},n=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,n=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(p,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),n=function(e){t.postMessage(s+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return l[c]=i,n(c),c++},d.clearImmediate=f}function f(t){delete l[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{f(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(7),r(4))},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,r(7))},function(t,e,r){"use strict";t.exports=o;var n=r(39),i=Object.create(r(18));function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=r(13),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(29)},function(t,e,r){t.exports=r(11)},function(t,e,r){t.exports=r(28).Transform},function(t,e,r){t.exports=r(28).PassThrough},function(t,e,r){"use strict";r.r(e),r.d(e,"tag_supported",(function(){return d}));var n=r(2);function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=Symbol("primary_cache"),c=Symbol("secondary_cache"),l=function(t,e){var r=t.ABO,i=t.B4GALNT2,s=t.MGAT2,a=t.MGAT3,c=t.MGAT4A,l=t.MGAT4B,u=t.MGAT4C,h=t.MGAT5,d=t.MGAT5B,f=t.GCNT3,p=t.GCNT4,m=t.CHST5,g=t.CHST7,v=t.CHST4,y=t.CHST2,b=t.HS3ST1,w=t.HS3ST2,x=t.HS3ST4,_=t.HS3ST5,T=t.HS3ST6,E=t.HS3ST3A1,N=t.HS3ST3B1,S=t.HS6ST1,O=t.HS6ST2,C=t.HS6ST3;for(var A of(delete t.ABO,delete t.B4GALNT2,delete t.MGAT2,delete t.MGAT3,delete t.MGAT4A,delete t.MGAT4B,delete t.MGAT4C,delete t.MGAT5,delete t.MGAT5B,delete t.GCNT3,delete t.GCNT4,delete t.CHST5,delete t.CHST7,delete t.CHST4,delete t.CHST2,delete t.HS3ST1,delete t.HS3ST2,delete t.HS3ST4,delete t.HS3ST5,delete t.HS3ST6,delete t.HS3ST3A1,delete t.HS3ST3B1,delete t.HS6ST1,delete t.HS6ST2,delete t.HS6ST3,t.FUT8&&(t.FUT8.reactions=t.FUT8.reactions.map(t=>t.filter(t=>t.indexOf("!")<0))),t.NDST1||t.NDST2||t.NDST3||t.NDST4||(t.hs_epimerase={reactions:[['GlcA(b1-4)GlcNAc(a1-4)*(u?-?)Xyl(b1-O)Ser+"{GlcN}@y4a"','IdoA(b1-4)GlcNAc(a1-4)*(u?-?)Xyl(b1-O)Ser+"{GlcN}@y4a"']]}),t.PIGL||(t.PIGL={reactions:[['GlcNAc(a1-6)PI+"{GlcN}@y2a"']]}),t.ANY={reactions:[['Any(a1-O)Ser+"{Gal(b1-3)}@y2a"'],['Any(a1-O)Ser+"{GlcNAc(b1-3)}@y2a"'],['Any(a1-O)Ser+"{GalNAc(b1-3)}@y2a"'],['Any(a1-O)Ser+"{NeuAc(a2-3)}@y2a"'],['Ser+"{Any(a1-O)}@y1a"']]},Object.keys(t)))t[A].reactions=t[A].reactions.map(t=>t.map(t=>t.replace("[acyl(u?-?)]","")));var M,k=n.ReactionGroup.groupFromJSON(t,e,["hs_epimerase","PIGL","NDST1","NDST2","NDST3","NDST4","GLCE","DSE","DSEL"]),j={ABO:r,B4GALNT2:i,MGAT2:s,MGAT3:a,MGAT4A:c,MGAT4B:l,MGAT4C:u,MGAT5:h,MGAT5B:d,GCNT3:f,GCNT4:p,CHST5:m,CHST7:g,CHST4:v,CHST2:y,HS3ST1:b,HS3ST2:w,HS3ST4:x,HS3ST5:_,HS3ST6:T,HS3ST3A1:E,HS3ST3B1:N,HS6ST1:S,HS6ST2:O,HS6ST3:C};return j=Object.entries(j).filter(t=>{var[e,r]=t;return r}).reduce((t,e)=>{var[r,n]=e;return o(o({},t),{},{[r]:n})},{}),Object.keys(j).length>0&&(M=n.ReactionGroup.groupFromJSON(j,e)),{primaryGroup:k,secondaryGroup:M}},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Symbol("supported"),e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return e.forEach(e=>{for(var i of(r.supportLinkages(e,r.reactions,t,n),e.root.setTag(t),e.breadth_first_traversal()))i.parent&&(i.parent.getTag(t)||i.setTag(t,null))}),t},h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Symbol("supported"),e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var o of e){var s=Symbol("potential");r.supportLinkages(o,r.reactions,s,i);var a=Symbol("cached_attachment"),c=!0;for(var l of o.composition_for_tag(s))l.setTag(a,o.location_for_monosaccharide(l)),c=!1;if(!c){var u=o.clone();for(var h of u.composition())h.getTag(t)||h.getTag(s)||h.parent.removeChild(h.parent.linkageOf(h),h);var d=Symbol("valid_attach");r.supportLinkages(u,r.reactions,d,n.SEQUENCE_CACHEKEY);var f=u.composition_for_tag(d);for(var p of f)p.getTag(a)&&o.locate_monosaccharide(p.getTag(a)).setTag(t)}}},d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Symbol("supported"),e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,{primaryGroup:i,secondaryGroup:o}=l(r,n);return u(t,e,i,a),o&&h(t,e,o,c),t}}]);